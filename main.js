!function(e){function t(t){for(var a,i,c=t[0],l=t[1],s=t[2],d=0,p=[];d<c.length;d++)i=c[d],r[i]&&p.push(r[i][0]),r[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(u&&u(t);p.length;)p.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,c=1;c<n.length;c++){var l=n[c];0!==r[l]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={0:0},o=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var u=l;o.push([468,1]),n()}({468:function(e,t,n){n(469),e.exports=n(837)},837:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(48),i=n.n(o),c=(n(37),n(38),n(39),n(82),n(83),n(149),n(27),n(64),n(190),n(84),n(45),n(40),n(46),n(85),n(47),n(31),n(92),n(193),n(655),n(28),n(348),n(657),n(86),n(32),n(247),n(4)),l=n.n(c),s=n(56),u=n(221),d=n.n(u),p=n(219),m=n.n(p),f=n(218),h=n.n(f),y=n(220),g=n.n(y),b=n(15),v=n.n(b),_=n(130),w=n.n(_),E=n(165),S=n.n(E),k=n(405),O=n.n(k),C=n(293),T=n(406),x=n.n(T),I=n(403),P=n.n(I),j=n(404),M=n.n(j),N=n(23),R=n.n(N),A=n(3);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function q(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D=["Loading...","Burning Coal...","Deleting Steam Keys...","Exploiting Resources...","Petting Lizard Doggo...","Adding Pipes...","Adding Mana...","Spilling Coffee...","Becoming A Goat...","Charging Batteries..."],z=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),q(this,B(t).call(this,e))}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,r.a.Component),n=t,(a=[{key:"componentDidUpdate",value:function(e,t){!0!==this.props.ready||e.ready||this.props.parentState.setState({isReady:!0},function(){console.info('App set as "Ready"',A)})}},{key:"render",value:function(){var e=this.props;e.ready,e.parentState,e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"loader-spinner"}),r.a.createElement("div",{className:"align-loading"},r.a.createElement("div",{className:"loading-text align-loading-text"},D[Math.floor(Math.random()*D.length)])))}}])&&G(n.prototype,a),o&&G(n,o),t}(),W=Object(s.withStyles)(function(e){return{root:{}}})(z),H=n(5),Y=n.n(H);function J(e,t,n,a,r,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(a,r)}function K(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function i(e){J(o,a,r,i,c,"next",e)}function c(e){J(o,a,r,i,c,"throw",e)}i(void 0)})}}var Q=Y.a.schema.create("test",6);Q.createTable("node_type").addColumn("id",Y.a.Type.INTEGER).addPrimaryKey(["id"]).addColumn("hidden",Y.a.Type.BOOLEAN).addColumn("name",Y.a.Type.STRING),Q.createTable("machine_node_type").addColumn("id",Y.a.Type.INTEGER).addPrimaryKey(["id"]).addColumn("name",Y.a.Type.STRING).addColumn("hidden",Y.a.Type.BOOLEAN),Q.createTable("machine_version").addColumn("id",Y.a.Type.INTEGER).addPrimaryKey(["id"]).addColumn("hidden",Y.a.Type.BOOLEAN).addColumn("color",Y.a.Type.STRING).addColumn("rank",Y.a.Type.INTEGER).addColumn("representation",Y.a.Type.STRING).addColumn("name",Y.a.Type.STRING).addNullable(["color","rank"]),Q.createTable("machine_class").addColumn("id",Y.a.Type.INTEGER).addPrimaryKey(["id"]).addColumn("name",Y.a.Type.STRING).addColumn("icon",Y.a.Type.STRING).addNullable(["icon"]).addColumn("hidden",Y.a.Type.BOOLEAN).addColumn("plural",Y.a.Type.STRING),Q.createTable("machine_node").addColumn("id",Y.a.Type.INTEGER).addColumn("speed",Y.a.Type.INTEGER).addColumn("power",Y.a.Type.INTEGER).addNullable(["power"]).addPrimaryKey(["id"]).addColumn("name",Y.a.Type.STRING).addColumn("hidden",Y.a.Type.BOOLEAN).addColumn("node_type_id",Y.a.Type.STRING).addColumn("icon",Y.a.Type.STRING).addColumn("input_slots",Y.a.Type.INTEGER).addColumn("output_slots",Y.a.Type.INTEGER),Q.createTable("path_type").addColumn("id",Y.a.Type.INTEGER).addPrimaryKey(["id"]).addColumn("name",Y.a.Type.STRING).addColumn("speed",Y.a.Type.INTEGER).addColumn("rank",Y.a.Type.INTEGER).addColumn("machine_class_id",Y.a.Type.INTEGER).addNullable(["machine_class_id"]).addColumn("hidden",Y.a.Type.BOOLEAN),Q.createTable("purity_type").addColumn("id",Y.a.Type.INTEGER).addPrimaryKey(["id"]).addColumn("name",Y.a.Type.STRING).addColumn("hidden",Y.a.Type.BOOLEAN).addColumn("quantity",Y.a.Type.INTEGER),Q.createTable("spring_type").addColumn("id",Y.a.Type.INTEGER).addPrimaryKey(["id"]).addColumn("name",Y.a.Type.STRING).addColumn("hidden",Y.a.Type.BOOLEAN),Q.createTable("spring").addColumn("id",Y.a.Type.INTEGER).addPrimaryKey(["id"]).addColumn("spring_type_id",Y.a.Type.INTEGER).addColumn("machine_class_id",Y.a.Type.INTEGER).addColumn("item_id",Y.a.Type.INTEGER).addColumn("icon",Y.a.Type.STRING).addNullable(["item_id","icon"]).addColumn("hidden",Y.a.Type.BOOLEAN).addColumn("purities",Y.a.Type.OBJECT),Q.createTable("item").addColumn("id",Y.a.Type.INTEGER).addPrimaryKey(["id"]).addColumn("name",Y.a.Type.STRING).addColumn("icon",Y.a.Type.STRING).addColumn("hidden",Y.a.Type.BOOLEAN),Q.createTable("recipe").addColumn("id",Y.a.Type.INTEGER).addPrimaryKey(["id"]).addColumn("name",Y.a.Type.STRING).addColumn("inputs",Y.a.Type.OBJECT).addColumn("machine_class_id",Y.a.Type.INTEGER).addColumn("item_id",Y.a.Type.INTEGER).addColumn("time",Y.a.Type.INTEGER).addColumn("quantity",Y.a.Type.INTEGER).addColumn("power",Y.a.Type.INTEGER).addColumn("hidden",Y.a.Type.BOOLEAN).addColumn("player_unlock_id",Y.a.Type.INTEGER).addColumn("icon",Y.a.Type.STRING).addNullable(["item_id","icon","player_unlock_id"]),Q.createTable("player_unlock").addColumn("id",Y.a.Type.INTEGER).addPrimaryKey(["id"]).addColumn("name",Y.a.Type.STRING).addColumn("chip_name",Y.a.Type.STRING).addNullable(["chip_name"]).addColumn("hidden",Y.a.Type.BOOLEAN);var U=function(e,t){return function(n){var a=n.getSchema().table(e);return new Promise(function(r,o){n.select().from(a).where(a.name.eq(t)).exec().then(function(n){1==n.length?r(n[0].id):o("No element found or too many matching rows: "+e+"|"+t+"|"+n)})})}},Z=function(e,t){var n=t.getSchema().table(e);return new Promise(function(e){t.select().from(n).exec().then(function(t){e(t)})})},V="https://raw.githubusercontent.com/rhocode/rhocode.github.io/master/img/satoolsfactory_icons/",X=function(e){return function(){var t=K(regeneratorRuntime.mark(function t(n){var a,r,o,i,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=0;case 1:if(!(a<e.length)){t.next=17;break}r=e[a],o=Object.keys(r),i=0;case 5:if(!(i<o.length)){t.next=14;break}if("function"!=typeof(c=r[o[i]])){t.next=11;break}return t.next=10,c(n);case 10:r[o[i]]=t.sent;case 11:i++,t.next=5;break;case 14:a++,t.next=1;break;case 17:return t.abrupt("return",e);case 18:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},$=function(){var e=K(regeneratorRuntime.mark(function e(t){var n,a,r,o,i,c,l,s,u,d,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],a=["Coal Ore","Iron Ore","Limestone Ore","Copper Ore","Caterium Ore"],e.next=4,U("machine_class","Miner")(t);case 4:return r=e.sent,e.next=7,U("machine_class","Container")(t);case 7:return o=e.sent,e.next=10,U("spring_type","Miner")(t);case 10:return i=e.sent,e.next=13,U("spring_type","Container")(t);case 13:return c=e.sent,e.next=16,Z("purity_type",t);case 16:l=e.sent,s=0;case 18:if(!(s<a.length)){e.next=27;break}return e.next=21,U("item",a[s])(t);case 21:u=e.sent,d={item_id:u,machine_class_id:r,spring_type_id:i,purities:l},n.push(d);case 24:s++,e.next=18;break;case 27:return p={machine_class_id:o,spring_type_id:c},n.push(p),e.abrupt("return",n);case 30:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),ee=[{key:"purity_type",value:[{name:"Impure",quantity:30},{name:"Normal",quantity:60},{name:"Pure",quantity:120}]},{key:"item",value:[{name:"Copper Ore",icon:V+"Copper_Ore.png"},{name:"Iron Ore",icon:V+"Iron_Ore.png"},{name:"Limestone Ore",icon:V+"Limestone.png"},{name:"Coal Ore",icon:V+"Coal.png"},{name:"Iron Ingot",icon:V+"Iron_Ingot.png"},{name:"Copper Ingot",icon:V+"Copper_Ingot.png"},{name:"Iron Plate",icon:V+"Iron_Plate.png"},{name:"Iron Rod",icon:V+"Iron_Rod.png"},{name:"Screw",icon:V+"Screw.png"},{name:"Wire",icon:V+"Wire.png"},{name:"Cable",icon:V+"Cable.png"},{name:"Concrete",icon:V+"Concrete.png"},{name:"Reinforced Iron Plate",icon:V+"Reinforced_Iron_Plate.png"},{name:"Modular Frame",icon:V+"Modular_Frame.png"},{name:"Rotor",icon:V+"Rotor.png"},{name:"Caterium Ore",icon:V+"Caterium_Ore.png"},{name:"Caterium Ingot",icon:V+"Caterium_Ingot.png"},{name:"Quickwire",icon:V+"Quickwire.png"},{name:"Steel Ingot",icon:V+"Steel_Ingot.png"},{name:"Steel Beam",icon:V+"Steel_Beam.png"},{name:"Steel Pipe",icon:V+"Steel_Pipe.png"},{name:"Encased Industrial Beam",icon:V+"Encased_Industrial_Beam.png"},{name:"Stator",icon:V+"Stator.png"},{name:"Heavy Modular Frame",icon:V+"Heavy_Modular_Frame.png"},{name:"Motor",icon:V+"Motor.png"}]},{key:"node_type",value:[{name:"Machine Node"},{name:"Resource Node"}]},{key:"machine_version",value:[{name:"internal",representation:""},{name:"Mk.1",rank:0,representation:"I"},{name:"Mk.2",rank:1,representation:"II"},{name:"Mk.3",rank:2,representation:"III"},{name:"Mk.4",rank:3,representation:"IV"},{name:"Mk.5",rank:4,representation:"V"},{name:"Mk.6",rank:5,representation:"VI"},{name:"S",rank:6,representation:"S"},{name:"M",rank:7,representation:"M"}]},{key:"path_type",value:[{name:"Item Belt Mk 1",speed:60,machine_version_id:U("machine_version","Mk.1"),rank:0},{name:"Item Belt Mk 2",speed:120,machine_version_id:U("machine_version","Mk.2"),rank:1},{name:"Item Belt Mk 3",speed:270,machine_version_id:U("machine_version","Mk.3"),rank:2},{name:"Item Belt Mk 4",speed:450,machine_version_id:U("machine_version","Mk.4"),rank:3},{name:"Item Belt Mk 5",speed:6600,machine_version_id:U("machine_version","Mk.5"),rank:4},{name:"Item Belt Mk 6",speed:900,machine_version_id:U("machine_version","Mk.6"),rank:5},{name:"internal",speed:9999999,machine_version_id:U("machine_version","internal"),rank:-1}]},{key:"machine_class",value:[{name:"Constructor",plural:"Constructors",icon:V+"Constructor.png"},{name:"Miner",plural:"Miners",icon:V+"Miner_MK1.png"},{name:"Assembler",plural:"Assemblers",icon:V+"Assembler.png"},{name:"Smelter",plural:"Smelters",icon:V+"Smelter.png"},{name:"Coal Generator",plural:"Coal Generators",icon:V+"Coal_Generator.png"},{name:"Manufacturer",plural:"Manufacturer",icon:V+"Manufacturer.png"},{name:"Container",plural:"Containers",icon:V+"Storage_Container_MK1.png"},{name:"Logistic",plural:"Logistics",icon:V+"Splitter.png"},{name:"Foundry",plural:"Foundries",icon:V+"Foundry_MK1.png"}]},{key:"machine_node",value:[{name:"Container",node_type_id:U("node_type","Machine Node"),machine_version_id:U("machine_version","Mk.1"),machine_class_id:U("machine_class","Container"),speed:999999,icon:V+"Storage_Container_MK1.png",input_slots:1,output_slots:1},{name:"Splitter",node_type_id:U("node_type","Machine Node"),machine_version_id:U("machine_version","S"),machine_class_id:U("machine_class","Logistic"),speed:999999,icon:V+"Splitter.png",input_slots:1,output_slots:3},{name:"Merger",node_type_id:U("node_type","Machine Node"),machine_version_id:U("machine_version","M"),machine_class_id:U("machine_class","Logistic"),speed:999999,icon:V+"Merger.png",input_slots:3,output_slots:1},{name:"Miner Mk.1",node_type_id:U("node_type","Machine Node"),machine_version_id:U("machine_version","Mk.1"),machine_class_id:U("machine_class","Miner"),speed:100,power:5,icon:V+"Miner_MK1.png",input_slots:0,output_slots:1},{name:"Miner Mk.2",node_type_id:U("node_type","Machine Node"),machine_version_id:U("machine_version","Mk.2"),machine_class_id:U("machine_class","Miner"),icon:V+"Miner_MK2.png",speed:200,power:5,hidden:!0,input_slots:0,output_slots:1},{name:"Smelter Mk.1",node_type_id:U("node_type","Machine Node"),machine_version_id:U("machine_version","Mk.1"),machine_class_id:U("machine_class","Smelter"),speed:100,icon:V+"Smelter.png",input_slots:1,output_slots:1},{name:"Smelter Mk.2",node_type_id:U("node_type","Machine Node"),machine_version_id:U("machine_version","Mk.2"),machine_class_id:U("machine_class","Smelter"),icon:V+"Smelter.png",speed:200,hidden:!0,input_slots:1,output_slots:1},{name:"Constructor Mk.1",node_type_id:U("node_type","Machine Node"),machine_version_id:U("machine_version","Mk.1"),machine_class_id:U("machine_class","Constructor"),icon:V+"Constructor.png",speed:100,input_slots:1,output_slots:1},{name:"Constructor Mk.2",node_type_id:U("node_type","Machine Node"),machine_version_id:U("machine_version","Mk.2"),machine_class_id:U("machine_class","Constructor"),icon:V+"Constructor.png",speed:200,hidden:!0,input_slots:1,output_slots:1},{name:"Assembler Mk.1",node_type_id:U("node_type","Machine Node"),machine_version_id:U("machine_version","Mk.1"),machine_class_id:U("machine_class","Assembler"),icon:V+"Assembler.png",speed:100,input_slots:2,output_slots:1},{name:"Assembler Mk.2",node_type_id:U("node_type","Machine Node"),machine_version_id:U("machine_version","Mk.2"),machine_class_id:U("machine_class","Assembler"),icon:V+"Assembler.png",speed:100,hidden:!0,input_slots:2,output_slots:1},{name:"Manufacturer Mk.1",node_type_id:U("node_type","Machine Node"),machine_version_id:U("machine_version","Mk.1"),machine_class_id:U("machine_class","Manufacturer"),icon:"",speed:100,hidden:!0,input_slots:4,output_slots:1},{name:"Manufacturer Mk.2",node_type_id:U("node_type","Machine Node"),machine_version_id:U("machine_version","Mk.2"),machine_class_id:U("machine_class","Manufacturer"),icon:"",speed:200,hidden:!0,input_slots:4,output_slots:1},{name:"Coal Generator",node_type_id:U("node_type","Machine Node"),machine_version_id:U("machine_version","Mk.1"),machine_class_id:U("machine_class","Coal Generator"),icon:V+"Coal_Generator.png",speed:100,hidden:!0,input_slots:1,output_slots:0},{name:"Foundry Mk.1",node_type_id:U("node_type","Machine Node"),machine_version_id:U("machine_version","Mk.1"),machine_class_id:U("machine_class","Foundry"),icon:V+"Foundry_MK1.png",speed:100,hidden:!0,input_slots:2,output_slots:1},{name:"Foundry Mk.2",node_type_id:U("node_type","Machine Node"),machine_version_id:U("machine_version","Mk.2"),machine_class_id:U("machine_class","Foundry"),icon:V+"Foundry_MK2.png",speed:200,hidden:!0,input_slots:2,output_slots:1}]},{key:"spring_type",value:[{name:"Miner"},{name:"Container"}]},{key:"player_unlock",value:[{name:"Reinforced Iron Plate (Alt.)"},{name:"Stitched Iron Plate"},{name:"Caterium Wire"},{name:"Encased Industrial Beam (Alt.)"},{name:"Heavy Modular Frame (Alt.)"},{name:"Iron Ingot (Alt.)"},{name:"Iron Wire"},{name:"Modular Frame (Alt.)"},{name:"Rotor (Alt.)"},{name:"Stator (Alt.)"},{name:"Steel Ingot (Alt.)"},{name:"Screw (Alt.)"},{name:"Quickwire (Alt.)"}]},{key:"spring",value:$},{key:"recipe",value:[{name:"Iron Ingot",inputs:X([{item_id:U("item","Iron Ore"),quantity:1}]),machine_class_id:U("machine_class","Smelter"),item_id:U("item","Iron Ingot"),time:2,power:4,quantity:1},{name:"Copper Ingot",inputs:X([{item_id:U("item","Copper Ore"),quantity:1}]),machine_class_id:U("machine_class","Smelter"),item_id:U("item","Copper Ingot"),time:2,power:4,quantity:1},{name:"Caterium Ingot",inputs:X([{item_id:U("item","Caterium Ore"),quantity:4}]),machine_class_id:U("machine_class","Smelter"),item_id:U("item","Caterium Ingot"),time:4,power:4,quantity:1},{name:"Iron Plate",inputs:X([{item_id:U("item","Iron Ingot"),quantity:2}]),machine_class_id:U("machine_class","Constructor"),item_id:U("item","Iron Plate"),time:4,power:4,quantity:1},{name:"Iron Rod",inputs:X([{item_id:U("item","Iron Ingot"),quantity:1}]),machine_class_id:U("machine_class","Constructor"),item_id:U("item","Iron Rod"),time:4,power:4,quantity:1},{name:"Wire",inputs:X([{item_id:U("item","Copper Ingot"),quantity:1}]),machine_class_id:U("machine_class","Constructor"),item_id:U("item","Wire"),time:4,power:4,quantity:3},{name:"Iron Wire",inputs:X([{item_id:U("item","Iron Ingot"),quantity:2}]),machine_class_id:U("machine_class","Constructor"),item_id:U("item","Wire"),time:8,power:4,quantity:9,hidden:!0,player_unlock_id:U("player_unlock","Iron Wire")},{name:"Caterium Wire",inputs:X([{item_id:U("item","Caterium Ingot"),quantity:1}]),machine_class_id:U("machine_class","Constructor"),item_id:U("item","Wire"),time:8,power:4,quantity:9,hidden:!0,player_unlock_id:U("player_unlock","Caterium Wire")},{name:"Cable",inputs:X([{item_id:U("item","Wire"),quantity:2}]),machine_class_id:U("machine_class","Constructor"),item_id:U("item","Cable"),time:4,power:4,quantity:1},{name:"Screw",inputs:X([{item_id:U("item","Iron Rod"),quantity:1}]),machine_class_id:U("machine_class","Constructor"),item_id:U("item","Screw"),time:4,power:4,quantity:6},{name:"Screw (Alt.)",inputs:X([{item_id:U("item","Iron Ingot"),quantity:2}]),machine_class_id:U("machine_class","Constructor"),item_id:U("item","Screw"),time:8,power:4,quantity:12,hidden:!0,player_unlock_id:U("player_unlock","Screw (Alt.)")},{name:"Concrete",inputs:X([{item_id:U("item","Limestone Ore"),quantity:3}]),machine_class_id:U("machine_class","Constructor"),item_id:U("item","Concrete"),time:4,power:4,quantity:1},{name:"Reinforced Iron Plate",inputs:X([{item_id:U("item","Iron Plate"),quantity:4},{item_id:U("item","Screw"),quantity:24}]),machine_class_id:U("machine_class","Assembler"),item_id:U("item","Reinforced Iron Plate"),time:12,power:15,quantity:1},{name:"Reinforced Iron Plate (Alt.)",inputs:X([{item_id:U("item","Iron Plate"),quantity:10},{item_id:U("item","Screw"),quantity:24}]),machine_class_id:U("machine_class","Assembler"),item_id:U("item","Reinforced Iron Plate"),time:24,power:15,quantity:3,hidden:!0,player_unlock_id:U("player_unlock","Reinforced Iron Plate (Alt.)")},{name:"Stitched Iron Plate",inputs:X([{item_id:U("item","Iron Plate"),quantity:6},{item_id:U("item","Wire"),quantity:30}]),machine_class_id:U("machine_class","Assembler"),item_id:U("item","Reinforced Iron Plate"),time:24,power:15,quantity:3,hidden:!0,player_unlock_id:U("player_unlock","Stitched Iron Plate")},{name:"Rotor",inputs:X([{item_id:U("item","Iron Rod"),quantity:3},{item_id:U("item","Screw"),quantity:22}]),machine_class_id:U("machine_class","Assembler"),item_id:U("item","Rotor"),time:10,power:15,quantity:1},{name:"Rotor (Alt.)",inputs:X([{item_id:U("item","Steel Pipe"),quantity:6},{item_id:U("item","Wire"),quantity:20}]),machine_class_id:U("machine_class","Assembler"),item_id:U("item","Rotor"),time:20,power:15,quantity:3,hidden:!0,player_unlock_id:U("player_unlock","Rotor (Alt.)")},{name:"Modular Frame",inputs:X([{item_id:U("item","Reinforced Iron Plate"),quantity:3},{item_id:U("item","Iron Rod"),quantity:6}]),machine_class_id:U("machine_class","Assembler"),item_id:U("item","Modular Frame"),time:15,power:15,quantity:1},{name:"Modular Frame (Alt.)",inputs:X([{item_id:U("item","Reinforced Iron Plate"),quantity:6},{item_id:U("item","Steel Pipe"),quantity:6}]),machine_class_id:U("machine_class","Assembler"),item_id:U("item","Modular Frame"),time:30,power:15,quantity:3,hidden:!0,player_unlock_id:U("player_unlock","Modular Frame (Alt.)")},{name:"Encased Industrial Beam",inputs:X([{item_id:U("item","Steel Beam"),quantity:4},{item_id:U("item","Concrete"),quantity:5}]),machine_class_id:U("machine_class","Assembler"),item_id:U("item","Encased Industrial Beam"),time:15,power:15,quantity:1},{name:"Encased Industrial Beam (Alt.)",inputs:X([{item_id:U("item","Steel Pipe"),quantity:18},{item_id:U("item","Concrete"),quantity:10}]),machine_class_id:U("machine_class","Assembler"),item_id:U("item","Encased Industrial Beam"),time:30,power:15,quantity:3,hidden:!0,player_unlock_id:U("player_unlock","Encased Industrial Beam (Alt.)")},{name:"Heavy Modular Frame",inputs:X([{item_id:U("item","Modular Frame"),quantity:5},{item_id:U("item","Encased Industrial Beam"),quantity:5},{item_id:U("item","Steel Pipe"),quantity:15},{item_id:U("item","Screw"),quantity:90}]),machine_class_id:U("machine_class","Manufacturer"),item_id:U("item","Heavy Modular Frame"),time:30,power:60,quantity:1},{name:"Heavy Modular Frame (Alt.)",inputs:X([{item_id:U("item","Modular Frame"),quantity:8},{item_id:U("item","Encased Industrial Beam"),quantity:10},{item_id:U("item","Steel Pipe"),quantity:36},{item_id:U("item","Concrete"),quantity:25}]),machine_class_id:U("machine_class","Manufacturer"),item_id:U("item","Heavy Modular Frame"),time:64,power:60,quantity:3,hidden:!0,player_unlock_id:U("player_unlock","Heavy Modular Frame (Alt.)")},{name:"Iron Ingot (Alt.)",inputs:X([{item_id:U("item","Iron Ore"),quantity:1},{item_id:U("item","Copper Ore"),quantity:1}]),machine_class_id:U("machine_class","Foundry"),item_id:U("item","Iron Ingot"),time:4,power:4,quantity:3,hidden:!0,player_unlock_id:U("player_unlock","Iron Ingot (Alt.)")},{name:"Steel Ingot",inputs:X([{item_id:U("item","Iron Ore"),quantity:3},{item_id:U("item","Coal Ore"),quantity:3}]),machine_class_id:U("machine_class","Foundry"),item_id:U("item","Steel Ingot"),time:4,power:12,quantity:2},{name:"Steel Ingot (Alt.)",inputs:X([{item_id:U("item","Iron Ingot"),quantity:3},{item_id:U("item","Coal Ore"),quantity:6}]),machine_class_id:U("machine_class","Foundry"),item_id:U("item","Steel Ingot"),time:8,power:12,quantity:6,hidden:!0,player_unlock_id:U("player_unlock","Steel Ingot (Alt.)")},{name:"Steel Beam",inputs:X([{item_id:U("item","Steel Ingot"),quantity:3}]),machine_class_id:U("machine_class","Constructor"),item_id:U("item","Steel Beam"),time:6,power:4,quantity:1},{name:"Steel Pipe",inputs:X([{item_id:U("item","Steel Ingot"),quantity:1}]),machine_class_id:U("machine_class","Constructor"),item_id:U("item","Steel Pipe"),time:4,power:4,quantity:1},{name:"Quickwire",inputs:X([{item_id:U("item","Caterium Ingot"),quantity:1}]),machine_class_id:U("machine_class","Constructor"),item_id:U("item","Quickwire"),time:4,power:4,quantity:4},{name:"Quickwire (Alt.)",inputs:X([{item_id:U("item","Caterium Ingot"),quantity:1},{item_id:U("item","Copper Ingot"),quantity:2}]),machine_class_id:U("machine_class","Assembler"),item_id:U("item","Quickwire"),time:8,power:4,quantity:12,hidden:!0,player_unlock_id:U("player_unlock","Quickwire (Alt.)")},{name:"Motor",inputs:X([{item_id:U("item","Rotor"),quantity:2},{item_id:U("item","Stator"),quantity:2}]),machine_class_id:U("machine_class","Assembler"),item_id:U("item","Motor"),time:12,power:15,quantity:1}]}],te=function(){return(e=K(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Q.connect().then(function(){var e=K(regeneratorRuntime.mark(function e(t){var n,a,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.getSchema(),a=[],r=regeneratorRuntime.mark(function e(a){var r,o,i,c,l,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=(r=ee[a]).key,i=n.table(o),c=[],l=[],"function"!=typeof r.value){e.next=12;break}return e.next=8,r.value(t);case 8:e.sent.forEach(function(e,t){e.hidden=e.hidden||!1,e.id=t,c.push(i.createRow(e))}),e.next=19;break;case 12:s=regeneratorRuntime.mark(function e(n){var a,o,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n,(o=r.value[n]).hidden=o.hidden||!1,o.id=a,s=Object.keys(o).map(function(){var e=K(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof o[n]){e.next=4;break}return e.next=3,o[n](t);case 3:o[n]=e.sent;case 4:return e.abrupt("return",Promise.resolve());case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=7,Promise.all(s);case 7:c.push(i.createRow(o)),l.push(Promise.resolve());case 9:case"end":return e.stop()}},e)}),u=0;case 14:if(!(u<r.value.length)){e.next=19;break}return e.delegateYield(s(u),"t0",16);case 16:u++,e.next=14;break;case 19:return e.next=21,Promise.all(l);case 21:return e.next=23,t.insertOrReplace().into(i).values(c).exec();case 23:console.info("Loaded "+c.length+" into "+o);case 24:case"end":return e.stop()}},e)}),o=0;case 4:if(!(o<ee.length)){e.next=9;break}return e.delegateYield(r(o),"t0",6);case 6:o++,e.next=4;break;case 9:return e.next=11,Promise.all(a);case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=3,t;case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})();var e},ne=(n(200),n(156),n(718),n(157),{lineObjectClass:"line-object",lineParentObjectClass:"lineParentObjectClass",lineHitboxObjectClass:"line-object-hitbox",lineStylingPathClass:"line-object-path-styled",lineStylingArrowClass:"line-object-arrow-styled",lineStylingFullClass:"line-object-combined-styled",overclockedTextClass:"overclockedTextClass",nodeVersionTextClass:"nodeVersionTextClass",nodeRequirementsIconClass:"nodeRequirementsIconClass",nodeSurplusIconClass:"nodeSurplusIconClass",nodeRequirementsSubIconClass:"nodeRequirementsSubIconClass",nodeProducesClass:"nodeProducesClass",nodeSurplusClass:"nodeSurplusClass",nodeProducesPerMinText:"nodeProducesPerMinText",nodeLimitingThroughputText:"nodeLimitingThroughputText",nodeLimitingThroughputClass:"nodeLimitingThroughputClass",lineLimitedThroughputText:"lineLimitedThroughputText",lineLimitedThroughputClass:"lineLimitedThroughputClass",selectedClass:"selected",selectedNodeClass:"selected-node",selectedLineClass:"selected-line",connectableClass:"potential-connectable-node",graphNodeClass:"graphMachineNode",graphNodeHoverClass:"graphNodeHoverClass",overclockedArcClass:"overclockedArcClass",graphNodeGrabbedClass:"graphNodeGrabbedClass",graphNodeIdBase:"graph-svg-node-",svgGraphClass:"graph-svg",activeEditId:"active-editing",BACKSPACE_KEY:8,DELETE_KEY:46,ENTER_KEY:13,nodeRadius:50}),ae=(n(719),n(127),n(721),n(201),n(202),n(371),n(158),n(159),n(272),n(726),n(728),function(e,t){return Math.round(e/t)*t});var re=function(e){var t=["0"],n=[],a={},r={},o=[];return Object.keys(e).forEach(function(i){Object.keys(r).includes(i)||function i(c){if(r[c]=t[0],a[c]=t[0],t[0]=(parseInt(t[0],10)+1).toString(),n.push(c),(e[c]||[]).forEach(function(e){if(Object.keys(r).includes(e)){if(n.includes(e)){if(void 0===a[c]||void 0===a[e])throw new Error("Not defined: "+c+" "+e+" "+JSON.stringify(a)+" "+JSON.stringify(r));a[c]=Math.min(parseInt(a[c],10),parseInt(r[e],10)).toString()}}else{if(i(e),void 0===a[c]||void 0===a[e])throw new Error("Not defined: "+c+" "+e+" "+JSON.stringify(a));a[c]=Math.min(parseInt(a[c],10),parseInt(a[e],10)).toString()}}),a[c]===r[c]){for(var l=[];;){var s=n.pop();if(l.push(s),s===c)break}o.push(l.slice())}}(i)}),o},oe=(n(731),n(733),n(734),n(735),n(736),n(109),n(737),n(166)),ie=n(167),ce=n.n(ie),le=n(95),se=n.n(le),ue=function(e,t){-1!==e.indexOf(t)&&e.splice(e.indexOf(t),1)},de=function(e){return Object(oe.a)(ce.a.inflate(se.a.atob(e),{to:"string"}))},pe="eJy9XG1z47YR/is3/Oz6uAAIkvetSdupp3FyzWXSDx6Ph5Fom3MyqZLUXT03+e8FFnzBGylSOkuJLZISsIvn2V3sAvDdfQu+5HVTVGXwIbwO4Sp4qrP989+yNgs+BBBcBftd9prX3QMiHjT5ps5bcUODP6++BWW1zRtxx8RHu6L8LK8j+Qn+fxdw8TwWP4n4ScUPhPKX7Blkb0DlL9kYIvlLfh3k90E2gDS4F30Q2YbINkS2IbINkW2IbENkGyLbENmGSClUtqCyBZUtqGxBZQsqW1Auuv0WbNWgqGz6km2eizKXt7KTbLervubbm1I+SMcHvxzkyJnsvSibNis3sgmTgg57Ad02/+11r/CQcoutgPUq+F/wgYTi/TX4wOR7JTDf7KrN5+AD4P0+Lx+K8qHZVW2DLfBJdWjxkfiWFLfN/4effXlVb+LuL1yQpr0IvQoee2mPvTgxst32Y119KTqqJBrPWfOpOtQb9URCs6nKNhMYbG/a/AWfSqwKcXMjPvqpqj4f9vIp757+9lxXh6fnjwoSCWL++FhsirzcvKI18ZTpL6KaNR/z+rYoDy0il6ARdUyw1GAiCi0mIrCZiIjJRERdJiLWMQHIBOuYgJOYCAcmwGAiVMCzHnjwAR9FNvAR9wEfxcuBjxILePDAHKU6zDycN3juwMwtmLkHZt7DTAyYYxvmlK6CmZgGT02DB2AW8LEPeO4Az73A8xXAcxt4oVnCaRTFSZTQmEfgY4IbTMThvMHHDhPxAoOPacdEZDBxWugZmaC2wdsox8xGOY58KMcST4M0vFiIe+xGGmK9PLjHRqCJjwSaJLRxT8DEPSEu7kmPO0fc+ZQHrMSdHcM9cXBPvLgnPe7ccJaFuCc27j7zTgyYExPm1IY5dcw7tcw79Zh32geaGGEG8p1wjnwBHchsYEmdwJJ6A0s6HViOQZomPjZSI46IoRpIQwgW1BASG2sIqQk2hMxFG8KogztRcH+vcMINuKfiOrDZVAZCbhMAYexjAMLkZAogTH0cgMhldRIwq9VIAGKTgNmuSQLmvjoJmAfbJGBeLElITZs/l4TYIGEim4T5dBIwXzc5wOzd5QDS0znAIsDlQJQFOgdYIMxEdiAuBcSiwBfbgfRuAGBE93MZSI5FdyCuiRO/iWP9YwT4NRMrYOV0lAdqGj09avTUjTzUjjxeo6dD4k4MyM/N3NMlRj9A6M3kgTqBH6g38gM9PfQD9cZ+oGbwZ1bwZ07wZy4FzKaA+YI/G6yemYHn7OopnJ9t/agz1xWY3xXYdLR38WS24YfX3Hr52IlMT4jgGA2RS0O0iIaxhFUpffKdUh7wFrHJbMoDbhUL/jIW1tSx4BSyC0kwfYEf9QW3ugW7vPWTwPv0HlR+L8D+PlMAEK8vhPOzLneyfuDetB84X0EDd8urJTTwxKTBzPw9s0LslFgQWzUWxL6JeKhuITZ84eyIRBctrSXzEcqtgcFfBEM8zcrReSGOvdx1RW6DsmUiI77VZvUTLtdyG9zUA26iVjb7pcZ9VZTYsyp/F5oQ5k/i6f5GdSSeUFOxeL1ibFQMdMVWrFECFsCmYrGpWKorlixSLBkVI7pi06muqxhWxoZiKZiK4bL5pGapz1FSOmpGNc1U/bxUs8jRjFuaEV0zsOczrHwd1TTQmK7aCtBIaINGQhs0aqjmhBcPnyQko2rRqBpRxfJS1ZijWmSpxgzVwkWq8VE1rqu2YpolWAabqqWWapGuWrxEM9DCRqxpBivCBgE7bBCgc5o5lbNfNS1wJLpqKwIHATtwEIjnVEsXaaY5QaprtsYJiOMExHYCI9jCItWI5gSgzQOErPEC4ngBsb0gOUE3zQsAdN3WuAFx3IDYbsDX60Y1PwBtNiB0jSNQxxGo7QjGPKVM+UjMJVSfQamu2xpPoI4nUNsTwNBtUfygmisA03Vb4wvM8QU2PyEsmeAJ031BnxHYGl9gji8w2xdM3ZZkRYTpvqBPCWyNLzDHF5jyhTrfFHspnXSlbpm9qFt1MuBQZzu8RYg28hCBuMHd5WK7zcXtY7ZrcpWukz+v7oRPxPfijd7rnTG7dbPP822XYRflvkvWG0ywROquPQCvKBFN5bGEh/a1015aeFeNPAznHcRzrj3f7LJGgkplEn2n9vRFySfUvceTDFLlEFvh8QS8wvMGeIWHDuQVFqAMr2QPEV5JfDheyeHFeCVHneCV1C7FKzz9gEKwDAOUghuNgGKwrAKUg/UToCCsmwAlYcUEKArrJEBZWJQACsNiBFAaFiAEpWE9QVBajGNCaWhyBKVhXUBQWqJ8CjvGTF+p1qX4UrnwWnRovExjErm8bkyYwo/GhEl6bw646eRhOBSEMEFNrBuSSsX1lpOGBMsMKT7HkNBn7tQOrQDKMCSFZNojCZGJUIpN+VUinYXoY8Qts0ln6YfQ1od8getgFR0uHGNKPGOccxa0QixC0PJSxbq0lvA6ocYLrOHL0Ij88vtZBLtaREii12aP1OpRTlLSWu4SA80piyFH0PTZT7dHdjqYcwaD7tZt+gk4RaFuDJCGRoCmoRGgaagFaBpOBGguA/Q9/lgddaCk+LI6OsWtlpqc162Ub8idYWkbVJRaCiVxGeGxLpArZn+qC/FQmYh23AXLJSkfb6QFaDDKz/aHumhf8TY1UMUyZ0QVNF+kWL14xgpIoAkq2H67r77mNdabRncGtuEybOk52AJW0HfdTjAFZhoh4Ar9AC1EZpYA3YNhmNyEK9bhSvxwxT4jxHR3wgi7JG7OCKmfmGVAURL6gBL8IFAQzZihDlZXllmzYD+JzQQ5Skg/TdDQg/cduxL/3Y/vo1JYrVEswyiJBgWxghp/d4I6ZZXI2FSWksRgFncKR2ZV2dMRgqWOzzA7ZpnOLCV2yzMDMD8nAANT5k+pOpXqmr/4SE1jrA8yFkb9EI90En2PTvhEJ3Ld3LULDfR42p2o4050WdwhC92JpnPuFJMzLZeZ8yDTTIoLi6qz8jOGUv+s5I+TSjNMvbGyVsutlKnf6mhx5/4qvxH30ZjsrGoeY2vee/y6xhwbx31OFBpIJJpzxQMUZIpMD3VYFa5QR6Z9tKscE0udSCNG8Ner47ctmHLhdcygXBVMYS20qjE9rTGSGrHTSEWzjoaAcUpjfk7j+JzGyTmN0zMa8/CcxnBaYzQSfo6F8RMtTDVmWuPR1XjUh3Ss2HCRoS3kZ2o5C1NPefnfQ1a2mPlOuGHsLQDVkhJ2LW0l+GvT5C9/7ESv2nUjk4K23Tcf3r+vs6/XT0X7fPjj0OS13BnNy/Z6U728r5+rjZhE+vfuW9dF9f4la9q8fl+8PL1vsraqds1jtmmr+vVBzlzN+0HQ9b580gW/u/18LWKNBsdE5mliJnEfJos639d5I5TM2i4U4uqLP9t/02H+WO33ef3wS51343xLYTd1VV5I1E/CHpu2Ki8h68cq210KvZvyqWovMia0i0uJw7F93GXtxczw12p7AVGfNnX+9QJy/lNcxKt+zEQEvIj1lfJvAi8h6te8KB+repNvHy5qhLfV9rDL6od/1GKGuMQ4K3FzERMRHxeHlwvF+UHcpSLVvw/F5vPXy7jbpzbPdxcbmZL2Q569XEzYx2J/CRz/Xm6yRjp4uT00bV1kFxxmdhm3+2eefXl9uHRQuR2DilwRlyfW2FUgvnKQ63hqEwofy7ML/WNns0bPk7sjm31tgduPqrZgQ2nBjlcWzLsZMhYWsSyLAjHNCHM4yBEFxt1bFxeaqI4l7clQYCjkohE5ZpQUMTOhisYyjKwrw8iRMizmRhkmFSR6BYS7vcN6i6e4maiQyGAfNLnm4zi9e2/KvChcc+MUrWZuiQlPasCDG84nWBI9Yknd7rXiKgmnyEqIqQ09pg2fOogwrw2z7HrgSsGs6afW/j0yIu8WmVxcq4vyqV+PpUnUicJjyJ0Dqeu3dp9P4jp7yh8GgQ+3/4I+DPVQ4M7bcBiGJtxYx020vSN17MJffHfAMYdY3NMrcsXmVPuRmFBfvdZ3x1xczS1C/EtBzUiJf61ZuFLw8VDn4su3HR23l6Di1oRfCXWWSFJ9Pye1d2XGzcqZ/RnfbmUX6c/Ynwl17yUaybgFEPxUPRVNW2yC8fLNbXu/K9p2WHbqbw00yRBuuS/cphM7x/HMUD0BQtl5b8B4vnF0p1StK059ymY/NXd1U/18Dp/Y7GOzuptdDVEWlzlVlCVrYn7o38kbvZnghPjpJd8hNf3Vm9uGEtObhrpzZuNU25hRB5X07dBTjldEZx0BYJqPcce+1jwObvP6CQF/05CGQvrpZEB1XMCNvU6X+g03mYsv8m933v0gaBQkvtMjJgvDkUQWDdtZ/pMH1McG62Lb0CMZe+T4x6iqS3Ysgda7pGaXbOwyHXuMpozI12PkNw5vkeB8S6sw9Mee/NGEmhpQ80DbvHSYZeHEkUEtK41DKw01xY0J2GTgXeABdLW/XODxOQOa9XRVyb7DSjaQJwLxYBUL00A/eaC2orq5Y3IPRfJ/q2zv3c/ynJa4xQwluJE/dVW++7XaohQIjf5j/XSk+gNJ77wajMuI77A/XEZUPcouGBCzX/2IMp8IHSCTOhXdg5tBU61navaZ6n1On8kLcFFa9cCMHhL92LX6J44mAppxmm9i2woPpaHKv9SdwhFCgactBJ26aJjgDm2hzynJhZJZ0s+wgf7PyyX9cHBBTg0oFoPQJ2L5vdvAcn+mRxs8XjYEczfawIQxMDuoRHqveKZsiOdur2SCp8julRu9jolm5O11xsgEGMi/NNxvWsZFrWWFb2bNayzQfDMzNSP70j9jTjk+fkb0D5ndKZnpFRxtBlyYUZPRieM/RpPIaML9TWBSA5wnJahS9M3vKoLJPrtL6VO/Y4x42asy8OeqfhHh9P7/K9emRw==",me=function(e){var t={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,n,a){t[n]=a}),t.useExperimentalFeatures=t.useExperimentalFeatures||"",(t.useExperimentalFeatures||"").split(",").includes(e)||"all"===t.useExperimentalFeatures};function fe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var he=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ye;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.length=this.data.length,this.compare=n,this.reheapify()}var t,n,a;return t=e,(n=[{key:"reheapify",value:function(){if(this.length>0)for(var e=(this.length>>1)-1;e>=0;e--)this._down(e)}},{key:"size",value:function(){return this.data.length}},{key:"remove",value:function(e){ue(this.data,e),this.length=this.data.length}},{key:"push",value:function(e){this.data.push(e),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(e){for(var t=this.data,n=this.compare,a=t[e];e>0;){var r=e-1>>1,o=t[r];if(n(a,o)>=0)break;t[e]=o,e=r}t[e]=a}},{key:"_down",value:function(e){for(var t=this.data,n=this.compare,a=this.length>>1,r=t[e];e<a;){var o=1+(e<<1),i=t[o],c=o+1;if(c<this.length&&n(t[c],i)<0&&(o=c,i=t[c]),n(i,r)>=0)break;t[e]=i,e=o}t[e]=r}}])&&fe(t.prototype,n),a&&fe(t,a),e}();function ye(e,t){return e<t?-1:e>t?1:0}function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var _e=function(){var e=this,t=new Set(Object.keys(this.nodeIn));Object.keys(this.nodeOut).forEach(function(e){return t.add(e)});var n=Array.from(t),a={};n.forEach(function(t,r){n[r]=e.graphData.nodes.filter(function(e){return e.id.toString()===t})[0],a[n[r].id]=n[r],n[r].childProvides=[],n[r].hasSources=new Set,n[r].containedItems=[],"Container"!==n[r].machine.name&&"Logistic"!==n[r].machine.name||(n[r].allowedIn=[],n[r].allowedOut=[])});var r={};Object.keys(this.nodeOut).forEach(function(t){var n=e.nodeOut[t];r[t]=new Set(n.map(function(e){return e.id.toString()}))});var o=re(r),i={},c={},l={};o.forEach(function(e,t){i[t]=e,c[t]=e.map(function(e){return a[e]}),e.forEach(function(e){l[e]=t})});var s={};Object.keys(this.nodeOut).forEach(function(t){var n=e.nodeOut[t].map(function(e){return e.id}),a=l[t];s[a]=s[a]||new Set;var r=s[a];n.forEach(function(e){var t=l[e];t!==a&&r.add(t)})});var u={},d={};Object.keys(this.nodeOut).forEach(function(t){var n=e.nodeOut[t].map(function(e){return e.id}),a=l[t];u[a]=u[a]||new Set,d[a]=d[a]||new Set,n.forEach(function(e){var t=l[e];t!==a&&(u[t]||(u[t]=new Set,d[t]=new Set),u[t].add(a),d[t].add(a))})});var p=new he(Array.from(new Set([].concat(ve(Object.keys(s)),ve(Object.keys(u))))),function(e,t){return(u[e]||[]).size-(u[t]||[]).size}),m={},f={};this.props.parentAccessor.state.recipe.item.forEach(function(e){f[e.id]=e.icon}),this.graphData.nodes.forEach(function(t){if(delete t.efficiency,delete t.itemThroughPut,delete t.itemsPerMinute,delete t.internalError,t.data&&t.data.recipe&&!t.data.node&&e.props.parentAccessor.state&&e.props.parentAccessor.state.recipe&&e.props.parentAccessor.state.recipe.recipe&&window.location.search.indexOf("thankYouStay=veryYes")>-1){var n=e.props.parentAccessor.state.recipe.recipe.filter(function(e){return e.id===t.data.recipe.id});n.length>0&&(t.data.recipe=n[0]),console.log("Replaced recipe",n[0])}t.itemIconLookup=f}),this.graphData.links.forEach(function(e){delete e.itemThroughPut,delete e.tempIndex,delete e.forceOverwritable,e.itemIconLookup=f});for(var h=function(){var t=p.pop(),n=c[t],a=Array.from(s[t]||new Set);!function(t,n,a,r){var o=[];if(1===t.length){var i=t[0],l=null,u=null,d=i.instance.speed/100,p=i.overclock/100,f=m[i.id]||[];if(i.data.node){var h=i.data.recipe,y=i.data.purity,g=h.purities.filter(function(e){return e.name===y});if(1!==g.length)throw new Error("Trying to get purity",y,"wtf?");var b=g[0];l={speed:d,overclock:p,quantity:b.quantity,item:h.item.id,time:60,power:i.instance.power,inputs:[]},u=1;var v=l.quantity/l.time*60*i.instance.speed/100*l.overclock;o.push({throughput:l,efficiency:u,source:a}),t.forEach(function(e){e.efficiency=u,e.itemsPerMinute=be({},l.item,v),e.itemThroughPut=be({},l.item,{max:v,actual:v})})}else if("Logistic"===i.machine.name&&"Splitter"===i.instance.name){var _={},w=new Set;f.forEach(function(n){var a=JSON.parse(JSON.stringify(n));a.maxItemsPerSecLimiter=a.calculatedItemPerSecond,a.reconstructionMultiplier=(e.nodeOut[t[0].id]||[]).length||1;var r=a.throughput.item;w.add(r);var i=a.calculatedItemPerSecond;_[r]=_[r]||0,_[r]+=60*i,o.push(a)}),t.forEach(function(e){e.efficiency=1,e.itemsPerMinute={},e.itemThroughPut={},w.forEach(function(t){var n=_[t];e.itemsPerMinute[t]=n,e.itemThroughPut[t]={max:n,actual:n}})})}else if("Logistic"===i.machine.name&&"Merger"===i.instance.name){var E={},S=new Set;f.forEach(function(e){var t=JSON.parse(JSON.stringify(e)),n=t.throughput.item;S.add(n);var a=t.calculatedItemPerSecond;E[n]=E[n]||0,E[n]+=60*a,o.push(t)}),t.forEach(function(e){e.efficiency=1,e.itemsPerMinute={},e.itemThroughPut={},S.forEach(function(t){var n=E[t];e.itemsPerMinute[t]=n,e.itemThroughPut[t]={max:n,actual:n}})})}else if("Container"===i.machine.name){var k={},O=new Set;f.forEach(function(e){var t=e.throughput.item;O.add(t);var n=e.calculatedItemPerSecond;k[t]=k[t]||0,k[t]+=60*n,o.push(e)}),t.forEach(function(e){e.efficiency=1,e.itemsPerMinute={},O.forEach(function(t){var n=k[t];e.itemsPerMinute[t]=n,e.itemThroughPut=be({},t,{max:n,actual:n})})})}else{l={speed:d,overclock:p,quantity:i.data.recipe.quantity,item:i.data.recipe.item.id,time:i.data.recipe.time,power:i.data.recipe.power,inputs:i.data.recipe.inputs.map(function(e){return{item:e.item.id,quantity:e.quantity}})};var C={},T=new Set;f.forEach(function(e){var t=e.throughput.item;T.add(t);var n=e.calculatedItemPerSecond;C[t]=C[t]||0,C[t]+=60*n});var x=new Set,I=[1/0],P=l.quantity/l.time*60*i.instance.speed/100*l.overclock;l.inputs.forEach(function(e){var t=e.item,n=e.quantity,a=C[t]||0;T.has(t)||x.add(t);var r=P*(n/l.quantity),o=P*(Math.min(r,a)/r),c=r;i.itemThroughPut=i.itemThroughPut||{},i.itemThroughPut[t]=i.itemThroughPut[t]||{max:0,actual:0},i.itemThroughPut[t].max+=c,i.itemThroughPut[t].actual+=a;var s=o/P;I.push(Math.min(1,s))}),u=x.size>0?0:Math.min.apply(Math,I),o.push({throughput:l,efficiency:u,source:a}),t.forEach(function(e){e.efficiency=u,e.itemsPerMinute=be({},l.item,P*u)})}var j=0,M=0,N={},R=[];(s[a]||[]).forEach(function(n){var a=t.map(function(e){return e.id}),r=c[n].map(function(e){return e.id});a.forEach(function(t){r.forEach(function(n){var a=e.graphData.links.filter(function(e){return e.source.id===t&&e.target.id===n}),r=null;if(a&&1===a.length)r=a[0],R.push({source:t,target:n,speed:r.instance.speed,link:r}),M+=r.instance.speed;else if(a&&a.length>1)throw new Error("Too many links found!!!")})})});var A=o.map(function(e){var t=e.throughput.quantity,n=e.throughput.time,a=e.efficiency,r=e.throughput.overclock,o=e.throughput.speed,i=e.throughput.item,c=void 0===e.maxItemsPerSecLimiter?1/0:e.maxItemsPerSecLimiter,l=Math.min(t/n*a*r*o||0,c);return N[i]=N[i]||0,N[i]+=l,l}).reduce(function(e){return e+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)},0);j+=A,R.sort(function(e,t){return e.speed-t.speed});var L=1;60*j>M||(L=0);var G=60*j,q=R.length;R.forEach(function(e){var t=e.target,n=e.speed;if(m[t]=m[t]||[],1===L){var a=n/M;e.fraction=a}else if(G/q>n){G-=n;var r=n/(60*j);e.fraction=r}else{var o=G/q;G-=o;var i=o/(60*j);e.fraction=i}q-=1}),R.forEach(function(e){e.source;var t=e.target,n=e.speed,a=e.link,r=e.fraction||1,i=n;m[t]=m[t]||[],o.forEach(function(e){var n=JSON.parse(JSON.stringify(e)),o=n.throughput.quantity,c=n.throughput.time,l=n.efficiency,s=n.throughput.overclock,u=n.throughput.speed,d=n.throughput.item,p=void 0===n.maxItemsPerSecLimiter?1/0:n.maxItemsPerSecLimiter,f=Math.min(o/c*l*s*u||0,p),h=i/60,y=60*h;n.maxItemsPerSecLimiter=Math.min(h*(p/j),y*(p/j),h,p,f*r),n.calculatedItemPerSecond=n.maxItemsPerSecLimiter,a.itemThroughPut=a.itemThroughPut||{},a.itemThroughPut[d]=a.itemThroughPut[d]||{max:0,actual:0},a.itemThroughPut[d].max+=f/(j||1)*y,a.itemThroughPut[d].actual+=60*f*r,m[t].push(n)})})}else{var B=new Set;t.forEach(function(e){B.add(e.id),(m[e.id]||[]).forEach(function(e){var t=JSON.parse(JSON.stringify(e));o.push(t)})});var F={};t.forEach(function(t){JSON.parse(JSON.stringify(m[t.id]||[])).forEach(function(a){var r=function(t,a,r){for(var o=0,i=a.calculatedItemPerSecond,c=be({},t.id,60*i),l=t.id,s=be({},t.id,60*i),u=be({},t.id,60*i),d=function(){var a=new Set,i=[t];a.add(t.id);for(var d=function(){var t=i.pop(),n=c[t.id];"Logistic"===t.machine.name&&"Splitter"===t.instance.name?n/=(e.nodeOut[t.id]||[]).length||1:"Logistic"===t.machine.name&&"Merger"===t.instance.name||t.machine.name,e.nodeOut[t.id].forEach(function(a){if(r.has(a.id)){var o=e.graphData.links.filter(function(e){return e.source.id===t.id&&e.target.id===a.id});if(o&&1!==o.length)throw new Error("Too many links found!!!");o[0].instance.speed,c[a.id]=c[a.id]||0,c[a.id]+=n}}),(e.nodeOut[t.id]||[]).forEach(function(e){!a.has(e.id)&&r.has(e.id)&&(a.add(e.id),i.push(e))})};i.length;)d();var p=c[l]-s[l];if(!n.length||p>s||0===Math.round(1e6*p)||998===o)return Object.keys(c).forEach(function(e){u[e]=Math.round(100*u[e])/100}),{v:u};c[l]-=s[l],Object.keys(c).forEach(function(e){u[e]=u[e]||0,u[e]+=c[e]}),s[l]=p,c=be({},l,p),o++};o<999;){var p=d();if("object"===ge(p))return p.v}}(t,a,B),o=a.throughput.item;Object.keys(r||[]).forEach(function(e){F[e]=F[e]||{},F[e][o]=F[e][o]||0,F[e][o]+=r[e]})})}),t.forEach(function(t){e.nodeOut[t.id].forEach(function(n){if(B.has(n.id)){var a=e.graphData.links.filter(function(e){return e.source.id===t.id&&e.target.id===n.id});if(a&&1!==a.length)throw new Error("Too many links found!!!");var r=a[0],o=r.instance.speed,i=Object.keys(F[t.id]||{}).map(function(e){return F[t.id][e]}).reduce(function(e){return e+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)},0);Object.keys(F[t.id]||{}).forEach(function(n){var a=F[t.id][n];r.itemThroughPut=r.itemThroughPut||{},r.itemThroughPut[n]=r.itemThroughPut[n]||{max:0,actual:0},r.itemThroughPut[n].max=a/(i||1)*o,r.itemThroughPut[n].actual+=a/((e.nodeOut[t.id]||[]).length||1),r.forceOverwritable=!0})}})}),t.forEach(function(e){e.itemsPerMinute={},e.efficiency=1,t.forEach(function(t){(m[t.id]||[]).forEach(function(t){var n=JSON.parse(JSON.stringify(t)).throughput.item;e.itemsPerMinute[n]=F[e.id][n]||0})})}),(s[a]||[]).forEach(function(n){var a=t.map(function(e){return e.id}),r=c[n].map(function(e){return e.id});a.forEach(function(n){r.forEach(function(a){var r=e.graphData.links.filter(function(e){return e.source.id===n&&e.target.id===a}),o=null;if(r&&1===r.length){var i=(o=r[0]).instance.speed,c=Object.keys(F[n]||{}).map(function(e){return F[n][e]}).reduce(function(e){return e+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)},0);Object.keys(F[n]||{}).forEach(function(t){var a=F[n][t];o.itemThroughPut=o.itemThroughPut||{},o.itemThroughPut[t]=o.itemThroughPut[t]||{max:0,actual:0},o.itemThroughPut[t].max=a/c*i,o.itemThroughPut[t].actual+=a/((e.nodeOut[n]||[]).length||1),o.forceOverwritable=!0}),t.forEach(function(t){var r=m[t.id]||[],o={};r.forEach(function(e){var t=e.throughput.item;o[t]=o[t]||[],o[t].push(e)}),Object.keys(o).forEach(function(t){var r=o[t],c=r.map(function(e){return e.calculatedItemPerSecond}).reduce(function(e){return e+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)},0);r.forEach(function(r){var o=JSON.parse(JSON.stringify(r)),l=o.calculatedItemPerSecond/c;o.calculatedItemPerSecond=l/60*(F[n][t]/((e.nodeOut[n]||[]).length||1)),o.calculatedItemPerSecond=Math.min(o.calculatedItemPerSecond,i/60),o.maxItemsPerSecLimiter=o.calculatedItemPerSecond;var s=o;(s.throughput.quantity/s.throughput.time*s.efficiency*s.throughput.overclock*s.throughput.speed||0)<o.calculatedItemPerSecond&&(s.throughput.overclock=1/0),m[a]=m[a]||[],m[a].push(s)})})})}else if(r&&r.length>1)throw new Error("Too many links found!!!")})})})}}(n,a.map(function(e){return c[e]}),t),Object.keys(u).forEach(function(e){u[e].delete(parseInt(t,10))}),p.reheapify()};p.size();)h();Be("efficiency",59,322)},we=function(e,t,n){var a=this,r=this,o=this.graphData.nodes,i=this.graphData.links;this.nodeIn={},this.nodeOut={},i.forEach(function(e){var t=e.source.id,n=e.target.id;a.nodeOut[t]=a.nodeOut[t]||[],a.nodeIn[n]=a.nodeIn[n]||[],a.nodeOut[t].push(e.target),a.nodeIn[n].push(e.source)}),o.forEach(function(e){var t=e.instance.input_slots,n=e.instance.output_slots;e.open_in_slots=t-(r.nodeIn[e.id]||[]).length,e.open_out_slot=n-(r.nodeOut[e.id]||[]).length}),Oe.call(r);var c=A.drag().clickDistance(10).on("start",function(t){(function(e,t,n){n.state&&n.state.shiftHeld?n.setState({mouseDragSource:e}):(A.event.active||t.alphaTarget(.3).restart(),n.setState({wasFixed:null!==e.fx&&null!=e.fy}))}).call(a,t,e,r)}).on("drag",function(e){(function(e,t){t.state&&t.state.shiftHeld?t.dragLine.classed("hidden",!1).attr("d","M"+e.x+","+e.y+"L"+A.mouse(t.svgGroup.node())[0]+","+A.mouse(t.svgGroup.node())[1]):(e.fx=A.event.x,e.fy=A.event.y,t.setState({wasMoved:!0}))}).call(a,e,r)}).on("end",function(t){A.event.sourceEvent.stopImmediatePropagation(),function(e,t,n){t.state&&t.state.shiftHeld?(t.state.mouseOverNode&&(t.state.mouseDragSource,t.state.mouseOverNode,Ce.call(void 0,t,t.state.mouseDragSource,t.state.mouseOverNode)),t.dragLine.classed("hidden",!0).attr("d","M0,0L0,0")):t.state&&t.state.wasMoved?(e.x=e.fx,e.y=e.fy,t.state.snapToGrid&&e.fx&&(e.fx=ae(e.fx,100),e.fy=ae(e.fy,100))):t.state&&!t.state.wasFixed&&(e.fx=null,e.fy=null);A.select("."+ne.graphNodeGrabbedClass).classed(ne.graphNodeGrabbedClass,!1),t.setState({shiftHeld:!1,wasMoved:!1,wasFixed:!1})}.call(this,t,r,e)}),l=t.selectAll(".node-data-class").data(o,function(e){return e.id}),s=l.enter().append("g").classed("node-data-class",!0).attr("id",function(e){return e.id||null}).on("wheel.zoom",function(e){De.call(this,e)}).on("click",function(e){A.event.stopImmediatePropagation(),Me.call(this,e,r)}).on("dblclick",function(e){A.event.stopImmediatePropagation(),Ne(r),e.fx=null,e.fy=null}).on("mouseover",function(e){Re.call(this,e,r)}).on("mouseout",function(e){Ae.call(this,e,r)}).on("mousedown",function(e){Le.call(this,e,r)}).on("mouseup",function(e){Ge.call(this,e,r)}).call(c);l.exit().remove(),s.append("circle").classed(ne.graphNodeClass,!0).attr("cursor","pointer").attr("r",function(e){return 50});qe(s,"efficiency",59,322),Fe(s),Qe(s),Ke(s),Ye.call(r,s),l=s.merge(l);var u=n.selectAll(".link-data-class").data(i,function(e){return e.source.id+"-"+e.target.id}),d=u.enter().append("g").classed("link-data-class",!0),p=(u.exit().remove(),d.append("g").attr("id",function(e){return"path-parent"+e.source.id+"-"+e.target.id}).classed(ne.lineParentObjectClass,!0));p.append("path").classed(ne.lineStylingPathClass,!0).classed(ne.lineStylingFullClass,!0).attr("display","none").attr("stroke","orange").attr("stroke-width",10),p.append("path").classed(ne.lineStylingArrowClass,!0).classed(ne.lineStylingFullClass,!0).attr("display","none").attr("stroke",null).attr("marker-end","url(#highlight-path-arrow-orange)").attr("stroke-width",3),p.append("path").classed(ne.lineObjectClass,!0).attr("stroke",function(e){return A.color("#000000")}).attr("marker-end","url(#default-path-arrow)"),Pe.call(this,p),p.append("path").classed(ne.lineHitboxObjectClass,!0).on("mouseover",function(e){}).on("mouseout",function(e){}).on("click",function(e){Te.call(this,e,r)}),u=d.merge(u),e.nodes(o).on("tick",function(){Se.call(a,l,u,e)}).on("end",function(){console.log("Simulation Ended!")}),e.force("link").links(i),[].forEach(function(e){return e()}),e.alphaTarget(.3).restart()},Ee=function(e){e.setState({selectedPath:null,selectedNode:null}),A.selectAll("."+ne.lineStylingFullClass).attr("display","none"),Ne(e)},Se=function(e,t,n){var a=100*n.alpha();e.attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y}),t.selectAll("line").attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),t.selectAll("path").attr("d",function(e){return"M "+e.source.x+" "+e.source.y+" L "+e.target.x+" "+e.target.y}),Ie.call(this,t),t.selectAll("."+ne.lineObjectClass).each(function(e){e.source.vx+=a,e.target.vx-=a})};function ke(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Oe=function(){var e=this,t=new Set(Object.keys(this.nodeIn));Object.keys(this.nodeOut).forEach(function(e){return t.add(e)});var n=Array.from(t),a={};n.forEach(function(t,r){n[r]=e.graphData.nodes.filter(function(e){return e.id.toString()===t})[0],a[n[r].id]=n[r],n[r].childProvides=[],n[r].hasSources=new Set,n[r].containedItems=[],"Container"!==n[r].machine.name&&"Logistic"!==n[r].machine.name||(n[r].allowedIn=[],n[r].allowedOut=[])});var r={};Object.keys(this.nodeOut).forEach(function(t){var n=e.nodeOut[t];r[t]=new Set(n.map(function(e){return e.id.toString()}))});var o=re(r),i={},c={},l={};o.forEach(function(e,t){i[t]=e,c[t]=e.map(function(e){return a[e]}),e.forEach(function(e){l[e]=t})});var s={};Object.keys(this.nodeOut).forEach(function(t){var n=e.nodeOut[t].map(function(e){return e.id}),a=l[t];s[a]=s[a]||new Set;var r=s[a];n.forEach(function(e){var t=l[e];t!==a&&r.add(t)})});var u={},d={};Object.keys(this.nodeOut).forEach(function(t){var n=e.nodeOut[t].map(function(e){return e.id}),a=l[t];u[a]=u[a]||new Set,d[a]=d[a]||new Set,n.forEach(function(e){var t=l[e];t!==a&&(u[t]||(u[t]=new Set,d[t]=new Set),u[t].add(a),d[t].add(a))})});for(var p=new he(Array.from(new Set([].concat(ke(Object.keys(s)),ke(Object.keys(u))))),function(e,t){return(u[e]||[]).size-(u[t]||[]).size}),m={},f=[],h=function(){var e=p.pop();f.push(e);var t,n,a,r,o,i=c[e],l=Array.from(s[e]||new Set);l.map(function(e){return c[e]});t=i,n=e,a=l,r=[],o=new Set,t.forEach(function(e){"Container"!==e.machine.name&&"Logistic"!==e.machine.name?r.push({item:e.data.recipe,source:n}):(e.childProvides=m[n]||[],e.childProvides.forEach(function(e){o.has(e.source)||(r.push(e),o.add(e.source))}),e.allowedIn=e.childProvides.map(function(e){return e.item.item.id}),e.allowedOut=e.childProvides.map(function(e){return e.item.item.id}),e.containedItems=e.childProvides.map(function(e){return e.item.item}))}),a.forEach(function(e){m[e]||(m[e]=[]),r.forEach(function(t){new Set(m[e].map(function(e){return e.source})).has(t.source)||m[e].push(t)})}),Object.keys(u).forEach(function(t){u[t].delete(parseInt(e,10))}),p.reheapify()};p.size();)h();for(;f.length;){var y=f.pop(),g=c[y],b=Array.from(s[y]||new Set);!function(e,t,n,a){var r=new Set;t.forEach(function(e){return e.forEach(function(e){e.allowedIn.forEach(function(e){return r.add(e)})})}),e.forEach(function(e){"Container"!==e.machine.name&&"Logistic"!==e.machine.name||0===e.allowedIn.length&&0===e.allowedOut.length&&(e.allowedIn=Array.from(r),e.allowedOut=Array.from(r))})}(g,b.map(function(e){return c[e]}))}},Ce=function(e,t,n){var a=(t.allowedIn||[]).length>0||(t.allowedOut||[]).length>0,r=(n.allowedIn||[]).length>0||(n.allowedOut||[]).length>0,o=["Container","Logistic"].includes(t.machine.name),i=["Container","Logistic"].includes(n.machine.name),c=["Logistic"].includes(t.machine.name)&&["Merger"].includes(t.instance.name),l=["Logistic"].includes(n.machine.name)&&["Merger"].includes(n.instance.name),s=n.instance.input_slots===(e.nodeIn[n.id]?e.nodeIn[n.id].length:0);t.instance.output_slots,e.nodeOut[t.id]&&e.nodeOut[t.id].length;console.error(a,r,o,i,s);var u=e.props.parentAccessor.state.path_type.path_type;u.sort(function(e,t){return e.rank-t.rank});var d=u.filter(function(e){return e.rank>=0}),p=d[0],m={source:t,target:n,instance:p,upgradeTypes:d};if(o&&!a||i&&!r||c||l){console.log("Special Handling");var f=t.id,h=n.id,y=e.nodeOut[f]?e.nodeOut[f].length:0,g=e.nodeIn[h]?e.nodeIn[h].length:0;if(y>=t.instance.output_slots||g>=n.instance.input_slots)return void e.updateGraphHelper();0===e.graphData.links.filter(function(t){return t.source.id===m.target.id&&t.target.id===m.source.id&&xe(t,e),t.source.id===m.source.id&&t.target.id===m.target.id||m.source.id===m.target.id}).length&&e.graphData.links.push(m),e.updateGraphHelper()}else{var b=n.allowedIn.filter(function(e){return t.allowedOut.includes(e)}),v=t.id,_=n.id,w=e.nodeOut[v]?e.nodeOut[v].length:0,E=e.nodeIn[_]?e.nodeIn[_].length:0;if(w>=t.instance.output_slots||E>=n.instance.input_slots||b.length<=0)return void e.updateGraphHelper();0===e.graphData.links.filter(function(t){return t.source.id===m.target.id&&t.target.id===m.source.id&&xe(t,e),t.source.id===m.source.id&&t.target.id===m.target.id||m.source.id===m.target.id}).length&&e.graphData.links.push(m),e.updateGraphHelper()}},Te=function(e,t){A.event.stopImmediatePropagation();var n=A.select(this.parentElement);t.state&&t.state.selectedPath&&t.state.selectedPath===e?Ee.call(this,t):(Ee.call(this,t),A.selectAll("."+ne.lineStylingFullClass).attr("display","none"),t.setState({selectedPath:e}),n.selectAll("."+ne.lineStylingFullClass).attr("display","inherit"))},xe=function(e,t){if(-1===t.graphData.links.indexOf(e))throw new Error("d not found in graph links: "+JSON.stringify(e));var n=e.source.id,a=e.target.id;ue(t.nodeOut[n],e.target),ue(t.nodeIn[a],e.source),ue(t.graphData.links,e)},Ie=function(e){e.selectAll("."+ne.nodeVersionTextClass).attr("x",function(e){var t=A.select(A.select(this).node().parentElement.parentElement).select("path").node(),n=t.getTotalLength();return e.point=t.getPointAtLength(n/2),e.point.x}).attr("y",function(e){return e.point.y}),e.selectAll("."+ne.lineLimitedThroughputClass).attr("x",function(e){var t=A.select(A.select(this).node().parentElement.parentElement).select("path").node(),n=t.getTotalLength();return e.point=t.getPointAtLength(n/2),e.point.x-44}).attr("y",function(e){return e.point.y+20*e.tempIndex[A.select(this).attr("data-key")]+15}),e.selectAll("."+ne.lineLimitedThroughputText).attr("x",function(e){var t=A.select(A.select(this).node().parentElement.parentElement).select("path").node(),n=t.getTotalLength();return e.point=t.getPointAtLength(n/2),e.point.x-20}).attr("y",function(e){return e.point.y+20*e.tempIndex[A.select(this).attr("data-key")]+24})},Pe=function(e){var t=e.append("g").attr("class","textLabel");Je(t,0,0);e.append("g").attr("class","resourceThroughput");A.selectAll("."+ne.lineLimitedThroughputText).remove(),A.selectAll("."+ne.lineLimitedThroughputClass).remove(),A.selectAll(".resourceThroughput").each(function(e){var t=A.select(this),n=0;e.tempIndex={},Object.keys(e.itemThroughPut||{}).forEach(function(a){var r=e.itemThroughPut[a];if(e.itemIconLookup){e.tempIndex[a]=n++;var o="LightCoral",i="link-has-problems";e.forceOverwritable&&(o="LightBlue"),r.actual<=r.max&&(o="white",i=null);var c=e.itemIconLookup[a];t.classed("link-has-problems",!1),i&&t.classed("link-has-problems",!0),t.append("svg:image").classed(ne.lineLimitedThroughputClass,!0).attr("xlink:href",function(e){return c}).attr("data-key",a).attr("height",20).attr("width",20),t.append("text").attr("fill","black").attr("class","overclockFont").classed(ne.lineLimitedThroughputText,!0).style("text-anchor","start").style("dominant-baseline","central").attr("stroke","black").attr("stroke-width",4).attr("font-size",20).attr("data-key",a).text(function(e){return Math.round(100*r.actual)/100+"/"+Math.round(100*r.max)/100}),t.append("text").attr("fill",o).attr("class","overclockFont").classed(ne.lineLimitedThroughputText,!0).style("text-anchor","start").style("dominant-baseline","central").attr("font-size",20).attr("data-key",a).text(function(e){return Math.round(100*r.actual)/100+"/"+Math.round(100*r.max)/100})}})})},je=n(168),Me=function(e,t){var n=t.state.selectedNode;Ne(t),n!==e&&(Ee(t),t.setState({selectedNode:e}),A.select(this).classed(ne.graphNodeHoverClass,!0).classed(ne.graphNodeGrabbedClass,!1).classed(ne.selectedNodeClass,!0))},Ne=function(e){A.select("."+ne.selectedNodeClass).classed(ne.selectedNodeClass,!1).classed(ne.graphNodeGrabbedClass,!1),e.setState({selectedNode:null})},Re=function(e,t){t.setState({mouseOverNode:A.select(this).datum()}),A.select(this).classed(ne.graphNodeHoverClass,!0)},Ae=function(e,t){t.setState({mouseOverNode:null}),A.select(this).classed(ne.graphNodeHoverClass,!1)},Le=function(e,t){A.event.shiftKey?t.setState({shiftHeld:!0,sourceId:A.select(this).datum().id}):A.select(this).classed(ne.graphNodeGrabbedClass,!0)},Ge=function(e,t){t.state&&t.state.shiftHeld,t.setState({shiftHeld:!1})},qe=function(e,t,n,a){e.append("path").filter(function(e){return!["Container","Logistic"].includes(e.machine.name)}).attr("class",ne.overclockedArcClass).attr("fill","none").attr("stroke-width",8),Be(t,n,a)},Be=function(e,t,n){A.selectAll("."+ne.overclockedArcClass).attr("d",function(a){return function(e,t,n,a){var r=a+n,o=100*e[t]||0,i=(r-n)/100,c=n;return A.arc().innerRadius(50).outerRadius(50)({startAngle:c/180*Math.PI,endAngle:(i*o+c)/180*Math.PI})}(a,e,t,n)}).attr("stroke",function(t){function n(e){var t,n;return e<50?(t=255,n=Math.round(5.1*e)):(n=255,t=Math.round(510-5.1*e)),"#"+("000000"+(65536*t+256*n+0).toString(16)).slice(-6)}var a=100*(t[e]||0);return console.log(n(a)),n(a)})},Fe=function(e){e.append("svg:image").attr("class",function(e){return e.machine&&e.machine.icon?"machine-icon":"dev-icon"}).attr("xlink:href",function(e){return e.instance&&e.instance.icon?e.instance.icon:e.machine&&e.machine.icon?e.machine.icon:"https://raw.githubusercontent.com/rhocode/rhocode.github.io/master/img/satoolsfactory_icons/Smelter.png"}).attr("x",function(e){return-50}).attr("y",function(e){return-50}).attr("height",100).attr("width",100)},De=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===t){A.event.stopImmediatePropagation();var a=-1;A.event.deltaY<0&&(a=1),e.overclock=e.overclock+a,e.overclock<0?e.overclock=251+e.overclock:e.overclock>250&&(e.overclock=e.overclock-251),ze(A.select(this).select("."+ne.overclockedTextClass))}else e.overclock=t,ze(n)},ze=function(e){e.text(function(e){return e.overclock})},We=function(e){e.text(function(e){return e.instance.machine_version.representation})},He=function(){(function(e){var t=this,n=t.props.parentAccessor.state.recipe.item;e.each(function(e){var a=e.allowedIn.slice();(t.nodeIn[e.id]||[]).map(function(e){return e.allowedOut}).flat(1).forEach(function(e){ue(a,e)});var r=A.select(this);if(r.selectAll("."+ne.nodeRequirementsSubIconClass).remove(),a.length>0){r.append("text").attr("class","fas fa-arrow-left").classed(ne.nodeRequirementsSubIconClass,!0).attr("x",function(e){return 56}).attr("y",function(e){return-28}).attr("height",25).attr("width",25);var o=a.map(function(e){return n.filter(function(t){return e===t.id})[0]});o.length>1&&console.log(o);var i=new Set,c=0;o.forEach(function(e){i.has(e.icon)||(i.add(e.icon),r.append("svg:image").classed(ne.nodeRequirementsSubIconClass,!0).on("mousedown",function(e){A.event.stopImmediatePropagation()}).on("click",function(n){var a=t.graphData.nodes.filter(function(t){return t.id!==n.id&&t.open_out_slot>0&&t.allowedOut.includes(e.id)}),r=t.graphData.nodes.filter(function(e){return e.id===n.id});a.length>0&&Ce(t,a[0],r[0]),A.event.stopImmediatePropagation()}).attr("xlink:href",function(t){return e.icon}).attr("x",function(e){return 86+28*c++}).attr("y",function(e){return-28}).attr("height",25).attr("width",25))})}var l=e.allowedOut.slice();if((t.nodeOut[e.id]||[]).map(function(e){return e.allowedIn}).flat(1).forEach(function(e){ue(l,e)}),l.length>0){r.append("text").attr("class","fas fa-arrow-left").classed(ne.nodeRequirementsSubIconClass,!0).attr("x",function(e){return-83}).attr("y",function(e){return 3}).attr("height",25).attr("width",25);var s=l.map(function(e){return n.filter(function(t){return e===t.id})[0]}),u=new Set,d=0;s.forEach(function(e){u.has(e.icon)||(u.add(e.icon),r.append("svg:image").classed(ne.nodeRequirementsSubIconClass,!0).on("mousedown",function(e){A.event.stopImmediatePropagation()}).on("click",function(n){var a=t.graphData.nodes.filter(function(t){return t.id!==n.id&&t.open_in_slots>0&&t.allowedIn.includes(e.id)}),r=t.graphData.nodes.filter(function(e){return e.id===n.id});a.length>0&&Ce(t,r[0],a[0]),A.event.stopImmediatePropagation()}).attr("xlink:href",function(t){return e.icon}).attr("x",function(e){return-109-28*d++}).attr("y",function(e){return 3}).attr("height",25).attr("width",25))})}})}).call(this,A.selectAll("."+ne.nodeRequirementsIconClass))},Ye=function(e){e.append("g").classed(ne.nodeRequirementsIconClass,!0).each(function(e){e.machine&&["Container","Logistic"].includes(e.machine.name)||A.select(this).append("svg:image").classed(ne.nodeProducesClass,!0).attr("xlink:href",function(e){return e.data.recipe.item.icon}).attr("x",function(e){return-55}).attr("y",function(e){return 18}).attr("height",40).attr("width",40)}),A.selectAll("."+ne.nodeRequirementsIconClass).each(function(e){if(e.machine&&["Container","Logistic"].includes(e.machine.name)){var t=A.select(this);t.selectAll("."+ne.nodeProducesClass).remove();var n=new Set,a=0;(e.containedItems||[]).forEach(function(e,r){n.has(e.icon)||(n.add(e.icon),t.append("svg:image").classed(ne.nodeProducesClass,!0).attr("xlink:href",function(e){return e.containedItems[r].icon}).attr("x",function(e){return-55}).attr("y",function(e){return 18+30*a++}).attr("height",40).attr("width",40))})}}),e.append("g").classed(ne.nodeSurplusIconClass,!0),A.selectAll("."+ne.nodeSurplusIconClass).each(function(e){var t=A.select(this);t.selectAll("."+ne.nodeProducesPerMinText).remove(),t.append("text").attr("fill","white").attr("class","overclockFont").classed(ne.nodeProducesPerMinText,!0).style("text-anchor","end").style("dominant-baseline","central").attr("stroke","black").attr("stroke-width",4).attr("x",-5).attr("y",-37).attr("font-size",30).text(function(e){var t=0;return Object.keys(e.itemsPerMinute||{}).forEach(function(n){t+=e.itemsPerMinute[n]}),(Math.round(100*t)/100||0)+"/m"}),t.append("text").attr("fill","white").attr("class","overclockFont").classed(ne.nodeProducesPerMinText,!0).style("text-anchor","end").style("dominant-baseline","central").attr("x",-5).attr("y",-37).attr("font-size",30).text(function(e){var t=0;return Object.keys(e.itemsPerMinute||{}).forEach(function(n){t+=e.itemsPerMinute[n]}),(Math.round(100*t)/100||0)+"/m"})});e.append("g").classed(ne.nodeLimitingThroughputClass,!0);A.selectAll("."+ne.nodeLimitingThroughputClass).each(function(e){var t=A.select(this);t.selectAll("."+ne.nodeLimitingThroughputText).remove(),Object.keys(e.itemThroughPut||{}).forEach(function(n,a){var r=e.itemThroughPut[n];if(e.itemIconLookup){var o="LightCoral",i="node-has-problems";r.actual===r.max?(o="white",i=null):r.actual<r.max&&(o="gold");var c=e.itemIconLookup[n];t.classed("node-has-problems",!1),i&&t.classed("node-has-problems",!0),t.append("svg:image").classed(ne.nodeLimitingThroughputText,!0).attr("xlink:href",function(e){return c}).attr("x",-14).attr("y",59+20*a).attr("height",20).attr("width",20),t.append("text").attr("fill","black").attr("class","overclockFont").classed(ne.nodeLimitingThroughputText,!0).style("text-anchor","start").style("dominant-baseline","central").attr("stroke","black").attr("stroke-width",4).attr("x",10).attr("y",68+20*a).attr("font-size",20).text(function(e){return Math.round(100*r.actual)/100+"/"+Math.round(100*r.max)/100}),t.append("text").attr("fill",o).attr("class","overclockFont").classed(ne.nodeLimitingThroughputText,!0).style("text-anchor","start").style("dominant-baseline","central").attr("x",10).attr("y",68+20*a).attr("font-size",20).text(function(e){return Math.round(100*r.actual)/100+"/"+Math.round(100*r.max)/100})}})}),He.call(this)},Je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:35,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:35;e.selectAll("."+ne.nodeVersionTextClass).remove();var a=e.append("text").attr("fill","white").attr("class","overclockFont").classed(ne.nodeVersionTextClass,!0).style("text-anchor","middle").style("dominant-baseline","central").attr("stroke","black").attr("stroke-width",4).attr("x",t).attr("y",n).attr("font-size",30);We(a);var r=e.append("text").attr("fill","white").attr("class","overclockFont").classed(ne.nodeVersionTextClass,!0).style("text-anchor","middle").style("dominant-baseline","central").attr("x",t).attr("y",n).attr("font-size",30);We(r)},Ke=function(e){var t=e.append("g").attr("id",function(e){return"node-level-accessor-"+e.id});Je(t)},Qe=function(e){var t=e.filter(function(e){return!["Container","Logistic"].includes(e.machine.name)}).append("g").attr("text-anchor","middle").attr("dy",0);t.append("circle").attr("r",17).attr("fill","#FFFFFF").attr("cx",32).attr("cy",-38).attr("stroke","black").attr("stroke-width",1);var n=t.append("text").attr("fill","black").attr("class","overclockFont").classed(ne.overclockedTextClass,!0).attr("x",32).attr("dy",-32).attr("font-size",20).attr("id",function(e){return"node-overclock-accessor-"+e.id});ze(n)},Ue=function(e,t){if(!(document.activeElement&&"INPUT"===document.activeElement.nodeName||t.state.pressedKey))switch(t.setState({pressedKey:A.event.keyCode}),A.event.keyCode){case ne.BACKSPACE_KEY:case ne.DELETE_KEY:t.state.selectedPath?(xe.call(this,t.state.selectedPath,t),t.setState({selectedPath:null}),t.updateGraphHelper()):t.state.selectedNode&&(function(e,t){var n=t.state.selectedNode;Ne(t),t.graphData.links.filter(function(e){return e.source.id===n.id||e.target.id===n.id}).map(function(e){xe(e,t)}),ue(t.graphData.nodes,n)}.call(this,e,t),t.setState({selectedNode:null}),t.updateGraphHelper())}},Ze=function(e){return e.attr("viewBox","0 -5 10 10").attr("markerWidth",10).attr("markerHeight",10).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5")};function Ve(e){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function $e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var at=function(e){function t(e){var n,a,r,o,i,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=et(t).call(this,e),n=!r||"object"!==Ve(r)&&"function"!=typeof r?tt(a):r,o=tt(n),c=function(){_e.call(tt(n)),n.updateGraphHelper()},(i="analyze")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,n.state={snapToGrid:!1},n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nt(e,t)}(t,a["Component"]),n=t,i=[{key:"inflateGraphData",value:function(e){return Object(oe.a)(ce.a.inflate(se.a.atob(e),{to:"string"}))}}],(o=[{key:"addNode",value:function(e){!function(e,t){var n=Object(je.b)(A.select("#svgGroup").attr("transform"));console.error(n);var a=[],r=document.getElementById("mainRender"),o=r.clientWidth,i=r.clientHeight;a[0]=o/n.scaleX*.5-n.translateX/n.scaleX,a[1]=i/n.scaleY*.5-n.translateY/n.scaleY,e.id=e.id||t.id++,e.x=e.x||0,e.y=e.y||0,e.fx=a[0],e.fy=a[1],console.error(a),e.overclock=e.overclock||100,console.log(JSON.stringify(e)),t.graphData.nodes.push(e),t.updateGraphHelper()}(e,this),console.log(JSON.stringify(e))}},{key:"resetCamera",value:function(){this.inputSvg.transition().duration(750).call(this.zoom_handler.transform,A.zoomIdentity),this.updateGraphHelper()}},{key:"jiggle",value:function(){this.graphData.nodes.forEach(function(e){e.x=0,e.y=0}),this.updateGraphHelper()}},{key:"fixNodes",value:function(){this.graphData.nodes.forEach(function(e){e.fx=e.x,e.fy=e.y}),this.updateGraphHelper()}},{key:"unfixNodes",value:function(){this.graphData.nodes.forEach(function(e){e.fx=null,e.fy=null,e.vx=0,e.vy=0}),this.updateGraphHelper()}},{key:"createGraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.graphData={nodes:t,links:n},this.id=Math.max.apply(Math,Xe(this.graphData.nodes.map(function(e){return e.id})))+1,this.id===Number.NEGATIVE_INFINITY&&(this.id=0),this.inputSvg=e,this.svgGroup=e.append("g").attr("class","objects").attr("id","svgGroup");var a=this.svgGroup,r=this;e.on("click",function(e){Ee.call(this,r)}),A.select(window).on("keydown",function(e){Ue.call(this,e,r)}).on("keyup",function(e){(function(e,t){t.setState({pressedKey:null})}).call(this,e,r)}),this.zoom_handler=A.zoom().on("zoom",function(){return function(e){e.attr("transform",A.event.transform)}(a)}).scaleExtent([.1,6]),this.zoom_handler(e),e.on("dblclick.zoom",null);var o=a.append("defs");Ze(o.append("svg:marker").attr("id","default-path-arrow").attr("refX",35)),Ze(o.append("svg:marker").attr("id","highlight-path-arrow-orange").attr("fill","orange").attr("refX",24)),Ze(o.append("svg:marker").attr("id","dragged-end-arrow").attr("refX",7));var i=o.append("filter").attr("id","drop-shadow").attr("height","130%").attr("width","130%").attr("filterUnits","userSpaceOnUse");i.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",5).attr("result","blur"),i.append("feOffset").attr("in","blur").attr("result","offsetBlur"),i.append("feFlood").attr("in","offsetBlur").attr("flood-color","white").attr("flood-opacity","1").attr("result","offsetColor"),i.append("feComposite").attr("in","offsetColor").attr("in2","offsetBlur").attr("operator","in").attr("result","offsetBlur");var c=i.append("feMerge");c.append("feMergeNode").attr("in","offsetBlur"),c.append("feMergeNode").attr("in","SourceGraphic"),this.dragLine=a.append("g").append("svg:path").attr("class","link dragline line-object hidden").attr("d","M0,0L0,0").attr("stroke",function(e){return A.color("#000000")}).style("marker-end","url(#dragged-end-arrow)");var l,s,u,d=a.append("g").attr("class","links-g-group"),p=a.append("g").attr("class","nodes-g-group"),m=(l=document.getElementById("mainRender"),s=l.clientWidth,u=l.clientHeight,A.forceSimulation().force("link",A.forceLink().id(function(e){return e.id}).distance(60)).force("charge",A.forceManyBody().strength(20)).force("collision",A.forceCollide().radius(function(e){return 120})).force("xAxis",A.forceX().strength(.1).x(function(e){return e.initialX||s/2})).force("yAxis",A.forceY().strength(.5).y(function(e){return e.initialY||u/2})));this.graphNodesGroup=p,this.graphLinksGroup=d,this.simulation=m,this.updateGraphHelper()}},{key:"updateGraphHelper",value:function(){we.call(this,this.simulation,this.graphNodesGroup,this.graphLinksGroup)}},{key:"clearGraphDataRaw",value:function(){var e=A.select(A.select("#mainRender").node().parentElement);return A.select("#mainRender").selectAll("*").remove(),A.select("#mainRender").remove(),e.append("svg").attr("id","mainRender")}},{key:"clearGraphData",value:function(e){Ee.call(this,e);var t=this.clearGraphDataRaw();this.createGraph(t)}},{key:"loadGraphData",value:function(e){var t=this.clearGraphDataRaw();this.createGraph(t,e.graphData.nodes,e.graphData.links)}},{key:"compressGraphData",value:function(){var e={satisgraphtory:{version:.01},graphData:this.graphData,playerData:{},secret:{}};return se.a.btoa(ce.a.deflate(Object(oe.b)(e),{to:"string"}))}},{key:"uploadDataWithResponse",value:function(){return function(e){return new Promise(function(t,n){return fetch("https://api.myjson.com/bins/",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){if(e.uri){var n=e.uri.replace("https://api.myjson.com/bins//","");return console.log(e.uri),console.log(n),console.log(encodeURIComponent(se.a.btoa(n))),t(encodeURIComponent(se.a.btoa(n)))}throw new Error("Invalid save")}).catch(function(e){console.log("Fetch error:",e.message),n(e)})})}({data:this.compressGraphData()})}},{key:"componentDidMount",value:function(){this.loadGraphData(this.props.parentAccessor.state.coreGraphData),this.analyze()}},{key:"componentDidUpdate",value:function(e,t,n){this.state.selectedPath===t.selectedPath&&this.state.selectedNode===t.selectedNode||this.props.parentAccessor.setState({selectedPath:this.state.selectedPath,selectedNode:this.state.selectedNode})}},{key:"render",value:function(){return r.a.createElement("svg",{id:"mainRender"})}}])&&$e(n.prototype,o),i&&$e(n,i),t}(),rt=(n(203),n(76)),ot=n.n(rt),it=n(34),ct=n.n(it),lt=n(135),st=n.n(lt),ut=n(68),dt=n.n(ut),pt=n(210),mt=n.n(pt),ft=n(69),ht=n.n(ft),yt=n(65),gt=n.n(yt),bt=n(44);function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function wt(e,t){return!t||"object"!==vt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Et(e){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function St(e,t){return(St=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=wt(this,Et(t).call(this,e))).windowOnClobber=null,n.clobberList=[],n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&St(e,t)}(t,r.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){this.windowOnClobber=A.select(this.props.clobberedElement).on("click"),A.select(this.props.clobberedElement).on("click",this.props.onClickAway);var e=!0,t=!1,n=void 0;try{for(var a,r=document.querySelectorAll("*")[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var o=a.value;this.clobberList.push(o),o.addEventListener("click",this.props.onClickAway,!0)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"componentWillUnmount",value:function(){A.select(this.props.clobberedElement).on("click",this.windowOnClobber);var e=!0,t=!1,n=void 0;try{for(var a,r=this.clobberList[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){a.value.removeEventListener("click",this.props.onClickAway,!0)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}this.clobberList=[]}},{key:"render",value:function(){var e=this.props.onClickAway;return r.a.createElement(bt.a,{onClickAway:e},this.props.children)}}])&&_t(n.prototype,a),o&&_t(n,o),t}();kt.propTypes={classes:l.a.object.isRequired,clobberedElement:l.a.string.isRequired,onClickAway:l.a.func.isRequired,children:l.a.object.isRequired};var Ot=Object(s.withStyles)(function(e){return{}})(kt);function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tt(){return(Tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function xt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function It(e){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jt(e,t){return(jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nt=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=It(t).call(this,e),n=!r||"object"!==Ct(r)&&"function"!=typeof r?Pt(a):r,Mt(Pt(n),"handleMenu",function(e){n.setState({anchorEl:e.currentTarget})}),Mt(Pt(n),"handleClose",function(e){n.setState({anchorEl:null})}),Mt(Pt(n),"clickAwayClose",function(e){n.state.anchorEl&&n.setState({anchorEl:null})}),n.state={anchorEl:null},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jt(e,t)}(t,r.a.Component),n=t,(a=[{key:"listItems",value:function(e,t,n){var a=this;return this.props.items.map(function(t){return r.a.createElement(mt.a,{key:t.id,className:e.tooltip,placement:"right",title:t.inputs.map(function(t,n){return r.a.createElement(r.a.Fragment,{key:t.item.id},r.a.createElement("img",{src:t.item.icon,className:0===n?e.tooltipIconFirst:e.tooltipIcon}),r.a.createElement("div",{className:e.tooltipText},t.quantity))})},r.a.createElement(ot.a,{onClick:function(){var e=n.state.machine_node.machine_node;e.sort(function(e,t){return e.rank-t.rank});var r=e.filter(function(e){return e.machine_class.id===t.machine_class.id}),o=r[0];n.graphSvg.addNode({data:{recipe:t},machine:t.machine_class,allowedIn:t.inputs.map(function(e){return e.item.id}),allowedOut:[t.item.id],instance:o,upgradeTypes:r}),a.handleClose()}},r.a.createElement("img",{alt:"probably some goat image",src:t.item.icon,className:e.itemListIcon}),t.name,r.a.createElement("div",{className:e.grow})))})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.label,o=t.appObject,i=this.state.anchorEl,c=Boolean(i),l=this.listItems(n,a,o);return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement(ct.a,{className:n.paper},r.a.createElement(R.a,{"aria-owns":c?"menu-appbar":null,"aria-haspopup":"true",onClick:c?this.handleClose:this.handleMenu,className:n.button},r.a.createElement(st.a,null),r.a.createElement("div",{className:n.label},a)),r.a.createElement(dt.a,{className:n.popper,open:c,anchorEl:i,transition:!0,placement:"right-start"},function(t){var n=t.TransitionProps,a=t.placement;return r.a.createElement(gt.a,Tt({},n,{id:"menu-list-grow",style:{transformOrigin:"bottom"===a?"center top":"center bottom"}}),r.a.createElement(ct.a,null,r.a.createElement(Ot,{onClickAway:e.clickAwayClose,clobberedElement:"#mainRender"},r.a.createElement(ht.a,null,l))))})))}}])&&xt(n.prototype,a),o&&xt(n,o),t}(),Rt=Object(s.withStyles)(function(e){return{root:{},button:{flex:"0 0 100%",justifyContent:"left",padding:10},paper:{margin:2*e.spacing.unit,display:"flex"},label:{paddingLeft:10},popper:{zIndex:1200,left:"13px !important"},itemListIcon:{height:24,width:24,paddingRight:15},tooltip:{},tooltipIcon:{height:40,display:"inline-block",paddingLeft:10},tooltipIconFirst:{height:40,display:"inline-block"},tooltipText:{fontSize:18,display:"inline-block"}}})(Nt),At=n(215),Lt=n.n(At),Gt=n(395),qt=n.n(Gt),Bt=n(211),Ft=n.n(Bt),Dt=n(214),zt=n.n(Dt),Wt=n(213),Ht=n.n(Wt),Yt=n(212),Jt=n.n(Yt);function Kt(e){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ut(e,t){return!t||"object"!==Kt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vt(e,t){return(Vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xt=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ut(this,Zt(t).call(this,e))}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vt(e,t)}(t,r.a.Component),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.title,a=(e.contents,e.open),o=e.handleModalClose,i=e.children;return r.a.createElement(Ft.a,{className:t.modal,open:Boolean(a),onClose:o,id:"modal"},r.a.createElement(Jt.a,null,n),r.a.createElement(Ht.a,null,i),r.a.createElement(zt.a,null,r.a.createElement(R.a,{onClick:o,color:"secondary"},"Close")))}}])&&Qt(n.prototype,a),o&&Qt(n,o),t}(),$t=Object(s.withStyles)(function(e){return{root:{}}})(Xt),en=n(132),tn=n.n(en),nn=n(131),an=n.n(nn);function rn(e){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function on(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function cn(e){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ln(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sn(e,t){return(sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var un=function(e){function t(e){var n,a,r,o,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=cn(t).call(this,e),n=!r||"object"!==rn(r)&&"function"!=typeof r?ln(a):r,o=ln(n),c=function(e){n.setState({dontShow:e.target.checked}),e.target.checked?window.localStorage.setItem("dontShowAgain","1"):window.localStorage.setItem("dontShowAgain","0")},(i="handleDontShow")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c;var l=!1,s=!1;return"1"===window.localStorage.getItem("dontShowAgain")?(window.localStorage.setItem("dontShowAgain","1"),s=!0):(window.localStorage.setItem("dontShowAgain","0"),s=!1),s||(l=!0),n.state={modalOpen:l,dontShow:s},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sn(e,t)}(t,r.a.Component),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=(t.title,this.props.children);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Lt.a,{id:"helpFab","aria-label":"help",color:"secondary",className:n.fab,onClick:function(){return e.setState({modalOpen:!0})}},r.a.createElement(qt.a,null)),r.a.createElement($t,{title:"",open:this.state.modalOpen,handleModalClose:function(){return e.setState({modalOpen:!1})}},a,r.a.createElement(an.a,{control:r.a.createElement(tn.a,{checked:this.state.dontShow,onChange:this.handleDontShow,value:"checkedA"}),label:"Don't show this message again"})))}}])&&on(n.prototype,a),o&&on(n,o),t}(),dn=Object(s.withStyles)(function(e){return{fab:{position:"absolute",bottom:2*e.spacing.unit,right:2*e.spacing.unit}}})(un),pn=n(164),mn=n.n(pn),fn=n(217),hn=n.n(fn),yn=n(216),gn=n.n(yn);function bn(e){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _n(e,t){return!t||"object"!==bn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wn(e){return(wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function En(e,t){return(En=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Sn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=_n(this,wn(t).call(this,e))).state={modalOpen:!1},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&En(e,t)}(t,r.a.Component),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.Icon,o=t.label,i=t.title;t.contents;return r.a.createElement(r.a.Fragment,null,r.a.createElement(mn.a,{button:!0,key:o,onClick:function(){return e.setState({modalOpen:!0})}},r.a.createElement(gn.a,{className:n.icons},r.a.createElement(a,null)),r.a.createElement(hn.a,{primary:o})),r.a.createElement($t,{title:i,open:this.state.modalOpen,handleModalClose:function(){return e.setState({modalOpen:!1})}},this.props.children))}}])&&vn(n.prototype,a),o&&vn(n,o),t}(),kn=Object(s.withStyles)(function(e){return{icons:{marginRight:0}}})(Sn);function On(e){return(On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cn(){return(Cn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Tn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function xn(e){return(xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function In(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pn(e,t){return(Pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mn=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=xn(t).call(this,e),n=!r||"object"!==On(r)&&"function"!=typeof r?In(a):r,jn(In(n),"handleMenu",function(e){e.currentTarget!==n.state.lastTarget&&n.setState({anchorEl:e.currentTarget,selectedButton:e.currentTarget.id})}),jn(In(n),"handleClose",function(e){n.setState({anchorEl:null,lastTarget:n.state.anchorEl,selectedButton:null},function(){return new Promise(function(e){return setTimeout(e,100)}).then(function(){return n.setState({lastTarget:null})})})}),n.state={anchorEl:null},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pn(e,t)}(t,r.a.Component),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.resource,o=t.appObject,i=this.state.anchorEl,c=a.item.icon,l=a.item.name,s=a.purities,u=a.machine_class.icon,d=Boolean(i);return r.a.createElement(r.a.Fragment,{key:l},r.a.createElement(ot.a,{"aria-owns":d?"menu-appbar":null,"aria-haspopup":"true",onClick:d?this.handleClose:this.handleMenu,selected:this.state.selectedButton===l,id:l},r.a.createElement("img",{src:c,className:n.itemListIcon}),l),r.a.createElement(dt.a,{className:n.popper,open:d,anchorEl:i,transition:!0,placement:"right-start"},function(t){var i=t.TransitionProps,c=t.placement;return r.a.createElement(gt.a,Cn({},i,{id:"menu-list-grow",style:{transformOrigin:"bottom"===c?"center top":"center bottom"}}),r.a.createElement(ct.a,null,r.a.createElement(Ot,{onClickAway:e.handleClose,clobberedElement:"#mainRender"},r.a.createElement(ht.a,null,s.map(function(t){return r.a.createElement(ot.a,{onClick:function(){var n=o.state.machine_node.machine_node;n.sort(function(e,t){return e.rank-t.rank});var r=n.filter(function(e){return e.machine_class.id===a.machine_class.id}),i=r[0];console.log("YES, ITS TRIGGERED",t.name),o.graphSvg.addNode({data:{machine:a,node:t,recipe:a,purity:t.name},machine:a.machine_class,allowedIn:[],allowedOut:[a.item.id],instance:i,upgradeTypes:r}),e.handleClose()},key:l+t.name},r.a.createElement("img",{src:u,className:n.itemListIcon}),t.name)})))))}))}}])&&Tn(n.prototype,a),o&&Tn(n,o),t}(),Nn=Object(s.withStyles)(function(e){return{root:{},paper:{margin:2*e.spacing.unit,display:"flex"},label:{paddingLeft:10},popper:{zIndex:1200,left:"13px !important"},itemListIcon:{height:24,width:24,paddingRight:15}}})(Mn),Rn=n(163),An=n.n(Rn);function Ln(e){return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gn(){return(Gn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function qn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Bn(e){return(Bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dn(e,t){return(Dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wn=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=Bn(t).call(this,e),n=!r||"object"!==Ln(r)&&"function"!=typeof r?Fn(a):r,zn(Fn(n),"handleMenu",function(e){e.currentTarget!==n.state.lastTarget&&n.setState({anchorEl:e.currentTarget})}),zn(Fn(n),"handleClose",function(){n.setState({anchorEl:null,lastTarget:n.state.anchorEl},function(){return new Promise(function(e){return setTimeout(e,100)}).then(function(){return n.setState({lastTarget:null})})})}),n.state={anchorEl:null},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dn(e,t)}(t,r.a.Component),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.listItems,o=t.label,i=t.appObject,c=this.state.anchorEl,l=Boolean(c);return r.a.createElement(r.a.Fragment,{key:o},r.a.createElement(ct.a,{className:n.paper},r.a.createElement(R.a,{"aria-owns":l?"menu-appbar":null,"aria-haspopup":"true",onClick:l?this.handleClose:this.handleMenu,className:n.button},r.a.createElement(st.a,null),r.a.createElement("div",{className:n.label},o)),r.a.createElement(dt.a,{className:n.popper,open:l,anchorEl:c,transition:!0,placement:"right-start"},function(t){var n=t.TransitionProps,o=t.placement;return r.a.createElement(gt.a,Gn({},n,{id:"menu-list-grow",style:{transformOrigin:"bottom"===o?"center top":"center bottom"}}),r.a.createElement(ct.a,null,r.a.createElement(An.a,{onClickAway:e.handleClose},r.a.createElement(ht.a,null,Object.keys(a).map(function(e){var t=[];return["Miner"].includes(e)&&a[e].forEach(function(e){t.push(r.a.createElement(Nn,{appObject:i,resource:e}))}),t})))))})))}}])&&qn(n.prototype,a),o&&qn(n,o),t}(),Hn=Object(s.withStyles)(function(e){return{root:{},button:{flex:"0 0 100%",justifyContent:"left",padding:10},paper:{margin:2*e.spacing.unit,display:"flex"},label:{paddingLeft:10},popper:{zIndex:1200,left:"13px !important"},itemListIcon:{height:24,width:24,paddingRight:15}}})(Wn);function Yn(e){return(Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jn(){return(Jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Kn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Qn(e){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Un(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zn(e,t){return(Zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xn=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=Qn(t).call(this,e),n=!r||"object"!==Yn(r)&&"function"!=typeof r?Un(a):r,Vn(Un(n),"handleMenu",function(e){e.currentTarget!==n.state.lastTarget&&n.setState({anchorEl:e.currentTarget})}),Vn(Un(n),"handleClose",function(){n.setState({anchorEl:null,lastTarget:n.state.anchorEl},function(){return new Promise(function(e){return setTimeout(e,100)}).then(function(){return n.setState({lastTarget:null})})})}),n.state={anchorEl:null},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zn(e,t)}(t,r.a.Component),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.listItems,o=(t.label,t.appObject),i=this.state.anchorEl,c=Boolean(i);return r.a.createElement(ct.a,{className:n.paper},r.a.createElement(R.a,{"aria-owns":c?"menu-appbar":null,"aria-haspopup":"true",onClick:c?this.handleClose:this.handleMenu,className:n.button},r.a.createElement(st.a,null),r.a.createElement("div",{className:n.label},"Logistics")),r.a.createElement(dt.a,{className:n.popper,open:c,anchorEl:i,transition:!0,placement:"right-start"},function(t){var i=t.TransitionProps,c=t.placement;return r.a.createElement(gt.a,Jn({},i,{id:"menu-list-grow",style:{transformOrigin:"bottom"===c?"center top":"center bottom"}}),r.a.createElement(ct.a,null,r.a.createElement(Ot,{onClickAway:e.handleClose,clobberedElement:"#mainRender"},r.a.createElement(ht.a,null,Object.keys(a).map(function(t){var i=[];return["Miner","Logistic"].includes(t)||a[t].forEach(function(t){i.push(r.a.createElement(ot.a,{onClick:function(){var n=o.state.machine_node.machine_node;n.sort(function(e,t){return e.rank-t.rank});var a=n.filter(function(e){return e.machine_class.id===t.machine_class.id}),r=a[0];o.graphSvg.addNode({data:{recipe:t},machine:t.machine_class,allowedIn:[],allowedOut:[],instance:r,upgradeTypes:a}),e.handleClose()},key:t.machine_class.name+t.machine_class.id},r.a.createElement("img",{src:t.machine_class.icon,className:n.itemListIcon}),t.machine_class.name))}),["Logistic"].includes(t)&&a[t].forEach(function(t){i.push(r.a.createElement(ot.a,{onClick:function(){var n=o.state.machine_node.machine_node;n.sort(function(e,t){return e.rank-t.rank});var a=n.filter(function(e){return e.machine_class.id===t.machine_class.id&&t.name===e.name}),r=a[0];o.graphSvg.addNode({data:{recipe:t},machine:t.machine_class,allowedIn:[],allowedOut:[],instance:r,upgradeTypes:a}),e.handleClose()},key:t.name},r.a.createElement("img",{src:t.icon,className:n.itemListIcon}),t.name))}),i})))))}))}}])&&Kn(n.prototype,a),o&&Kn(n,o),t}(),$n=Object(s.withStyles)(function(e){return{root:{},button:{flex:"0 0 100%",justifyContent:"left",padding:10},paper:{margin:2*e.spacing.unit,display:"flex"},label:{paddingLeft:10},popper:{zIndex:1200,left:"13px !important"},itemListIcon:{height:24,width:24,paddingRight:15}}})(Xn),ea=n(396),ta=n.n(ea),na=n(290),aa=n.n(na),ra=n(397),oa=n.n(ra);function ia(e){return(ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ca(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function la(e){return(la=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ua(e,t){return(ua=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var da=function(e){function t(e){var n,a,r,o,i,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=la(t).call(this,e),n=!r||"object"!==ia(r)&&"function"!=typeof r?sa(a):r,o=sa(n),c=function(e){console.log(e.currentTarget);for(var t=e.currentTarget.parentElement.children,a=[],r=0,o=t.length;r<o;r+=1)t[r].getAttribute("value")===e.currentTarget.getAttribute("value")?-1===n.state.selectedDrives.indexOf(t[r].getAttribute("value"))&&a.push(t[r].getAttribute("value")):t[r].querySelector("input").checked&&a.push(t[r].getAttribute("value"));n.setState({selectedDrives:a})},(i="handleChangeMultiple")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,n.state={playerUnlock:n.props.playerUnlock.player_unlock,recipe:n.props.playerUnlock.recipe,selectedDrives:[]},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ua(e,t)}(t,r.a.Component),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.parentState;e.playerUnlock;return r.a.createElement(ct.a,{className:t.paper},r.a.createElement(v.a,{variant:"h5"},"Settings"),me("stg")?r.a.createElement(an.a,{control:r.a.createElement(tn.a,{checked:n.graphSvg&&n.graphSvg.state.snapToGrid,onChange:function(){n.graphSvg.setState({snapToGrid:!n.graphSvg.state.snapToGrid})},value:"snapToGrid"}),label:"Snap To Grid"}):null,r.a.createElement(R.a,{className:t.button,fullWidth:!0,onClick:function(){n.graphSvg.jiggle()}},r.a.createElement(ta.a,null),r.a.createElement("div",{className:t.label},"Rejiggle Graph")),r.a.createElement(R.a,{className:t.button,fullWidth:!0,onClick:function(){n.graphSvg.resetCamera()}},r.a.createElement(aa.a,null),r.a.createElement("div",{className:t.label},"Reset Camera")),r.a.createElement(R.a,{className:t.button,fullWidth:!0,onClick:function(){n.graphSvg.fixNodes()}},r.a.createElement(aa.a,null),r.a.createElement("div",{className:t.label},"Fix Nodes")),r.a.createElement(R.a,{className:t.button,fullWidth:!0,onClick:function(){n.graphSvg.unfixNodes()}},r.a.createElement(oa.a,null),r.a.createElement("div",{className:t.label},"Unfix Nodes")))}}])&&ca(n.prototype,a),o&&ca(n,o),t}(),pa=Object(s.withStyles)(function(e){return{root:{},paper:{margin:16,padding:12,display:"flex",flexDirection:"column",flexShrink:0},textField:{paddingBottom:10},button:{flex:1,marginTop:10},label:{paddingLeft:10},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:e.spacing.unit/4},tooltip:{},tooltipIcon:{height:40,display:"inline-block",paddingLeft:10},tooltipIconFirst:{height:40,display:"inline-block"},tooltipText:{fontSize:18,display:"inline-block"}}})(da),ma=n(291),fa=n.n(ma);function ha(e){return(ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ya(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ga(e){return(ga=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ba(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function va(e,t){return(va=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wa=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=ga(t).call(this,e),n=!r||"object"!==ha(r)&&"function"!=typeof r?ba(a):r,_a(ba(n),"handleModalClose",function(){return n.setState({modalOpen:!1})}),_a(ba(n),"handleModalOpen",function(){return n.setState({modalOpen:!0})}),n.state={modalOpen:!1},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&va(e,t)}(t,r.a.Component),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=(t.label,t.title,t.children,t.onClick);return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{color:"inherit",onClick:a||this.handleModalOpen},r.a.createElement(fa.a,null),r.a.createElement("div",{className:n.label},"Clear")),r.a.createElement($t,{title:"Clear Graph?",open:this.state.modalOpen,handleModalClose:this.handleModalClose},r.a.createElement("div",{className:n.dialogContainer},r.a.createElement(v.a,{variant:"h5"},"Are you sure you want to clear everything?"),r.a.createElement(R.a,{color:"secondary",variant:"outlined",className:"".concat(n.dialogButton),onClick:function(){e.props.t.graphSvg.clearGraphData(e.props.t),e.handleModalClose()}},r.a.createElement(fa.a,null),r.a.createElement("div",{className:n.label},"Yes, I'm sure!")))))}}])&&ya(n.prototype,a),o&&ya(n,o),t}(),Ea=Object(s.withStyles)(function(e){return{label:{paddingLeft:10},dialogContainer:{display:"flex",flexDirection:"column"}}})(wa),Sa=n(398),ka=n.n(Sa),Oa=n(399),Ca=n.n(Oa),Ta=n(134),xa=n.n(Ta);function Ia(e){return(Ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pa(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ja(e){return(ja=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ma(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Na(e,t){return(Na=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ra(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Aa=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=ja(t).call(this,e),n=!r||"object"!==Ia(r)&&"function"!=typeof r?Ma(a):r,Ra(Ma(n),"handleModalClose",function(){return n.setState({modalOpen:!1})}),Ra(Ma(n),"handleModalOpen",function(){return n.setState({modalOpen:!0})}),n.state={modalOpen:!1,value:!0},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Na(e,t)}(t,r.a.Component),n=t,(a=[{key:"componentDidUpdate",value:function(e,t,n){var a=this;!t.modalOpen&&this.state.modalOpen&&this.setState({value:"Loading..."},function(){a.props.t.graphSvg.uploadDataWithResponse().then(function(e){var t,n=window.location.port?":"+window.location.port:"",r=window.location.protocol+window.location.hostname+n+window.location.pathname+"#"+e+(t={},window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,n,a){t[n]=a}),Object.keys(t).length?"?"+Object.keys(t).map(function(e){return e+"="+t[e]}).join("&"):"");a.setState({value:r})})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.onClick,o=this.state.value;return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{color:"inherit",onClick:a||this.handleModalOpen},r.a.createElement(ka.a,null),r.a.createElement("div",{className:n.label},"Share")),r.a.createElement($t,{title:"Share Code",open:this.state.modalOpen,handleModalClose:this.handleModalClose},r.a.createElement("div",{className:n.dialogContainer},r.a.createElement("div",null,r.a.createElement(xa.a,{inputRef:function(t){return e.inputRef=t},label:"Share Code",value:o}),r.a.createElement(R.a,{color:"inherit",className:n.inlineDialogButton,onClick:function(){return new Promise(function(t){e.inputRef.select(),document.execCommand("copy"),t(!0)}).then(function(t){e.setState({statusMessage:"Copied!"},function(){setTimeout(function(){e.setState({statusMessage:""})},3e3)})})}},r.a.createElement(Ca.a,null),r.a.createElement("div",{className:n.label},"Copy"))),me(r.a.createElement(R.a,{color:"inherit",className:n.dialogButton,fullWidth:!0},r.a.createElement("div",{className:n.label},"Generate Image"))),r.a.createElement("div",{className:n.statusMessage},this.state.statusMessage))))}}])&&Pa(n.prototype,a),o&&Pa(n,o),t}(),La=Object(s.withStyles)(function(e){return{label:{paddingLeft:10},dialogContainer:{display:"flex",flexDirection:"column"},inlineDialogButton:{paddingTop:10,paddingBottom:10},dialogButton:{marginTop:10},statusMessage:{display:"flex",flexDirection:"column"}}})(Aa),Ga=n(292),qa=n.n(Ga);function Ba(e){return(Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fa(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Da(e){return(Da=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function za(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wa(e,t){return(Wa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ha(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ya=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=Da(t).call(this,e),n=!r||"object"!==Ba(r)&&"function"!=typeof r?za(a):r,Ha(za(n),"handleModalClose",function(){return n.setState({modalOpen:!1})}),Ha(za(n),"handleModalOpen",function(){return n.setState({modalOpen:!0})}),n.state={modalOpen:!1,inputValue:""},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wa(e,t)}(t,r.a.Component),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=(t.label,t.title,t.children,t.onClick);return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{color:"inherit",onClick:a||this.handleModalOpen},r.a.createElement(qa.a,null),r.a.createElement("div",{className:n.label},"Load")),r.a.createElement($t,{title:"Load Code",open:this.state.modalOpen,handleModalClose:this.handleModalClose},r.a.createElement("div",{className:n.dialogContainer},r.a.createElement("div",null,r.a.createElement(xa.a,{label:"Load Code",value:this.state.inputValue,onChange:function(t){e.setState({inputValue:t.target.value})}}),r.a.createElement(R.a,{color:"inherit",className:n.inlineDialogButton,onClick:function(){return new Promise(function(t,n){try{var a=GraphSvg.inflateGraphData(e.state.inputValue);e.props.t.graphSvg.loadGraphData(a),t(!0)}catch(e){console.error(e),n(e)}}).then(function(t){e.setState({statusMessage:"Loaded!"},function(){setTimeout(function(){e.setState({statusMessage:""})},3e3)})}).catch(function(t){e.setState({statusMessage:"Invalid load code!"},function(){setTimeout(function(){e.setState({statusMessage:""})},3e3)})})}},r.a.createElement(qa.a,null),r.a.createElement("div",{className:n.label},"Load"))),r.a.createElement("div",{className:n.statusMessage},this.state.statusMessage))))}}])&&Fa(n.prototype,a),o&&Fa(n,o),t}(),Ja=(Object(s.withStyles)(function(e){return{label:{paddingLeft:10},dialogContainer:{display:"flex",flexDirection:"column"},inlineDialogButton:{paddingTop:10,paddingBottom:10},dialogButton:{marginTop:10},statusMessage:{display:"flex",flexDirection:"column"}}})(Ya),n(401)),Ka=n.n(Ja),Qa=n(400),Ua=n.n(Qa),Za=n(133),Va=n.n(Za),Xa=n(402),$a=n.n(Xa);function er(e){return(er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tr(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function nr(e){return(nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ar(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rr(e,t){return(rr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function or(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ir=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,r=nr(t).call(this,e),n=!r||"object"!==er(r)&&"function"!=typeof r?ar(a):r,or(ar(n),"debounce",function(e,t,n){var a;return function(){var r=this,o=arguments,i=n&&!a;clearTimeout(a),a=setTimeout(function(){a=null,n||e.apply(r,o)},t),i&&e.apply(r,o)}}),or(ar(n),"update",function(){if(n.props.selected.machine){var e=A.select("#node-level-accessor-"+n.props.selected.id);Je(e),n.props.selected.overclock=n.state.sliderValue;var t=A.select("#node-overclock-accessor-"+n.props.selected.id);De.call(ar(n),n.props.selected,n.state.sliderValue,t)}else{var a=A.select("#path-parent"+n.props.selected.source.id+"-"+n.props.selected.target.id);Je(a)}}),or(ar(n),"debouncedUpdate",n.debounce(function(){n.update()},20)),or(ar(n),"upgrade",function(){var e=n.props.selected.instance,t=n.props.selected.upgradeTypes.indexOf(e);(t+=1)>=n.props.selected.upgradeTypes.length||(n.props.selected.instance=n.props.selected.upgradeTypes[t],n.update(),n.setState({dummy:!n.state.dummy}))}),or(ar(n),"downgrade",function(){var e=n.props.selected.instance,t=n.props.selected.upgradeTypes.indexOf(e);n.props.selected.upgradeTypes.length;(t-=1)<0||(n.props.selected.instance=n.props.selected.upgradeTypes[t],n.update(),n.setState({dummy:!n.state.dummy}))}),or(ar(n),"changeSlider",function(e,t){n.setState({sliderValue:t},function(){n.debouncedUpdate()})}),n.state={dummy:!1,sliderValue:n.props.selected.overclock},n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rr(e,t)}(t,r.a.Component),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.label;return r.a.createElement(ct.a,{className:t.paper},r.a.createElement(bt.b,{variant:"h5"},n),r.a.createElement(Va.a,{color:"secondary",className:t.button,onClick:this.downgrade},r.a.createElement(Ua.a,null)),this.props.selected.instance.name,r.a.createElement(Va.a,{color:"primary",className:t.button,onClick:this.upgrade},r.a.createElement(Ka.a,null)),-1!==this.props.overclock?r.a.createElement(r.a.Fragment,null,r.a.createElement(bt.b,{id:"label"},"Overclock: ",this.state.sliderValue,"%"),r.a.createElement($a.a,{classes:{root:t.slider},value:this.state.sliderValue,min:0,max:250,step:1,onChange:this.changeSlider})):null)}}])&&tr(n.prototype,a),o&&tr(n,o),t}(),cr=Object(s.withStyles)(function(e){return{root:{},formControl:{maxWidth:310},paper:{position:"absolute",left:330,bottom:20,margin:16,padding:12,minWidth:210},textField:{paddingBottom:10},button:{},label:{paddingLeft:10},slider:{padding:"10px"}}})(ir);n(933),n(828);function lr(e){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sr(e,t,n,a,r,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(a,r)}function ur(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function dr(e,t){return!t||"object"!==lr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pr(e){return(pr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mr(e,t){return(mr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fr=Object(s.createMuiTheme)({typography:{useNextVariants:!0},palette:{primary:{main:"#FF9100"},secondary:{main:"#FF3D00",contrastText:"#FAFAFA"}},themeName:"Pizazz Vermilion Gayal"}),hr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=dr(this,pr(t).call(this,e))).state={loaded:!1},n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mr(e,t)}(t,a["Component"]),n=t,(o=[{key:"getRefkeyTable",value:function(e){var t=this.state.db,n=t.getSchema().table(e);return new Promise(function(e){return t.select().from(n).exec().then(function(t){return e(t)})})}},{key:"generateRecursiveStructure",value:function(e){var t=this,n=this.state.db,a=n.getSchema().table(e);this.globalStructure=this.globalStructure||{};var r=this.globalStructure;return n.select().from(a).exec().then(function(){var n,a=(n=regeneratorRuntime.mark(function n(a){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(a.length>0)){n.next=2;break}return n.delegateYield(regeneratorRuntime.mark(function n(){var o,i,c,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r[e]=a,o=Object.keys(a[0]).filter(function(e){return e.endsWith("_id")});case 2:if(!(o.length>0)){n.next=12;break}if(i=o.pop(),c=i.slice(0,-3),r[c]){n.next=10;break}return n.next=8,t.getRefkeyTable(c);case 8:r[c]=n.sent,Object.keys(r[c]).filter(function(e){return e.endsWith("_id")}).forEach(function(e){r[e.slice(0,-3)]||o.push(e)});case 10:n.next=2;break;case 12:l=function e(t,n){return Array.isArray(t)?(t.forEach(function(a,r){e(a,n)&&(console.error("Why are we doing this to an array?"),t[r]=n(a))}),!1):"object"!==lr(t)||(Object.keys(t).forEach(function(a){var r=t[a];e(r,n)&&n(r,a,t)}),!1)},Object.keys(r).forEach(function(e){r[e].forEach(function(t){Object.keys(t).filter(function(e){return e.endsWith("_id")}).forEach(function(n){var a=t[n],o=n.slice(0,-3),i=r[o];delete t[n];var c=i.filter(function(e){return e.id===a});if(1!==c.length)throw new Error("Unrecognized Id "+a+" in "+n+" within "+e);t[o]=c[0]})})}),Object.keys(r).forEach(function(e){r[e].forEach(function(t){Object.keys(t).filter(function(e){return e.endsWith("_id")}).forEach(function(n){var a=t[n],o=n.slice(0,-3),i=r[o];delete t[n];var c=i.filter(function(e){return e.id===a});if(1!==c.length)throw new Error("Unrecognized Id "+a+" in "+n+" within "+e);t[o]=c[0]}),Object.keys(t).filter(function(e){return!e.endsWith("_id")}).forEach(function(e){var n=t[e];l(n,function(e,t,n){if(t.endsWith("_id")){var a=e,o=t.slice(0,-3),i=r[o];delete n[t];var c=i.filter(function(e){return e.id===a});if(1!==c.length)throw new Error("Unrecognized Id "+a+" in table "+t+" within "+n);n[o]=c[0]}else"string"==typeof n[t]&&n[t].startsWith("http")&&((new Image).src=n[t])})})})});case 15:case"end":return n.stop()}},n)})(),"t0",2);case 2:return n.abrupt("return",r);case 3:case"end":return n.stop()}},n)}),function(){var e=this,t=arguments;return new Promise(function(a,r){var o=n.apply(e,t);function i(e){sr(o,a,r,i,c,"next",e)}function c(e){sr(o,a,r,i,c,"throw",e)}i(void 0)})});return function(e){return a.apply(this,arguments)}}())}},{key:"componentDidMount",value:function(){var e=this;C.a("UA-136827615-1",{debug:!0}),C.b(window.location.pathname+window.location.search),window.addEventListener("hashchange",function(){document.location.reload()},!1),new Promise(function(e,t){if(window.location.hash){var n=null;return n=-1===window.location.hash.indexOf("?")?window.location.hash.slice(1):window.location.hash.slice(1,window.location.hash.indexOf("?")),fetch("https://api.myjson.com/bins//"+se.a.atob(decodeURIComponent(n)),{method:"GET"}).then(function(e){return e.json()}).then(function(t){e(de(t.data))}).catch(function(t){console.log("Fetch error:",t.message),e(de(pe))})}e(de(pe))}).then(function(t){e.setState({coreGraphData:t},function(){te().then(function(t){e.setState({db:t,loaded:!0})}).then(function(){return e.generateRecursiveStructure("player_unlock").then(function(t){e.setState({player_unlock:t},function(){return e.generateRecursiveStructure("recipe").then(function(t){e.setState({recipe:t},function(){return e.generateRecursiveStructure("machine_node").then(function(t){e.setState({machine_node:t},function(){return e.generateRecursiveStructure("spring").then(function(t){e.setState({spring:t},function(){return e.generateRecursiveStructure("path_type").then(function(t){e.setState({path_type:t},function(){return e.generateRecursiveStructure("purity_type").then(function(t){e.setState({purity_type:t,isLoaded:!0})})})})})})})})})})})})})})})}},{key:"generateNodeList",value:function(){var e=this,t={},n={};return this.state.recipe&&this.state.recipe.recipe.forEach(function(e){var a=t[e.machine_class.name]||[];a.push(e),t[e.machine_class.name]=a,n[e.machine_class.name]=e.machine_class.plural}),Object.keys(t).map(function(a){return r.a.createElement(Rt,{appObject:e,label:n[a],key:a,items:t[a]})})}},{key:"generateContainerList",value:function(){var e={};return this.state.purity_type&&this.state.spring&&this.state.spring.spring.forEach(function(t){var n=e[t.spring_type.name]||[];n.push(t),e[t.spring_type.name]=n}),e.Logistic=this.state.machine_node.machine_node.filter(function(e){return"Logistic"===e.machine_class.name}),r.a.createElement(r.a.Fragment,null,r.a.createElement($n,{label:"Logistics",appObject:this,listItems:e}))}},{key:"generateUnlocksList",value:function(){var e=this;return this.state.player_unlock&&this.state.player_unlock.player_unlock.forEach(function(t){e.state.recipe.recipe.filter(function(e){return e.player_unlock&&e.player_unlock.id===t.id})[0]}),r.a.createElement("div",null,"hello")}},{key:"generateSpringList",value:function(){this.generateUnlocksList();var e={};return this.state.spring&&this.state.spring.spring.forEach(function(t){var n=e[t.spring_type.name]||[];n.push(t),e[t.spring_type.name]=n}),r.a.createElement(Hn,{label:"Miners",listItems:e,appObject:this})}},{key:"render",value:function(){var e=this.props.classes;if(!this.state.isReady)return r.a.createElement(W,{ready:this.state.isLoaded,parentState:this});var t=this;return r.a.createElement("div",{className:e.root},r.a.createElement(h.a,null),r.a.createElement(s.MuiThemeProvider,{theme:fr},r.a.createElement(m.a,{position:"fixed",className:e.appBar},r.a.createElement(g.a,null,r.a.createElement("img",{alt:"wow so satis factory",className:e.logo,src:"https://raw.githubusercontent.com/rhocode/rhocode.github.io/master/img/satisgraphtory.png",title:"logo"}),r.a.createElement("div",{className:e.grow}),me("opt")?r.a.createElement(R.a,{color:"inherit"},r.a.createElement(P.a,null),r.a.createElement("div",{className:e.label},"Optimize")):null,r.a.createElement(R.a,{color:"inherit",onClick:function(){return t.graphSvg.analyze()}},r.a.createElement(M.a,null),r.a.createElement("div",{className:e.label},"Analyze")),r.a.createElement(La,{t:t}),r.a.createElement(Ea,{t:t}))),r.a.createElement(dn,null,r.a.createElement(v.a,{variant:"h4"},"Welcome to SatisGraphtory!"),r.a.createElement(v.a,{variant:"body1"},"Thanks for checking out our tool! If you have any questions or suggestions whatsoever, feel free to join our discord ",r.a.createElement("a",{href:"https://discord.gg/ZRpcgqY"},"here!")," I'm always looking to add more functionality!"),r.a.createElement("br",null),r.a.createElement(v.a,{variant:"h5"},"This tool will always be free."),r.a.createElement(v.a,{variant:"body1"},"If you would like to contribute, contact us on the discord, we'd love your help!"),r.a.createElement("br",null),r.a.createElement(v.a,{variant:"h5"},"Graph Basics"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(v.a,{variant:"body1"},"Use the ",r.a.createElement("b",null,"left menu")," to ",r.a.createElement("b",null,"add")," machines to the diagram")),r.a.createElement("li",null,r.a.createElement(v.a,{variant:"body1"},r.a.createElement("b",null,"Click")," on a node/path to ",r.a.createElement("b",null,"select")," it")),r.a.createElement("li",null,r.a.createElement(v.a,{variant:"body1"},"Press ",r.a.createElement("b",null,"BACKSPACE")," on a selected node/path to delete it")),r.a.createElement("li",null,r.a.createElement(v.a,{variant:"body1"},"Hold down ",r.a.createElement("b",null,"shift")," and ",r.a.createElement("b",null,"drag")," from node to node to create belts")),r.a.createElement("li",null,r.a.createElement(v.a,{variant:"body1"},"Use ",r.a.createElement("b",null,"mouse wheel")," to control overclock (black text in the white circle)"))),r.a.createElement(v.a,{variant:"h5"},"Sharing"),r.a.createElement(v.a,{variant:"body1"},"You can share codes using the Share top left button."),r.a.createElement("br",null),r.a.createElement(v.a,{variant:"h5"},"Legend"),r.a.createElement(v.a,{variant:"body1"},r.a.createElement("span",{style:{color:"orange"}},"Orange")," numbers means machine wastes time doing nothing"),r.a.createElement(v.a,{variant:"body1"},r.a.createElement("span",{style:{color:"LightCoral"}},"Red")," numbers means machine isn't processing fast enough"),r.a.createElement(v.a,{variant:"body1"},r.a.createElement("span",{style:{color:"Blue"}},"Blue")," numbers means the belt capacity was overridden (fix it ASAP!)"),r.a.createElement("br",null),r.a.createElement(v.a,{variant:"body1"},"You can revisit these instructions anytime by clicking on the bottom left.")),this.state.selectedNode&&this.state.selectedNode.upgradeTypes.length>1||this.state.selectedPath&&this.state.selectedPath.upgradeTypes&&this.state.selectedPath.upgradeTypes.length>1?r.a.createElement(cr,{label:"Options",graphSvg:this.graphSvg,overclock:this.state.selectedNode?this.state.selectedNode.overclock:-1,selected:this.state.selectedNode||this.state.selectedPath}):null,r.a.createElement(d.a,{className:e.drawer,variant:"permanent",classes:{paper:e.drawerPaper}},r.a.createElement(w.a,null,r.a.createElement(v.a,{variant:"h5",className:e.drawerTitle},"Nodes"),this.generateNodeList(),this.generateSpringList(),this.generateContainerList()),r.a.createElement(S.a,null),r.a.createElement(pa,{parentState:this,playerUnlock:this.state.player_unlock}),r.a.createElement(S.a,null),r.a.createElement(w.a,null,r.a.createElement(kn,{Icon:O.a,label:"About/Disclaimers",title:"About/Disclaimers"},r.a.createElement(v.a,{variant:"body1"},"Created by ",r.a.createElement("a",{href:"https://github.com/tehalexf"},"Alex")," and ",r.a.createElement("a",{href:"https://github.com/thinkaliker"},"Adam")," (",r.a.createElement("a",{href:"https://twitter.com/thinkaliker"},"@thinkaliker"),")."),r.a.createElement(v.a,{variant:"body1"},"Not officially affiliated with Satisfactory, Coffee Stain Studios AB, or THQ Nordic AB."),r.a.createElement(v.a,{variant:"body1"},"Images sourced from the Satisfactory Wiki, which is sourced from Coffee Stain Studios AB's Satisfactory.")),r.a.createElement(kn,{Icon:x.a,label:"Known Issues",title:"Known Issues"},r.a.createElement("ul",null,r.a.createElement("li",null,"Resource nodes do not have purities displayed on the graph."),r.a.createElement("li",null,"No option yet to hide belt and factory numbers."))))),r.a.createElement("main",{className:e.content},this.state.loaded?r.a.createElement(at,{parentAccessor:this,ref:function(e){t.graphSvg=e}}):r.a.createElement("div",null))))}}])&&ur(n.prototype,o),i&&ur(n,i),t}();hr.propTypes={classes:l.a.object.isRequired};var yr=Object(s.withStyles)(function(e){return{root:{display:"flex",flexGrow:1,flexBasis:"auto"},appBar:{zIndex:e.zIndex.drawer+1},drawer:{width:310,flexShrink:0,display:"flex",paddingTop:64},drawerPaper:{width:310,position:"unset"},drawerTitle:{paddingLeft:15,paddingTop:5},content:{display:"flex",flexGrow:1,paddingTop:64},toolbar:e.mixins.toolbar,logo:{width:310},grow:{flexGrow:1},pathIcon:{height:15,width:15,display:"inline-block"},pathText:{display:"inline-block"},paper:{margin:2*e.spacing.unit,display:"flex"},button:{flex:"0 0 100%"},label:{paddingLeft:10},inlineDialogButton:{paddingTop:10,paddingBottom:10},dialogButton:{marginTop:10},dialogContainer:{display:"flex",flexDirection:"column"},clearButton:{paddingTop:20}}})(hr);n(938),n(940);i.a.render(r.a.createElement(yr,null),document.getElementById("app"))},940:function(e,t){}});
//# sourceMappingURL=main.js.map