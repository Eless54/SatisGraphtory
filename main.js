!function(e){function t(t){for(var r,i,c=t[0],l=t[1],s=t[2],f=0,p=[];f<c.length;f++)i=c[f],a[i]&&p.push(a[i][0]),a[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);p.length;)p.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,c=1;c<n.length;c++){var l=n[c];0!==a[l]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={0:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var u=l;o.push([465,1]),n()}({465:function(e,t,n){n(466),e.exports=n(872)},872:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(45),i=n.n(o),c=(n(38),n(39),n(33),n(88),n(89),n(151),n(34),n(68),n(192),n(90),n(47),n(41),n(48),n(91),n(49),n(29),n(122),n(261),n(654),n(35),n(348),n(349),n(92),n(36),n(325),n(4)),l=n.n(c),s=n(56),u=n(222),f=n.n(u),p=n(220),d=n.n(p),h=n(219),m=n.n(h),y=n(221),g=n.n(y),b=n(15),v=n.n(b),E=n(129),w=n.n(E),O=n(169),k=n.n(O),S=n(402),x=n.n(S),C=n(293),P=n(403),j=n.n(P),T=n(400),I=n.n(T),N=n(401),A=n.n(N),_=n(24),L=n.n(_),M=n(3);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z=["Loading...","Burning Coal...","Deleting Steam Keys...","Exploiting Resources...","Petting Lizard Doggo...","Adding Pipes...","Adding Mana...","Spilling Coffee...","Becoming A Goat...","Charging Batteries..."],H=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),B(this,G(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentDidUpdate",value:function(e,t){!0!==this.props.ready||e.ready||this.props.parentState.setState({isReady:!0},function(){console.info('App set as "Ready"')})}},{key:"render",value:function(){var e=this.props;e.ready,e.parentState,e.classes;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"loader-spinner"}),a.a.createElement("div",{className:"align-loading"},a.a.createElement("div",{className:"loading-text align-loading-text"},z[Math.floor(Math.random()*z.length)])))}}])&&D(n.prototype,r),o&&D(n,o),t}(),q=Object(s.withStyles)(function(e){return{root:{}}})(H),K=(n(200),n(158),n(716),n(159),{lineObjectClass:"line-object",lineParentObjectClass:"lineParentObjectClass",lineHitboxObjectClass:"line-object-hitbox",lineStylingPathClass:"line-object-path-styled",lineStylingArrowClass:"line-object-arrow-styled",lineStylingFullClass:"line-object-combined-styled",overclockedTextClass:"overclockedTextClass",nodeVersionTextClass:"nodeVersionTextClass",nodeRequirementsIconClass:"nodeRequirementsIconClass",nodeSurplusIconClass:"nodeSurplusIconClass",nodeRequirementsSubIconClass:"nodeRequirementsSubIconClass",nodeProducesClass:"nodeProducesClass",nodeSurplusClass:"nodeSurplusClass",nodeProducesPerMinText:"nodeProducesPerMinText",nodeLimitingThroughputText:"nodeLimitingThroughputText",nodeLimitingThroughputClass:"nodeLimitingThroughputClass",lineLimitedThroughputText:"lineLimitedThroughputText",lineLimitedThroughputClass:"lineLimitedThroughputClass",selectedClass:"selected",selectedNodeClass:"selected-node",selectedLineClass:"selected-line",connectableClass:"potential-connectable-node",graphNodeClass:"graphMachineNode",graphNodeHoverClass:"graphNodeHoverClass",overclockedArcClass:"overclockedArcClass",graphNodeGrabbedClass:"graphNodeGrabbedClass",graphNodeIdBase:"graph-svg-node-",svgGraphClass:"graph-svg",activeEditId:"active-editing",BACKSPACE_KEY:8,DELETE_KEY:46,ENTER_KEY:13,nodeRadius:50}),V=(n(717),n(126),n(719),n(201),n(202),n(272),n(160),n(161),n(273),n(724),n(726),function(e,t){return Math.round(e/t)*t});var Y=function(e){var t=["0"],n=[],r={},a={},o=[];return Object.keys(e).forEach(function(i){Object.keys(a).includes(i)||function i(c){if(a[c]=t[0],r[c]=t[0],t[0]=(parseInt(t[0],10)+1).toString(),n.push(c),(e[c]||[]).forEach(function(e){if(Object.keys(a).includes(e)){if(n.includes(e)){if(void 0===r[c]||void 0===r[e])throw new Error("Not defined: "+c+" "+e+" "+JSON.stringify(r)+" "+JSON.stringify(a));r[c]=Math.min(parseInt(r[c],10),parseInt(a[e],10)).toString()}}else{if(i(e),void 0===r[c]||void 0===r[e])throw new Error("Not defined: "+c+" "+e+" "+JSON.stringify(r));r[c]=Math.min(parseInt(r[c],10),parseInt(r[e],10)).toString()}}),r[c]===a[c]){for(var l=[];;){var s=n.pop();if(l.push(s),s===c)break}o.push(l.slice())}}(i)}),o},W=(n(729),n(730),n(731),n(732),n(170)),J=n(171),X=n.n(J),U=n(111),Z=n.n(U),Q=function(e,t){-1!==e.indexOf(t)&&e.splice(e.indexOf(t),1)},$=function(e){return Object(W.a)(X.a.inflate(Z.a.atob(e),{to:"string"}))},ee="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",te=function(e){var t={};return window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,n,r){t[n]=r}),t.useExperimentalFeatures=t.useExperimentalFeatures||"",(t.useExperimentalFeatures||"").split(",").includes(e)||"all"===t.useExperimentalFeatures};function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var re=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.length=this.data.length,this.compare=n,this.reheapify()}var t,n,r;return t=e,(n=[{key:"reheapify",value:function(){if(this.length>0)for(var e=(this.length>>1)-1;e>=0;e--)this._down(e)}},{key:"size",value:function(){return this.data.length}},{key:"remove",value:function(e){Q(this.data,e),this.length=this.data.length}},{key:"push",value:function(e){this.data.push(e),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(e){for(var t=this.data,n=this.compare,r=t[e];e>0;){var a=e-1>>1,o=t[a];if(n(r,o)>=0)break;t[e]=o,e=a}t[e]=r}},{key:"_down",value:function(e){for(var t=this.data,n=this.compare,r=this.length>>1,a=t[e];e<r;){var o=1+(e<<1),i=t[o],c=o+1;if(c<this.length&&n(t[c],i)<0&&(o=c,i=t[c]),n(i,a)>=0)break;t[e]=i,e=o}t[e]=a}}])&&ne(t.prototype,n),r&&ne(t,r),e}();function ae(e,t){return e<t?-1:e>t?1:0}function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var le=function(){var e=this,t=new Set(Object.keys(this.nodeIn));Object.keys(this.nodeOut).forEach(function(e){return t.add(e)});var n=Array.from(t),r={};n.forEach(function(t,a){n[a]=e.graphData.nodes.filter(function(e){return e.id.toString()===t})[0],r[n[a].id]=n[a],n[a].childProvides=[],n[a].hasSources=new Set,n[a].containedItems=[],"Container"!==n[a].machine.name&&"Logistic"!==n[a].machine.name||(n[a].allowedIn=[],n[a].allowedOut=[])});var a={};Object.keys(this.nodeOut).forEach(function(t){var n=e.nodeOut[t];a[t]=new Set(n.map(function(e){return e.id.toString()}))});var o=Y(a),i={},c={},l={};o.forEach(function(e,t){i[t]=e,c[t]=e.map(function(e){return r[e]}),e.forEach(function(e){l[e]=t})});var s={};Object.keys(this.nodeOut).forEach(function(t){var n=e.nodeOut[t].map(function(e){return e.id}),r=l[t];s[r]=s[r]||new Set;var a=s[r];n.forEach(function(e){var t=l[e];t!==r&&a.add(t)})});var u={},f={};Object.keys(this.nodeOut).forEach(function(t){var n=e.nodeOut[t].map(function(e){return e.id}),r=l[t];u[r]=u[r]||new Set,f[r]=f[r]||new Set,n.forEach(function(e){var t=l[e];t!==r&&(u[t]||(u[t]=new Set,f[t]=new Set),u[t].add(r),f[t].add(r))})});var p=new re(Array.from(new Set([].concat(ce(Object.keys(s)),ce(Object.keys(u))))),function(e,t){return(u[e]||[]).size-(u[t]||[]).size}),d={},h={};this.props.parentAccessor.state.recipe.item.forEach(function(e){h[e.id]=e.icon}),this.graphData.nodes.forEach(function(t){if(delete t.efficiency,delete t.itemThroughPut,delete t.itemsPerMinute,delete t.internalError,t.data&&t.data.recipe&&!t.data.node&&e.props.parentAccessor.state&&e.props.parentAccessor.state.recipe&&e.props.parentAccessor.state.recipe.recipe&&window.location.search.indexOf("thankYouStay=veryYes")>-1){var n=e.props.parentAccessor.state.recipe.recipe.filter(function(e){return e.id===t.data.recipe.id});n.length>0&&(t.data.recipe=n[0]),console.log("Replaced recipe",n[0])}t.itemIconLookup=h}),this.graphData.links.forEach(function(e){delete e.itemThroughPut,delete e.tempIndex,delete e.forceOverwritable,e.itemIconLookup=h});for(var m=function(){var t=p.pop(),n=c[t],r=Array.from(s[t]||new Set);!function(t,n,r,a){var o=[];if(1===t.length){var i=t[0],l=null,u=null,f=i.instance.speed/100,p=i.overclock/100,h=d[i.id]||[];if(i.data.node){var m=i.data.recipe,y=i.data.purity,g=m.purities.filter(function(e){return e.name===y});if(1!==g.length)throw new Error("Trying to get purity",y,"wtf?");var b=g[0];l={speed:f,overclock:p,quantity:b.quantity,item:m.item.id,time:60,power:i.instance.power,inputs:[]},u=1;var v=l.quantity/l.time*60*i.instance.speed/100*l.overclock;o.push({throughput:l,efficiency:u,source:r}),t.forEach(function(e){e.efficiency=u,e.itemsPerMinute=ie({},l.item,v),e.itemThroughPut=ie({},l.item,{max:v,actual:v})})}else if("Logistic"===i.machine.name&&"Splitter"===i.instance.name){var E={},w=new Set;h.forEach(function(n){var r=JSON.parse(JSON.stringify(n));r.maxItemsPerSecLimiter=r.calculatedItemPerSecond,r.reconstructionMultiplier=(e.nodeOut[t[0].id]||[]).length||1;var a=r.throughput.item;w.add(a);var i=r.calculatedItemPerSecond;E[a]=E[a]||0,E[a]+=60*i,o.push(r)}),t.forEach(function(e){e.efficiency=1,e.itemsPerMinute={},e.itemThroughPut={},w.forEach(function(t){var n=E[t];e.itemsPerMinute[t]=n,e.itemThroughPut[t]={max:n,actual:n}})})}else if("Logistic"===i.machine.name&&"Merger"===i.instance.name){var O={},k=new Set;h.forEach(function(e){var t=JSON.parse(JSON.stringify(e)),n=t.throughput.item;k.add(n);var r=t.calculatedItemPerSecond;O[n]=O[n]||0,O[n]+=60*r,o.push(t)}),t.forEach(function(e){e.efficiency=1,e.itemsPerMinute={},e.itemThroughPut={},k.forEach(function(t){var n=O[t];e.itemsPerMinute[t]=n,e.itemThroughPut[t]={max:n,actual:n}})})}else if("Container"===i.machine.name){var S={},x=new Set;h.forEach(function(e){var t=e.throughput.item;x.add(t);var n=e.calculatedItemPerSecond;S[t]=S[t]||0,S[t]+=60*n,o.push(e)}),t.forEach(function(e){e.efficiency=1,e.itemsPerMinute={},x.forEach(function(t){var n=S[t];e.itemsPerMinute[t]=n,e.itemThroughPut=ie({},t,{max:n,actual:n})})})}else{l={speed:f,overclock:p,quantity:i.data.recipe.quantity,item:i.data.recipe.item.id,time:i.data.recipe.time,power:i.data.recipe.power,inputs:i.data.recipe.inputs.map(function(e){return{item:e.item.id,quantity:e.quantity}})};var C={},P=new Set;h.forEach(function(e){var t=e.throughput.item;P.add(t);var n=e.calculatedItemPerSecond;C[t]=C[t]||0,C[t]+=60*n});var j=new Set,T=[1/0],I=l.quantity/l.time*60*i.instance.speed/100*l.overclock;l.inputs.forEach(function(e){var t=e.item,n=e.quantity,r=C[t]||0;P.has(t)||j.add(t);var a=I*(n/l.quantity),o=I*(Math.min(a,r)/a),c=a;i.itemThroughPut=i.itemThroughPut||{},i.itemThroughPut[t]=i.itemThroughPut[t]||{max:0,actual:0},i.itemThroughPut[t].max+=c,i.itemThroughPut[t].actual+=r;var s=o/I;T.push(Math.min(1,s))}),u=j.size>0?0:Math.min.apply(Math,T),o.push({throughput:l,efficiency:u,source:r}),t.forEach(function(e){e.efficiency=u,e.itemsPerMinute=ie({},l.item,I*u)})}var N=0,A=0,_={},L=[];(s[r]||[]).forEach(function(n){var r=t.map(function(e){return e.id}),a=c[n].map(function(e){return e.id});r.forEach(function(t){a.forEach(function(n){var r=e.graphData.links.filter(function(e){return e.source.id===t&&e.target.id===n}),a=null;if(r&&1===r.length)a=r[0],L.push({source:t,target:n,speed:a.instance.speed,link:a}),A+=a.instance.speed;else if(r&&r.length>1)throw new Error("Too many links found!!!")})})});var M=o.map(function(e){var t=e.throughput.quantity,n=e.throughput.time,r=e.efficiency,a=e.throughput.overclock,o=e.throughput.speed,i=e.throughput.item,c=void 0===e.maxItemsPerSecLimiter?1/0:e.maxItemsPerSecLimiter,l=Math.min(t/n*r*a*o||0,c);return _[i]=_[i]||0,_[i]+=l,l}).reduce(function(e){return e+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)},0);N+=M,L.sort(function(e,t){return e.speed-t.speed});var R=1;60*N>A||(R=0);var D=60*N,B=L.length;L.forEach(function(e){var t=e.target,n=e.speed;if(d[t]=d[t]||[],1===R){var r=n/A;e.fraction=r}else if(D/B>n){D-=n;var a=n/(60*N);e.fraction=a}else{var o=D/B;D-=o;var i=o/(60*N);e.fraction=i}B-=1}),L.forEach(function(e){e.source;var t=e.target,n=e.speed,r=e.link,a=e.fraction||1,i=n;d[t]=d[t]||[],o.forEach(function(e){var n=JSON.parse(JSON.stringify(e)),o=n.throughput.quantity,c=n.throughput.time,l=n.efficiency,s=n.throughput.overclock,u=n.throughput.speed,f=n.throughput.item,p=void 0===n.maxItemsPerSecLimiter?1/0:n.maxItemsPerSecLimiter,h=Math.min(o/c*l*s*u||0,p),m=i/60,y=60*m;n.maxItemsPerSecLimiter=Math.min(m*(p/N),y*(p/N),m,p,h*a),n.calculatedItemPerSecond=n.maxItemsPerSecLimiter,r.itemThroughPut=r.itemThroughPut||{},r.itemThroughPut[f]=r.itemThroughPut[f]||{max:0,actual:0},r.itemThroughPut[f].max+=h/(N||1)*y,r.itemThroughPut[f].actual+=60*h*a,d[t].push(n)})})}else{var G=new Set;t.forEach(function(e){G.add(e.id),(d[e.id]||[]).forEach(function(e){var t=JSON.parse(JSON.stringify(e));o.push(t)})});var F={};t.forEach(function(t){JSON.parse(JSON.stringify(d[t.id]||[])).forEach(function(r){var a=function(t,r,a){for(var o=0,i=r.calculatedItemPerSecond,c=ie({},t.id,60*i),l=t.id,s=ie({},t.id,60*i),u=ie({},t.id,60*i),f=function(){var r=new Set,i=[t];r.add(t.id);for(var f=function(){var t=i.pop(),n=c[t.id];"Logistic"===t.machine.name&&"Splitter"===t.instance.name?n/=(e.nodeOut[t.id]||[]).length||1:"Logistic"===t.machine.name&&"Merger"===t.instance.name||t.machine.name,e.nodeOut[t.id].forEach(function(r){if(a.has(r.id)){var o=e.graphData.links.filter(function(e){return e.source.id===t.id&&e.target.id===r.id});if(o&&1!==o.length)throw new Error("Too many links found!!!");o[0].instance.speed,c[r.id]=c[r.id]||0,c[r.id]+=n}}),(e.nodeOut[t.id]||[]).forEach(function(e){!r.has(e.id)&&a.has(e.id)&&(r.add(e.id),i.push(e))})};i.length;)f();var p=c[l]-s[l];if(!n.length||p>s||0===Math.round(1e6*p)||998===o)return Object.keys(c).forEach(function(e){u[e]=Math.round(100*u[e])/100}),{v:u};c[l]-=s[l],Object.keys(c).forEach(function(e){u[e]=u[e]||0,u[e]+=c[e]}),s[l]=p,c=ie({},l,p),o++};o<999;){var p=f();if("object"===oe(p))return p.v}}(t,r,G),o=r.throughput.item;Object.keys(a||[]).forEach(function(e){F[e]=F[e]||{},F[e][o]=F[e][o]||0,F[e][o]+=a[e]})})}),t.forEach(function(t){e.nodeOut[t.id].forEach(function(n){if(G.has(n.id)){var r=e.graphData.links.filter(function(e){return e.source.id===t.id&&e.target.id===n.id});if(r&&1!==r.length)throw new Error("Too many links found!!!");var a=r[0],o=a.instance.speed,i=Object.keys(F[t.id]||{}).map(function(e){return F[t.id][e]}).reduce(function(e){return e+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)},0);Object.keys(F[t.id]||{}).forEach(function(n){var r=F[t.id][n];a.itemThroughPut=a.itemThroughPut||{},a.itemThroughPut[n]=a.itemThroughPut[n]||{max:0,actual:0},a.itemThroughPut[n].max=r/(i||1)*o,a.itemThroughPut[n].actual+=r/((e.nodeOut[t.id]||[]).length||1),a.forceOverwritable=!0})}})}),t.forEach(function(e){e.itemsPerMinute={},e.efficiency=1,t.forEach(function(t){(d[t.id]||[]).forEach(function(t){var n=JSON.parse(JSON.stringify(t)).throughput.item;e.itemsPerMinute[n]=F[e.id][n]||0})})}),(s[r]||[]).forEach(function(n){var r=t.map(function(e){return e.id}),a=c[n].map(function(e){return e.id});r.forEach(function(n){a.forEach(function(r){var a=e.graphData.links.filter(function(e){return e.source.id===n&&e.target.id===r}),o=null;if(a&&1===a.length){var i=(o=a[0]).instance.speed,c=Object.keys(F[n]||{}).map(function(e){return F[n][e]}).reduce(function(e){return e+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)},0);Object.keys(F[n]||{}).forEach(function(t){var r=F[n][t];o.itemThroughPut=o.itemThroughPut||{},o.itemThroughPut[t]=o.itemThroughPut[t]||{max:0,actual:0},o.itemThroughPut[t].max=r/c*i,o.itemThroughPut[t].actual+=r/((e.nodeOut[n]||[]).length||1),o.forceOverwritable=!0}),t.forEach(function(t){var a=d[t.id]||[],o={};a.forEach(function(e){var t=e.throughput.item;o[t]=o[t]||[],o[t].push(e)}),Object.keys(o).forEach(function(t){var a=o[t],c=a.map(function(e){return e.calculatedItemPerSecond}).reduce(function(e){return e+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)},0);a.forEach(function(a){var o=JSON.parse(JSON.stringify(a)),l=o.calculatedItemPerSecond/c;o.calculatedItemPerSecond=l/60*(F[n][t]/((e.nodeOut[n]||[]).length||1)),o.calculatedItemPerSecond=Math.min(o.calculatedItemPerSecond,i/60),o.maxItemsPerSecLimiter=o.calculatedItemPerSecond;var s=o;(s.throughput.quantity/s.throughput.time*s.efficiency*s.throughput.overclock*s.throughput.speed||0)<o.calculatedItemPerSecond&&(s.throughput.overclock=1/0),d[r]=d[r]||[],d[r].push(s)})})})}else if(a&&a.length>1)throw new Error("Too many links found!!!")})})})}}(n,r.map(function(e){return c[e]}),t),Object.keys(u).forEach(function(e){u[e].delete(parseInt(t,10))}),p.reheapify()};p.size();)m();Pe("efficiency",59,322)},se=function(e,t,n){var r=this,a=this,o=this.graphData.nodes,i=this.graphData.links;this.nodeIn={},this.nodeOut={},i.forEach(function(e){var t=e.source.id,n=e.target.id;r.nodeOut[t]=r.nodeOut[t]||[],r.nodeIn[n]=r.nodeIn[n]||[],r.nodeOut[t].push(e.target),r.nodeIn[n].push(e.source)}),o.forEach(function(e){var t=e.instance.input_slots,n=e.instance.output_slots;e.open_in_slots=t-(a.nodeIn[e.id]||[]).length,e.open_out_slot=n-(a.nodeOut[e.id]||[]).length}),de.call(a);var c=M.c().clickDistance(10).on("start",function(t){(function(e,t,n){n.state&&n.state.shiftHeld?n.setState({mouseDragSource:e}):(M.d.active||t.alphaTarget(.3).restart(),n.setState({wasFixed:null!==e.fx&&null!=e.fy}))}).call(r,t,e,a)}).on("drag",function(e){(function(e,t){t.state&&t.state.shiftHeld?t.dragLine.classed("hidden",!1).attr("d","M"+e.x+","+e.y+"L"+M.k(t.svgGroup.node())[0]+","+M.k(t.svgGroup.node())[1]):(e.fx=M.d.x,e.fy=M.d.y,t.setState({wasMoved:!0}))}).call(r,e,a)}).on("end",function(t){M.d.sourceEvent.stopImmediatePropagation(),function(e,t,n){t.state&&t.state.shiftHeld?(t.state.mouseOverNode&&(t.state.mouseDragSource,t.state.mouseOverNode,he.call(void 0,t,t.state.mouseDragSource,t.state.mouseOverNode)),t.dragLine.classed("hidden",!0).attr("d","M0,0L0,0")):t.state&&t.state.wasMoved?(e.x=e.fx,e.y=e.fy,t.state.snapToGrid&&e.fx&&(e.fx=V(e.fx,100),e.fy=V(e.fy,100))):t.state&&!t.state.wasFixed&&(e.fx=null,e.fy=null);M.l("."+K.graphNodeGrabbedClass).classed(K.graphNodeGrabbedClass,!1),t.setState({shiftHeld:!1,wasMoved:!1,wasFixed:!1})}.call(this,t,a,e)}),l=t.selectAll(".node-data-class").data(o,function(e){return e.id}),s=l.enter().append("g").classed("node-data-class",!0).attr("id",function(e){return e.id||null}).on("wheel.zoom",function(e){Te.call(this,e)}).on("click",function(e){M.d.stopImmediatePropagation(),Ee.call(this,e,a)}).on("dblclick",function(e){M.d.stopImmediatePropagation(),we(a),e.fx=null,e.fy=null}).on("mouseover",function(e){Oe.call(this,e,a)}).on("mouseout",function(e){ke.call(this,e,a)}).on("mousedown",function(e){Se.call(this,e,a)}).on("mouseup",function(e){xe.call(this,e,a)}).call(c);l.exit().remove(),s.append("circle").classed(K.graphNodeClass,!0).attr("cursor","pointer").attr("r",function(e){return 50});Ce(s,"efficiency",59,322),je(s),Re(s),Me(s),_e.call(a,s),l=s.merge(l);var u=n.selectAll(".link-data-class").data(i,function(e){return e.source.id+"-"+e.target.id}),f=u.enter().append("g").classed("link-data-class",!0),p=(u.exit().remove(),f.append("g").attr("id",function(e){return"path-parent"+e.source.id+"-"+e.target.id}).classed(K.lineParentObjectClass,!0));p.append("path").classed(K.lineStylingPathClass,!0).classed(K.lineStylingFullClass,!0).attr("display","none").attr("stroke","orange").attr("stroke-width",10),p.append("path").classed(K.lineStylingArrowClass,!0).classed(K.lineStylingFullClass,!0).attr("display","none").attr("stroke",null).attr("marker-end","url(#highlight-path-arrow-orange)").attr("stroke-width",3),p.append("path").classed(K.lineObjectClass,!0).attr("stroke",function(e){return M.b("#000000")}).attr("marker-end","url(#default-path-arrow)"),be.call(this,p),p.append("path").classed(K.lineHitboxObjectClass,!0).on("mouseover",function(e){}).on("mouseout",function(e){}).on("click",function(e){me.call(this,e,a)}),u=f.merge(u),e.nodes(o).on("tick",function(){fe.call(r,l,u,e)}).on("end",function(){console.log("Simulation Ended!")}),e.force("link").links(i),[].forEach(function(e){return e()}),e.alphaTarget(.3).restart()},ue=function(e){e.setState({selectedPath:null,selectedNode:null}),M.m("."+K.lineStylingFullClass).attr("display","none"),we(e)},fe=function(e,t,n){var r=100*n.alpha();e.attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y}),t.selectAll("line").attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),t.selectAll("path").attr("d",function(e){return"M "+e.source.x+" "+e.source.y+" L "+e.target.x+" "+e.target.y}),ge.call(this,t),t.selectAll("."+K.lineObjectClass).each(function(e){e.source.vx+=r,e.target.vx-=r})};function pe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var de=function(){var e=this,t=new Set(Object.keys(this.nodeIn));Object.keys(this.nodeOut).forEach(function(e){return t.add(e)});var n=Array.from(t),r={};n.forEach(function(t,a){n[a]=e.graphData.nodes.filter(function(e){return e.id.toString()===t})[0],r[n[a].id]=n[a],n[a].childProvides=[],n[a].hasSources=new Set,n[a].containedItems=[],"Container"!==n[a].machine.name&&"Logistic"!==n[a].machine.name||(n[a].allowedIn=[],n[a].allowedOut=[])});var a={};Object.keys(this.nodeOut).forEach(function(t){var n=e.nodeOut[t];a[t]=new Set(n.map(function(e){return e.id.toString()}))});var o=Y(a),i={},c={},l={};o.forEach(function(e,t){i[t]=e,c[t]=e.map(function(e){return r[e]}),e.forEach(function(e){l[e]=t})});var s={};Object.keys(this.nodeOut).forEach(function(t){var n=e.nodeOut[t].map(function(e){return e.id}),r=l[t];s[r]=s[r]||new Set;var a=s[r];n.forEach(function(e){var t=l[e];t!==r&&a.add(t)})});var u={},f={};Object.keys(this.nodeOut).forEach(function(t){var n=e.nodeOut[t].map(function(e){return e.id}),r=l[t];u[r]=u[r]||new Set,f[r]=f[r]||new Set,n.forEach(function(e){var t=l[e];t!==r&&(u[t]||(u[t]=new Set,f[t]=new Set),u[t].add(r),f[t].add(r))})});for(var p=new re(Array.from(new Set([].concat(pe(Object.keys(s)),pe(Object.keys(u))))),function(e,t){return(u[e]||[]).size-(u[t]||[]).size}),d={},h=[],m=function(){var e=p.pop();h.push(e);var t,n,r,a,o,i=c[e],l=Array.from(s[e]||new Set);l.map(function(e){return c[e]});t=i,n=e,r=l,a=[],o=new Set,t.forEach(function(e){"Container"!==e.machine.name&&"Logistic"!==e.machine.name?a.push({item:e.data.recipe,source:n}):(e.childProvides=d[n]||[],e.childProvides.forEach(function(e){o.has(e.source)||(a.push(e),o.add(e.source))}),e.allowedIn=e.childProvides.map(function(e){return e.item.item.id}),e.allowedOut=e.childProvides.map(function(e){return e.item.item.id}),e.containedItems=e.childProvides.map(function(e){return e.item.item}))}),r.forEach(function(e){d[e]||(d[e]=[]),a.forEach(function(t){new Set(d[e].map(function(e){return e.source})).has(t.source)||d[e].push(t)})}),Object.keys(u).forEach(function(t){u[t].delete(parseInt(e,10))}),p.reheapify()};p.size();)m();for(;h.length;){var y=h.pop(),g=c[y],b=Array.from(s[y]||new Set);!function(e,t,n,r){var a=new Set;t.forEach(function(e){return e.forEach(function(e){e.allowedIn.forEach(function(e){return a.add(e)})})}),e.forEach(function(e){"Container"!==e.machine.name&&"Logistic"!==e.machine.name||0===e.allowedIn.length&&0===e.allowedOut.length&&(e.allowedIn=Array.from(a),e.allowedOut=Array.from(a))})}(g,b.map(function(e){return c[e]}))}},he=function(e,t,n){var r=(t.allowedIn||[]).length>0||(t.allowedOut||[]).length>0,a=(n.allowedIn||[]).length>0||(n.allowedOut||[]).length>0,o=["Container","Logistic"].includes(t.machine.name),i=["Container","Logistic"].includes(n.machine.name),c=["Logistic"].includes(t.machine.name)&&["Merger"].includes(t.instance.name),l=["Logistic"].includes(n.machine.name)&&["Merger"].includes(n.instance.name),s=n.instance.input_slots===(e.nodeIn[n.id]?e.nodeIn[n.id].length:0);t.instance.output_slots,e.nodeOut[t.id]&&e.nodeOut[t.id].length;console.error(r,a,o,i,s);var u=e.props.parentAccessor.state.path_type.path_type;u.sort(function(e,t){return e.rank-t.rank});var f=u.filter(function(e){return e.rank>=0}),p=f[0],d={source:t,target:n,instance:p,upgradeTypes:f};if(o&&!r||i&&!a||c||l){console.log("Special Handling");var h=t.id,m=n.id,y=e.nodeOut[h]?e.nodeOut[h].length:0,g=e.nodeIn[m]?e.nodeIn[m].length:0;if(y>=t.instance.output_slots||g>=n.instance.input_slots)return void e.updateGraphHelper();0===e.graphData.links.filter(function(t){return t.source.id===d.target.id&&t.target.id===d.source.id&&ye(t,e),t.source.id===d.source.id&&t.target.id===d.target.id||d.source.id===d.target.id}).length&&e.graphData.links.push(d),e.updateGraphHelper()}else{var b=n.allowedIn.filter(function(e){return t.allowedOut.includes(e)}),v=t.id,E=n.id,w=e.nodeOut[v]?e.nodeOut[v].length:0,O=e.nodeIn[E]?e.nodeIn[E].length:0;if(w>=t.instance.output_slots||O>=n.instance.input_slots||b.length<=0)return void e.updateGraphHelper();0===e.graphData.links.filter(function(t){return t.source.id===d.target.id&&t.target.id===d.source.id&&ye(t,e),t.source.id===d.source.id&&t.target.id===d.target.id||d.source.id===d.target.id}).length&&e.graphData.links.push(d),e.updateGraphHelper()}},me=function(e,t){M.d.stopImmediatePropagation();var n=M.l(this.parentElement);t.state&&t.state.selectedPath&&t.state.selectedPath===e?ue.call(this,t):(ue.call(this,t),M.m("."+K.lineStylingFullClass).attr("display","none"),t.setState({selectedPath:e}),n.selectAll("."+K.lineStylingFullClass).attr("display","inherit"))},ye=function(e,t){if(-1===t.graphData.links.indexOf(e))throw new Error("d not found in graph links: "+JSON.stringify(e));var n=e.source.id,r=e.target.id;Q(t.nodeOut[n],e.target),Q(t.nodeIn[r],e.source),Q(t.graphData.links,e)},ge=function(e){e.selectAll("."+K.nodeVersionTextClass).attr("x",function(e){var t=M.l(M.l(this).node().parentElement.parentElement).select("path").node(),n=t.getTotalLength();return e.point=t.getPointAtLength(n/2),e.point.x}).attr("y",function(e){return e.point.y}),e.selectAll("."+K.lineLimitedThroughputClass).attr("x",function(e){var t=M.l(M.l(this).node().parentElement.parentElement).select("path").node(),n=t.getTotalLength();return e.point=t.getPointAtLength(n/2),e.point.x-44}).attr("y",function(e){return e.point.y+20*e.tempIndex[M.l(this).attr("data-key")]+15}),e.selectAll("."+K.lineLimitedThroughputText).attr("x",function(e){var t=M.l(M.l(this).node().parentElement.parentElement).select("path").node(),n=t.getTotalLength();return e.point=t.getPointAtLength(n/2),e.point.x-20}).attr("y",function(e){return e.point.y+20*e.tempIndex[M.l(this).attr("data-key")]+24})},be=function(e){var t=e.append("g").attr("class","textLabel");Le(t,0,0);e.append("g").attr("class","resourceThroughput");M.m("."+K.lineLimitedThroughputText).remove(),M.m("."+K.lineLimitedThroughputClass).remove(),M.m(".resourceThroughput").each(function(e){var t=M.l(this),n=0;e.tempIndex={},Object.keys(e.itemThroughPut||{}).forEach(function(r){var a=e.itemThroughPut[r];if(e.itemIconLookup){e.tempIndex[r]=n++;var o="LightCoral",i="link-has-problems";e.forceOverwritable&&(o="LightBlue"),a.actual<=a.max&&(o="white",i=null);var c=e.itemIconLookup[r];t.classed("link-has-problems",!1),i&&t.classed("link-has-problems",!0),t.append("svg:image").classed(K.lineLimitedThroughputClass,!0).attr("xlink:href",function(e){return c}).attr("data-key",r).attr("height",20).attr("width",20),t.append("text").attr("fill","black").attr("class","overclockFont").classed(K.lineLimitedThroughputText,!0).style("text-anchor","start").style("dominant-baseline","central").attr("stroke","black").attr("stroke-width",4).attr("font-size",20).attr("data-key",r).text(function(e){return Math.round(100*a.actual)/100+"/"+Math.round(100*a.max)/100}),t.append("text").attr("fill",o).attr("class","overclockFont").classed(K.lineLimitedThroughputText,!0).style("text-anchor","start").style("dominant-baseline","central").attr("font-size",20).attr("data-key",r).text(function(e){return Math.round(100*a.actual)/100+"/"+Math.round(100*a.max)/100})}})})},ve=n(172),Ee=function(e,t){var n=t.state.selectedNode;we(t),n!==e&&(ue(t),t.setState({selectedNode:e}),M.l(this).classed(K.graphNodeHoverClass,!0).classed(K.graphNodeGrabbedClass,!1).classed(K.selectedNodeClass,!0))},we=function(e){M.l("."+K.selectedNodeClass).classed(K.selectedNodeClass,!1).classed(K.graphNodeGrabbedClass,!1),e.setState({selectedNode:null})},Oe=function(e,t){t.setState({mouseOverNode:M.l(this).datum()}),M.l(this).classed(K.graphNodeHoverClass,!0)},ke=function(e,t){t.setState({mouseOverNode:null}),M.l(this).classed(K.graphNodeHoverClass,!1)},Se=function(e,t){M.d.shiftKey?t.setState({shiftHeld:!0,sourceId:M.l(this).datum().id}):M.l(this).classed(K.graphNodeGrabbedClass,!0)},xe=function(e,t){t.state&&t.state.shiftHeld,t.setState({shiftHeld:!1})},Ce=function(e,t,n,r){e.append("path").filter(function(e){return!["Container","Logistic"].includes(e.machine.name)}).attr("class",K.overclockedArcClass).attr("fill","none").attr("stroke-width",8),Pe(t,n,r)},Pe=function(e,t,n){M.m("."+K.overclockedArcClass).attr("d",function(r){return function(e,t,n,r){var a=r+n,o=100*e[t]||0,i=(a-n)/100,c=n;return M.a().innerRadius(50).outerRadius(50)({startAngle:c/180*Math.PI,endAngle:(i*o+c)/180*Math.PI})}(r,e,t,n)}).attr("stroke",function(t){var n,r,a,o=100*(t[e]||0);return(n=o)<50?(r=255,a=Math.round(5.1*n)):(a=255,r=Math.round(510-5.1*n)),"#"+("000000"+(65536*r+256*a+0).toString(16)).slice(-6)})},je=function(e){e.append("svg:image").attr("class",function(e){return e.machine&&e.machine.icon?"machine-icon":"dev-icon"}).attr("xlink:href",function(e){return e.instance&&e.instance.icon?e.instance.icon:e.machine&&e.machine.icon?e.machine.icon:"https://raw.githubusercontent.com/rhocode/rhocode.github.io/master/img/satoolsfactory_icons/Smelter.png"}).attr("x",function(e){return-50}).attr("y",function(e){return-50}).attr("height",100).attr("width",100)},Te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===t){M.d.stopImmediatePropagation();var r=-1;M.d.deltaY<0&&(r=1),e.overclock=e.overclock+r,e.overclock<0?e.overclock=251+e.overclock:e.overclock>250&&(e.overclock=e.overclock-251),Ie(M.l(this).select("."+K.overclockedTextClass))}else e.overclock=t,Ie(n)},Ie=function(e){e.text(function(e){return e.overclock})},Ne=function(e){e.text(function(e){return e.instance.machine_version.representation})},Ae=function(){(function(e){var t=this,n=t.props.parentAccessor.state.recipe.item;e.each(function(e){var r=e.allowedIn.slice();(t.nodeIn[e.id]||[]).map(function(e){return e.allowedOut}).flat(1).forEach(function(e){Q(r,e)});var a=M.l(this);if(a.selectAll("."+K.nodeRequirementsSubIconClass).remove(),r.length>0){a.append("text").attr("class","fas fa-arrow-right").classed(K.nodeRequirementsSubIconClass,!0).attr("x",function(e){return-81}).attr("y",function(e){return 3}).attr("height",25).attr("width",25);var o=r.map(function(e){return n.filter(function(t){return e===t.id})[0]}),i=new Set,c=0;o.forEach(function(e){i.has(e.icon)||(i.add(e.icon),a.append("svg:image").classed(K.nodeRequirementsSubIconClass,!0).on("mousedown",function(e){M.d.stopImmediatePropagation()}).on("click",function(n){var r=t.graphData.nodes.filter(function(t){return t.id!==n.id&&t.open_out_slot>0&&t.allowedOut.includes(e.id)}),a=t.graphData.nodes.filter(function(e){return e.id===n.id});r.length>0&&he(t,r[0],a[0]),M.d.stopImmediatePropagation()}).attr("xlink:href",function(t){return e.icon}).attr("x",function(e){return-114-28*c++}).attr("y",function(e){return 3}).attr("height",25).attr("width",25))})}var l=e.allowedOut.slice();if((t.nodeOut[e.id]||[]).map(function(e){return e.allowedIn}).flat(1).forEach(function(e){Q(l,e)}),l.length>0){a.append("text").attr("class","fas fa-arrow-right").classed(K.nodeRequirementsSubIconClass,!0).attr("x",function(e){return 58}).attr("y",function(e){return-28}).attr("height",25).attr("width",25);var s=l.map(function(e){return n.filter(function(t){return e===t.id})[0]}),u=new Set,f=0;s.forEach(function(e){u.has(e.icon)||(u.add(e.icon),a.append("svg:image").classed(K.nodeRequirementsSubIconClass,!0).on("mousedown",function(e){M.d.stopImmediatePropagation()}).on("click",function(n){var r=t.graphData.nodes.filter(function(t){return t.id!==n.id&&t.open_in_slots>0&&t.allowedIn.includes(e.id)}),a=t.graphData.nodes.filter(function(e){return e.id===n.id});r.length>0&&he(t,a[0],r[0]),M.d.stopImmediatePropagation()}).attr("xlink:href",function(t){return e.icon}).attr("x",function(e){return 85+28*f++}).attr("y",function(e){return-28}).attr("height",25).attr("width",25))})}})}).call(this,M.m("."+K.nodeRequirementsIconClass))},_e=function(e){e.append("g").classed(K.nodeRequirementsIconClass,!0).each(function(e){e.machine&&["Container","Logistic"].includes(e.machine.name)||M.l(this).append("svg:image").classed(K.nodeProducesClass,!0).attr("xlink:href",function(e){return e.data.recipe.item.icon}).attr("x",function(e){return-55}).attr("y",function(e){return 18}).attr("height",40).attr("width",40)}),M.m("."+K.nodeRequirementsIconClass).each(function(e){if(e.machine&&["Container","Logistic"].includes(e.machine.name)){var t=M.l(this);t.selectAll("."+K.nodeProducesClass).remove();var n=new Set,r=0;(e.containedItems||[]).forEach(function(e,a){n.has(e.icon)||(n.add(e.icon),t.append("svg:image").classed(K.nodeProducesClass,!0).attr("xlink:href",function(e){return e.containedItems[a].icon}).attr("x",function(e){return-55}).attr("y",function(e){return 18+30*r++}).attr("height",40).attr("width",40))})}}),e.append("g").classed(K.nodeSurplusIconClass,!0),M.m("."+K.nodeSurplusIconClass).each(function(e){var t=M.l(this);t.selectAll("."+K.nodeProducesPerMinText).remove(),t.append("text").attr("fill","white").attr("class","overclockFont").classed(K.nodeProducesPerMinText,!0).style("text-anchor","end").style("dominant-baseline","central").attr("stroke","black").attr("stroke-width",4).attr("x",-5).attr("y",-37).attr("font-size",30).text(function(e){var t=0;return Object.keys(e.itemsPerMinute||{}).forEach(function(n){t+=e.itemsPerMinute[n]}),(Math.round(100*t)/100||0)+"/m"}),t.append("text").attr("fill","white").attr("class","overclockFont").classed(K.nodeProducesPerMinText,!0).style("text-anchor","end").style("dominant-baseline","central").attr("x",-5).attr("y",-37).attr("font-size",30).text(function(e){var t=0;return Object.keys(e.itemsPerMinute||{}).forEach(function(n){t+=e.itemsPerMinute[n]}),(Math.round(100*t)/100||0)+"/m"})});e.append("g").classed(K.nodeLimitingThroughputClass,!0);M.m("."+K.nodeLimitingThroughputClass).each(function(e){var t=M.l(this);t.selectAll("."+K.nodeLimitingThroughputText).remove(),Object.keys(e.itemThroughPut||{}).forEach(function(n,r){var a=e.itemThroughPut[n];if(e.itemIconLookup){var o="LightCoral",i="node-has-problems";a.actual===a.max?(o="white",i=null):a.actual<a.max&&(o="gold");var c=e.itemIconLookup[n];t.classed("node-has-problems",!1),i&&t.classed("node-has-problems",!0),t.append("svg:image").classed(K.nodeLimitingThroughputText,!0).attr("xlink:href",function(e){return c}).attr("x",-14).attr("y",59+20*r).attr("height",20).attr("width",20),t.append("text").attr("fill","black").attr("class","overclockFont").classed(K.nodeLimitingThroughputText,!0).style("text-anchor","start").style("dominant-baseline","central").attr("stroke","black").attr("stroke-width",4).attr("x",10).attr("y",68+20*r).attr("font-size",20).text(function(e){return Math.round(100*a.actual)/100+"/"+Math.round(100*a.max)/100}),t.append("text").attr("fill",o).attr("class","overclockFont").classed(K.nodeLimitingThroughputText,!0).style("text-anchor","start").style("dominant-baseline","central").attr("x",10).attr("y",68+20*r).attr("font-size",20).text(function(e){return Math.round(100*a.actual)/100+"/"+Math.round(100*a.max)/100})}})}),Ae.call(this)},Le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:35,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:35;e.selectAll("."+K.nodeVersionTextClass).remove();var r=e.append("text").attr("fill","white").attr("class","overclockFont").classed(K.nodeVersionTextClass,!0).style("text-anchor","middle").style("dominant-baseline","central").attr("stroke","black").attr("stroke-width",4).attr("x",t).attr("y",n).attr("font-size",30);Ne(r);var a=e.append("text").attr("fill","white").attr("class","overclockFont").classed(K.nodeVersionTextClass,!0).style("text-anchor","middle").style("dominant-baseline","central").attr("x",t).attr("y",n).attr("font-size",30);Ne(a)},Me=function(e){var t=e.append("g").attr("id",function(e){return"node-level-accessor-"+e.id});Le(t)},Re=function(e){var t=e.filter(function(e){return!["Container","Logistic"].includes(e.machine.name)}).append("g").attr("text-anchor","middle").attr("dy",0);t.append("circle").attr("r",17).attr("fill","#FFFFFF").attr("cx",32).attr("cy",-38).attr("stroke","black").attr("stroke-width",1);var n=t.append("text").attr("fill","black").attr("class","overclockFont").classed(K.overclockedTextClass,!0).attr("x",32).attr("dy",-32).attr("font-size",20).attr("id",function(e){return"node-overclock-accessor-"+e.id});Ie(n)},De=function(e,t){if(!(document.activeElement&&"INPUT"===document.activeElement.nodeName||t.state.pressedKey))switch(t.setState({pressedKey:M.d.keyCode}),M.d.keyCode){case K.BACKSPACE_KEY:case K.DELETE_KEY:t.state.selectedPath?(ye.call(this,t.state.selectedPath,t),t.setState({selectedPath:null}),t.updateGraphHelper()):t.state.selectedNode&&(function(e,t){var n=t.state.selectedNode;we(t),t.graphData.links.filter(function(e){return e.source.id===n.id||e.target.id===n.id}).map(function(e){ye(e,t)}),Q(t.graphData.nodes,n)}.call(this,e,t),t.setState({selectedNode:null}),t.updateGraphHelper())}},Be=function(e){return e.attr("viewBox","0 -5 10 10").attr("markerWidth",10).attr("markerHeight",10).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5")};function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ve=function(e){function t(e){var n,r,a,o,i,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=He(t).call(this,e),n=!a||"object"!==Ge(a)&&"function"!=typeof a?qe(r):a,o=qe(n),c=function(){le.call(qe(n)),n.updateGraphHelper()},(i="analyze")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,n.state={snapToGrid:!1},n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(t,r["Component"]),n=t,i=[{key:"inflateGraphData",value:function(e){return Object(W.a)(X.a.inflate(Z.a.atob(e),{to:"string"}))}}],(o=[{key:"addNode",value:function(e){!function(e,t){var n=Object(ve.b)(M.l("#svgGroup").attr("transform"));console.error(n);var r=[],a=document.getElementById("svgParent");console.log(a,"AAAAAA");var o=a.clientWidth,i=a.clientHeight;r[0]=o/n.scaleX*.5-n.translateX/n.scaleX,r[1]=i/n.scaleY*.5-n.translateY/n.scaleY,e.id=e.id||t.id++,e.x=e.x||0,e.y=e.y||0,e.fx=r[0],e.fy=r[1],console.error(r),e.overclock=e.overclock||100,t.graphData.nodes.push(e),t.updateGraphHelper()}(e,this),console.log(JSON.stringify(e))}},{key:"resetCamera",value:function(){this.inputSvg.transition().duration(750).call(this.zoom_handler.transform,M.o),this.updateGraphHelper()}},{key:"jiggle",value:function(){this.graphData.nodes.forEach(function(e){e.x=0,e.y=0}),this.updateGraphHelper()}},{key:"fixNodes",value:function(){this.graphData.nodes.forEach(function(e){e.fx=e.x,e.fy=e.y}),this.updateGraphHelper()}},{key:"unfixNodes",value:function(){this.graphData.nodes.forEach(function(e){e.fx=null,e.fy=null,e.vx=0,e.vy=0}),this.updateGraphHelper()}},{key:"createGraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.graphData={nodes:t,links:n},this.id=Math.max.apply(Math,Fe(this.graphData.nodes.map(function(e){return e.id})))+1,this.id===Number.NEGATIVE_INFINITY&&(this.id=0),this.inputSvg=e,this.svgGroup=e.append("g").attr("class","objects").attr("id","svgGroup");var r=this.svgGroup,a=this;e.on("click",function(e){ue.call(this,a)}),M.l(window).on("keydown",function(e){De.call(this,e,a)}).on("keyup",function(e){(function(e,t){t.setState({pressedKey:null})}).call(this,e,a)}),this.zoom_handler=M.n().on("zoom",function(){return function(e){e.attr("transform",M.d.transform)}(r)}).scaleExtent([.1,6]),this.zoom_handler(e),e.on("dblclick.zoom",null);var o=r.append("defs");Be(o.append("svg:marker").attr("id","default-path-arrow").attr("refX",35)),Be(o.append("svg:marker").attr("id","highlight-path-arrow-orange").attr("fill","orange").attr("refX",24)),Be(o.append("svg:marker").attr("id","dragged-end-arrow").attr("refX",7));var i=o.append("filter").attr("id","drop-shadow").attr("height","130%").attr("width","130%").attr("filterUnits","userSpaceOnUse");i.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",5).attr("result","blur"),i.append("feOffset").attr("in","blur").attr("result","offsetBlur"),i.append("feFlood").attr("in","offsetBlur").attr("flood-color","white").attr("flood-opacity","1").attr("result","offsetColor"),i.append("feComposite").attr("in","offsetColor").attr("in2","offsetBlur").attr("operator","in").attr("result","offsetBlur");var c=i.append("feMerge");c.append("feMergeNode").attr("in","offsetBlur"),c.append("feMergeNode").attr("in","SourceGraphic"),this.dragLine=r.append("g").append("svg:path").attr("class","link dragline line-object hidden").attr("d","M0,0L0,0").attr("stroke",function(e){return M.b("#000000")}).style("marker-end","url(#dragged-end-arrow)");var l,s,u,f=r.append("g").attr("class","links-g-group"),p=r.append("g").attr("class","nodes-g-group"),d=(l=document.getElementById("svgParent"),s=l.clientWidth,u=l.clientHeight,M.h().force("link",M.f().id(function(e){return e.id}).distance(60)).force("charge",M.g().strength(20)).force("collision",M.e().radius(function(e){return 120})).force("xAxis",M.i().strength(.1).x(function(e){return e.initialX||s/2})).force("yAxis",M.j().strength(.5).y(function(e){return e.initialY||u/2})));this.graphNodesGroup=p,this.graphLinksGroup=f,this.simulation=d,this.updateGraphHelper()}},{key:"updateGraphHelper",value:function(){se.call(this,this.simulation,this.graphNodesGroup,this.graphLinksGroup)}},{key:"clearGraphDataRaw",value:function(){var e=M.l(M.l("#mainRender").node().parentElement);return M.l("#mainRender").selectAll("*").remove(),M.l("#mainRender").remove(),e.append("svg").attr("id","mainRender")}},{key:"clearGraphData",value:function(e){ue.call(this,e);var t=this.clearGraphDataRaw();this.createGraph(t)}},{key:"loadGraphData",value:function(e){var t=this.clearGraphDataRaw();this.createGraph(t,e.graphData.nodes,e.graphData.links)}},{key:"compressGraphData",value:function(){var e={satisgraphtory:{version:.01},graphData:this.graphData,playerData:{},secret:{}};return Z.a.btoa(X.a.deflate(Object(W.b)(e),{to:"string"}))}},{key:"uploadDataWithResponse",value:function(){return function(e){return console.log(e.data),new Promise(function(t,n){return fetch("https://api.myjson.com/bins/",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){if(e.uri){var n=e.uri.replace("https://api.myjson.com/bins//","");return t(encodeURIComponent(Z.a.btoa(n)))}throw new Error("Invalid save")}).catch(function(e){console.log("Fetch error:",e.message),n(e)})})}({data:this.compressGraphData()})}},{key:"componentDidMount",value:function(){this.loadGraphData(this.props.parentAccessor.state.coreGraphData)}},{key:"componentDidUpdate",value:function(e,t,n){this.state.selectedPath===t.selectedPath&&this.state.selectedNode===t.selectedNode||this.props.parentAccessor.setState({selectedPath:this.state.selectedPath,selectedNode:this.state.selectedNode})}},{key:"render",value:function(){return a.a.createElement("svg",{id:"mainRender"})}}])&&ze(n.prototype,o),i&&ze(n,i),t}(),Ye=(n(162),n(79)),We=n.n(Ye),Je=n(31),Xe=n.n(Je),Ue=n(134),Ze=n.n(Ue),Qe=n(133),$e=n.n(Qe),et=n(69),tt=n.n(et),nt=n(210),rt=n.n(nt),at=n(70),ot=n.n(at),it=n(65),ct=n.n(it),lt=n(42);function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ft(e,t){return!t||"object"!==st(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dt(e,t){return(dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ht=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ft(this,pt(t).call(this,e))).windowOnClobber=null,n.clobberList=[],n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dt(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){this.windowOnClobber=M.l(this.props.clobberedElement).on("click"),M.l(this.props.clobberedElement).on("click",this.props.onClickAway);var e=!0,t=!1,n=void 0;try{for(var r,a=document.querySelectorAll("*")[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value;this.clobberList.push(o),o.addEventListener("click",this.props.onClickAway,!0)}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}},{key:"componentWillUnmount",value:function(){M.l(this.props.clobberedElement).on("click",this.windowOnClobber);var e=!0,t=!1,n=void 0;try{for(var r,a=this.clobberList[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){r.value.removeEventListener("click",this.props.onClickAway,!0)}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}this.clobberList=[]}},{key:"render",value:function(){var e=this.props.onClickAway;return a.a.createElement(lt.a,{onClickAway:e},this.props.children)}}])&&ut(n.prototype,r),o&&ut(n,o),t}();ht.propTypes={classes:l.a.object.isRequired,clobberedElement:l.a.string.isRequired,onClickAway:l.a.func.isRequired,children:l.a.object.isRequired};var mt=Object(s.withStyles)(function(e){return{}})(ht);function yt(e){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(){return(gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wt(e,t){return(wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kt=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=vt(t).call(this,e),n=!a||"object"!==yt(a)&&"function"!=typeof a?Et(r):a,Ot(Et(n),"handleMenu",function(e){n.setState({anchorEl:e.currentTarget})}),Ot(Et(n),"handleClose",function(e){n.setState({anchorEl:null})}),Ot(Et(n),"clickAwayClose",function(e){n.state.anchorEl&&n.setState({anchorEl:null})}),n.state={anchorEl:null},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wt(e,t)}(t,a.a.Component),n=t,(r=[{key:"listItems",value:function(e,t,n){var r=this;return this.props.items.map(function(t){return a.a.createElement(rt.a,{key:t.id,className:e.tooltip,placement:"right",title:t.inputs.map(function(t,n){return a.a.createElement(a.a.Fragment,{key:t.item.id},a.a.createElement("img",{src:t.item.icon,className:0===n?e.tooltipIconFirst:e.tooltipIcon}),a.a.createElement("div",{className:e.tooltipText},t.quantity))})},a.a.createElement(We.a,{onClick:function(){var e=n.state.machine_node.machine_node;e.sort(function(e,t){return e.rank-t.rank});var a=e.filter(function(e){return e.machine_class.id===t.machine_class.id}),o=a[0];n.graphSvg.addNode({data:{recipe:t},machine:t.machine_class,allowedIn:t.inputs.map(function(e){return e.item.id}),allowedOut:[t.item.id],instance:o,upgradeTypes:a}),r.handleClose()}},a.a.createElement("img",{alt:"probably some goat image",src:t.item.icon,className:e.itemListIcon}),t.name,a.a.createElement("div",{className:e.grow})))})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.label,o=t.appObject,i=this.state.anchorEl,c=Boolean(i),l=this.listItems(n,r,o);return a.a.createElement(a.a.Fragment,{key:r},a.a.createElement(Xe.a,{className:n.paper},a.a.createElement(L.a,{"aria-owns":c?"menu-appbar":null,"aria-haspopup":"true",onClick:c?this.handleClose:this.handleMenu,className:n.button},c?a.a.createElement($e.a,null):a.a.createElement(Ze.a,null),a.a.createElement("div",{className:n.label},r)),a.a.createElement(tt.a,{className:n.popper,open:c,anchorEl:i,transition:!0,placement:"right-start"},function(t){var r=t.TransitionProps,o=t.placement;return a.a.createElement(ct.a,gt({},r,{id:"menu-list-grow-2",style:{transformOrigin:"bottom"===o?"center top":"center bottom"}}),a.a.createElement(Xe.a,{className:n.maxHeightPaper},a.a.createElement(mt,{onClickAway:e.clickAwayClose,clobberedElement:"#mainRender"},a.a.createElement(ot.a,null,l))))})))}}])&&bt(n.prototype,r),o&&bt(n,o),t}(),St=Object(s.withStyles)(function(e){return{root:{},button:{flex:"0 0 100%",justifyContent:"left",padding:10},paper:{margin:2*e.spacing.unit,display:"flex"},label:{paddingLeft:10},popper:{zIndex:1200,left:"13px !important"},itemListIcon:{height:24,width:24,paddingRight:15},tooltip:{},tooltipIcon:{height:40,display:"inline-block",paddingLeft:10},tooltipIconFirst:{height:40,display:"inline-block"},tooltipText:{fontSize:18,display:"inline-block"},maxHeightPaper:{overflowY:"auto",maxHeight:600}}})(kt),xt=n(215),Ct=n.n(xt),Pt=n(391),jt=n.n(Pt),Tt=n(211),It=n.n(Tt),Nt=n(214),At=n.n(Nt),_t=n(213),Lt=n.n(_t),Mt=n(212),Rt=n.n(Mt);function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gt(e,t){return!t||"object"!==Dt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zt(e,t){return(zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ht=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Gt(this,Ft(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zt(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.title,r=(e.contents,e.open),o=e.handleModalClose,i=e.children;return a.a.createElement(It.a,{className:t.modal,open:Boolean(r),onClose:o,id:"modal"},a.a.createElement(Rt.a,null,n),a.a.createElement(Lt.a,null,i),a.a.createElement(At.a,null,a.a.createElement(L.a,{onClick:o,color:"secondary"},"Close")))}}])&&Bt(n.prototype,r),o&&Bt(n,o),t}(),qt=Object(s.withStyles)(function(e){return{root:{}}})(Ht),Kt=n(131),Vt=n.n(Kt),Yt=n(130),Wt=n.n(Yt);function Jt(e){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ut(e){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qt(e,t){return(Qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $t=function(e){function t(e){var n,r,a,o,i,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Ut(t).call(this,e),n=!a||"object"!==Jt(a)&&"function"!=typeof a?Zt(r):a,o=Zt(n),c=function(e){n.setState({dontShow:e.target.checked}),e.target.checked?window.localStorage.setItem("dontShowAgain","1"):window.localStorage.setItem("dontShowAgain","0")},(i="handleDontShow")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c;var l=!1,s=!1;return"1"===window.localStorage.getItem("dontShowAgain")?(window.localStorage.setItem("dontShowAgain","1"),s=!0):(window.localStorage.setItem("dontShowAgain","0"),s=!1),s||(l=!0),n.state={modalOpen:l,dontShow:s},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qt(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=(t.title,this.props.children);return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ct.a,{id:"helpFab","aria-label":"help",color:"secondary",className:n.fab,onClick:function(){return e.setState({modalOpen:!0})}},a.a.createElement(jt.a,null)),a.a.createElement(qt,{title:"",open:this.state.modalOpen,handleModalClose:function(){return e.setState({modalOpen:!1})}},r,a.a.createElement(Wt.a,{control:a.a.createElement(Vt.a,{checked:this.state.dontShow,onChange:this.handleDontShow,value:"checkedA"}),label:"Don't show this message again"})))}}])&&Xt(n.prototype,r),o&&Xt(n,o),t}(),en=Object(s.withStyles)(function(e){return{fab:{position:"absolute",bottom:2*e.spacing.unit,right:2*e.spacing.unit}}})($t),tn=n(168),nn=n.n(tn),rn=n(217),an=n.n(rn),on=n(216),cn=n.n(on);function ln(e){return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function un(e,t){return!t||"object"!==ln(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fn(e){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pn(e,t){return(pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=un(this,fn(t).call(this,e))).state={modalOpen:!1},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pn(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.Icon,o=t.label,i=t.title;t.contents;return a.a.createElement(a.a.Fragment,null,a.a.createElement(nn.a,{button:!0,key:o,onClick:function(){return e.setState({modalOpen:!0})}},a.a.createElement(cn.a,{className:n.icons},a.a.createElement(r,null)),a.a.createElement(an.a,{primary:o})),a.a.createElement(qt,{title:i,open:this.state.modalOpen,handleModalClose:function(){return e.setState({modalOpen:!1})}},this.props.children))}}])&&sn(n.prototype,r),o&&sn(n,o),t}(),hn=Object(s.withStyles)(function(e){return{icons:{marginRight:0}}})(dn);n(164);function mn(e){return(mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yn(){return(yn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bn(e){return(bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function En(e,t){return(En=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var On=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=bn(t).call(this,e),n=!a||"object"!==mn(a)&&"function"!=typeof a?vn(r):a,wn(vn(n),"handleMenu",function(e){e.currentTarget!==n.state.lastTarget&&n.setState({anchorEl:e.currentTarget,selectedButton:e.currentTarget.id})}),wn(vn(n),"handleClose",function(e){n.setState({anchorEl:null,lastTarget:n.state.anchorEl,selectedButton:null},function(){return new Promise(function(e){return setTimeout(e,100)}).then(function(){return n.setState({lastTarget:null})})})}),n.state={anchorEl:null},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&En(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.resource,o=t.appObject,i=this.state.anchorEl,c=r.item.icon,l=r.item.name,s=r.purities,u=r.machine_class.icon,f=Boolean(i);return a.a.createElement(a.a.Fragment,{key:l},a.a.createElement(We.a,{"aria-owns":f?"menu-appbar":null,"aria-haspopup":"true",onClick:f?this.handleClose:this.handleMenu,selected:this.state.selectedButton===l,id:l},a.a.createElement("img",{src:c,className:n.itemListIcon}),l),a.a.createElement(tt.a,{className:n.popper,open:f,anchorEl:i,transition:!0,placement:"right-start"},function(t){var i=t.TransitionProps,c=t.placement;return a.a.createElement(ct.a,yn({},i,{id:"menu-list-grow",style:{transformOrigin:"bottom"===c?"center top":"center bottom"}}),a.a.createElement(Xe.a,null,a.a.createElement(mt,{onClickAway:e.handleClose,clobberedElement:"#mainRender"},a.a.createElement(ot.a,null,s.map(function(t){return a.a.createElement(We.a,{onClick:function(){var n=o.state.machine_node.machine_node;n.sort(function(e,t){return e.rank-t.rank});var a=n.filter(function(e){return e.machine_class.id===r.machine_class.id}),i=a[0];o.graphSvg.addNode({data:{machine:r,node:t,recipe:r,purity:t.name},machine:r.machine_class,allowedIn:[],allowedOut:[r.item.id],instance:i,upgradeTypes:a}),e.handleClose()},key:l+t.name},a.a.createElement("img",{src:u,className:n.itemListIcon}),t.name)})))))}))}}])&&gn(n.prototype,r),o&&gn(n,o),t}(),kn=Object(s.withStyles)(function(e){return{root:{},paper:{margin:2*e.spacing.unit,display:"flex"},label:{paddingLeft:10},popper:{zIndex:1200,left:"13px !important"},itemListIcon:{height:24,width:24,paddingRight:15}}})(On),Sn=n(167),xn=n.n(Sn);function Cn(e){return(Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pn(){return(Pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tn(e){return(Tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function In(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nn(e,t){return(Nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function An(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _n=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Tn(t).call(this,e),n=!a||"object"!==Cn(a)&&"function"!=typeof a?In(r):a,An(In(n),"handleMenu",function(e){e.currentTarget!==n.state.lastTarget&&n.setState({anchorEl:e.currentTarget})}),An(In(n),"handleClose",function(){n.setState({anchorEl:null,lastTarget:n.state.anchorEl},function(){return new Promise(function(e){return setTimeout(e,100)}).then(function(){return n.setState({lastTarget:null})})})}),n.state={anchorEl:null},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nn(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.listItems,o=t.label,i=t.appObject,c=this.state.anchorEl,l=Boolean(c);return a.a.createElement(a.a.Fragment,{key:o},a.a.createElement(Xe.a,{className:n.paper},a.a.createElement(L.a,{"aria-owns":l?"menu-appbar":null,"aria-haspopup":"true",onClick:l?this.handleClose:this.handleMenu,className:n.button},l?a.a.createElement($e.a,null):a.a.createElement(Ze.a,null),a.a.createElement("div",{className:n.label},o)),a.a.createElement(tt.a,{className:n.popper,open:l,anchorEl:c,transition:!0,placement:"right-start"},function(t){var n=t.TransitionProps,o=t.placement;return a.a.createElement(ct.a,Pn({},n,{id:"menu-list-grow",style:{transformOrigin:"bottom"===o?"center top":"center bottom"}}),a.a.createElement(Xe.a,null,a.a.createElement(xn.a,{onClickAway:e.handleClose},a.a.createElement(ot.a,null,Object.keys(r).map(function(e){var t=[];return["Miner"].includes(e)&&r[e].forEach(function(e){t.push(a.a.createElement(kn,{appObject:i,resource:e}))}),t})))))})))}}])&&jn(n.prototype,r),o&&jn(n,o),t}(),Ln=Object(s.withStyles)(function(e){return{root:{},button:{flex:"0 0 100%",justifyContent:"left",padding:10},paper:{margin:2*e.spacing.unit,display:"flex"},label:{paddingLeft:10},popper:{zIndex:1200,left:"13px !important"},itemListIcon:{height:24,width:24,paddingRight:15}}})(_n);function Mn(e){return(Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rn(){return(Rn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bn(e){return(Bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fn(e,t){return(Fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hn=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Bn(t).call(this,e),n=!a||"object"!==Mn(a)&&"function"!=typeof a?Gn(r):a,zn(Gn(n),"handleMenu",function(e){e.currentTarget!==n.state.lastTarget&&n.setState({anchorEl:e.currentTarget})}),zn(Gn(n),"handleClose",function(){n.setState({anchorEl:null,lastTarget:n.state.anchorEl},function(){return new Promise(function(e){return setTimeout(e,100)}).then(function(){return n.setState({lastTarget:null})})})}),n.state={anchorEl:null},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fn(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.listItems,o=(t.label,t.appObject),i=this.state.anchorEl,c=Boolean(i);return a.a.createElement(Xe.a,{className:n.paper},a.a.createElement(L.a,{"aria-owns":c?"menu-appbar":null,"aria-haspopup":"true",onClick:c?this.handleClose:this.handleMenu,className:n.button},c?a.a.createElement($e.a,null):a.a.createElement(Ze.a,null),a.a.createElement("div",{className:n.label},"Logistics")),a.a.createElement(tt.a,{className:n.popper,open:c,anchorEl:i,transition:!0,placement:"right-start"},function(t){var i=t.TransitionProps,c=t.placement;return a.a.createElement(ct.a,Rn({},i,{id:"menu-list-grow-1",style:{transformOrigin:"bottom"===c?"center top":"center bottom"}}),a.a.createElement(Xe.a,null,a.a.createElement(mt,{onClickAway:e.handleClose,clobberedElement:"#mainRender"},a.a.createElement(ot.a,null,Object.keys(r).map(function(t){var i=[];return["Miner","Logistic"].includes(t)||r[t].forEach(function(t){i.push(a.a.createElement(We.a,{onClick:function(){var n=o.state.machine_node.machine_node;n.sort(function(e,t){return e.rank-t.rank});var r=n.filter(function(e){return e.machine_class.id===t.machine_class.id}),a=r[0];o.graphSvg.addNode({data:{recipe:t},machine:t.machine_class,allowedIn:[],allowedOut:[],instance:a,upgradeTypes:r}),e.handleClose()},key:t.machine_class.name+t.machine_class.id},a.a.createElement("img",{src:t.machine_class.icon,className:n.itemListIcon}),t.machine_class.name))}),["Logistic"].includes(t)&&r[t].forEach(function(t){i.push(a.a.createElement(We.a,{onClick:function(){var n=o.state.machine_node.machine_node;n.sort(function(e,t){return e.rank-t.rank});var r=n.filter(function(e){return e.machine_class.id===t.machine_class.id&&t.name===e.name}),a=r[0];o.graphSvg.addNode({data:{recipe:t},machine:t.machine_class,allowedIn:[],allowedOut:[],instance:a,upgradeTypes:r}),e.handleClose()},key:t.name},a.a.createElement("img",{src:t.icon,className:n.itemListIcon}),t.name))}),i})))))}))}}])&&Dn(n.prototype,r),o&&Dn(n,o),t}(),qn=Object(s.withStyles)(function(e){return{root:{},button:{flex:"0 0 100%",justifyContent:"left",padding:10},paper:{margin:2*e.spacing.unit,display:"flex"},label:{paddingLeft:10},popper:{zIndex:1200,left:"13px !important"},itemListIcon:{height:24,width:24,paddingRight:15}}})(Hn),Kn=n(392),Vn=n.n(Kn),Yn=n(291),Wn=n.n(Yn),Jn=n(393),Xn=n.n(Jn);function Un(e){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qn(e){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function er(e,t){return(er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tr=function(e){function t(e){var n,r,a,o,i,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Qn(t).call(this,e),n=!a||"object"!==Un(a)&&"function"!=typeof a?$n(r):a,o=$n(n),c=function(e){console.log(e.currentTarget);for(var t=e.currentTarget.parentElement.children,r=[],a=0,o=t.length;a<o;a+=1)t[a].getAttribute("value")===e.currentTarget.getAttribute("value")?-1===n.state.selectedDrives.indexOf(t[a].getAttribute("value"))&&r.push(t[a].getAttribute("value")):t[a].querySelector("input").checked&&r.push(t[a].getAttribute("value"));n.setState({selectedDrives:r})},(i="handleChangeMultiple")in o?Object.defineProperty(o,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[i]=c,n.state={playerUnlock:n.props.playerUnlock.player_unlock,recipe:n.props.playerUnlock.recipe,selectedDrives:[]},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&er(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.parentState;e.playerUnlock;return a.a.createElement(Xe.a,{className:t.paper},a.a.createElement(v.a,{variant:"h5"},"Settings"),te("stg")?a.a.createElement(Wt.a,{control:a.a.createElement(Vt.a,{checked:n.graphSvg&&n.graphSvg.state.snapToGrid,onChange:function(){n.graphSvg.setState({snapToGrid:!n.graphSvg.state.snapToGrid})},value:"snapToGrid",className:t.checkbox}),label:"Snap To Grid",className:t.checkboxLabel}):null,a.a.createElement(L.a,{className:t.button,fullWidth:!0,onClick:function(){n.graphSvg.jiggle()}},a.a.createElement(Vn.a,null),a.a.createElement("div",{className:t.label},"Rejiggle Graph")),a.a.createElement(L.a,{className:t.button,fullWidth:!0,onClick:function(){n.graphSvg.resetCamera()}},a.a.createElement(Wn.a,null),a.a.createElement("div",{className:t.label},"Reset Camera")),a.a.createElement(L.a,{className:t.button,fullWidth:!0,onClick:function(){n.graphSvg.fixNodes()}},a.a.createElement(Wn.a,null),a.a.createElement("div",{className:t.label},"Fix Nodes")),a.a.createElement(L.a,{className:t.button,fullWidth:!0,onClick:function(){n.graphSvg.unfixNodes()}},a.a.createElement(Xn.a,null),a.a.createElement("div",{className:t.label},"Unfix Nodes")))}}])&&Zn(n.prototype,r),o&&Zn(n,o),t}(),nr=Object(s.withStyles)(function(e){return{root:{},paper:{margin:16,padding:12,display:"flex",flexDirection:"column",flexShrink:0},textField:{paddingBottom:10},button:{flex:1,marginTop:10,textAlign:"left",justifyContent:"left"},label:{paddingLeft:10},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:e.spacing.unit/4},tooltip:{},tooltipIcon:{height:40,display:"inline-block",paddingLeft:10},tooltipIconFirst:{height:40,display:"inline-block"},tooltipText:{fontSize:18,display:"inline-block"},checkbox:{paddingLeft:22},checkboxLabel:{height:30,paddingTop:30,paddingBottom:16,fontFamily:"Roboto sans-serif",fontWeight:"bold"}}})(tr),rr=n(292),ar=n.n(rr);function or(e){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ir(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cr(e){return(cr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sr(e,t){return(sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ur(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fr=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=cr(t).call(this,e),n=!a||"object"!==or(a)&&"function"!=typeof a?lr(r):a,ur(lr(n),"handleModalClose",function(){return n.setState({modalOpen:!1})}),ur(lr(n),"handleModalOpen",function(){return n.setState({modalOpen:!0})}),n.state={modalOpen:!1},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sr(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=(t.label,t.title,t.children,t.onClick);return a.a.createElement(a.a.Fragment,null,a.a.createElement(L.a,{color:"inherit",onClick:r||this.handleModalOpen},a.a.createElement(ar.a,null),a.a.createElement("div",{className:n.label},"Clear")),a.a.createElement(qt,{title:"Clear Graph?",open:this.state.modalOpen,handleModalClose:this.handleModalClose},a.a.createElement("div",{className:n.dialogContainer},a.a.createElement(v.a,{variant:"h5"},"Are you sure you want to clear everything?"),a.a.createElement(L.a,{color:"secondary",variant:"outlined",className:"".concat(n.dialogButton),onClick:function(){e.props.t.graphSvg.clearGraphData(e.props.t),e.handleModalClose()}},a.a.createElement(ar.a,null),a.a.createElement("div",{className:n.label},"Yes, I'm sure!")))))}}])&&ir(n.prototype,r),o&&ir(n,o),t}(),pr=Object(s.withStyles)(function(e){return{label:{paddingLeft:10},dialogContainer:{display:"flex",flexDirection:"column"}}})(fr),dr=n(394),hr=n.n(dr),mr=n(395),yr=n.n(mr),gr=n(218),br=n.n(gr);function vr(e){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wr(e){return(wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Or(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kr(e,t){return(kr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xr=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=wr(t).call(this,e),n=!a||"object"!==vr(a)&&"function"!=typeof a?Or(r):a,Sr(Or(n),"handleModalClose",function(){return n.setState({modalOpen:!1})}),Sr(Or(n),"handleModalOpen",function(){return n.setState({modalOpen:!0})}),n.state={modalOpen:!1,value:!0},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kr(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentDidUpdate",value:function(e,t,n){var r=this;!t.modalOpen&&this.state.modalOpen&&this.setState({value:"Loading..."},function(){r.props.t.graphSvg.uploadDataWithResponse().then(function(e){var t,n=window.location.port?":"+window.location.port:"",a=window.location.protocol+"//"+window.location.hostname+n+window.location.pathname+"#"+e+(t={},window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,n,r){t[n]=r}),Object.keys(t).length?"?"+Object.keys(t).map(function(e){return e+"="+t[e]}).join("&"):"");r.setState({value:a})})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,r=t.onClick,o=this.state.value;return a.a.createElement(a.a.Fragment,null,a.a.createElement(L.a,{color:"inherit",onClick:r||this.handleModalOpen},a.a.createElement(hr.a,null),a.a.createElement("div",{className:n.label},"Share")),a.a.createElement(qt,{title:"Share Code",open:this.state.modalOpen,handleModalClose:this.handleModalClose},a.a.createElement("div",{className:n.dialogContainer},a.a.createElement("div",null,a.a.createElement(br.a,{spellCheck:!1,inputRef:function(t){return e.inputRef=t},label:"Share Code",value:o}),a.a.createElement(L.a,{color:"inherit",className:n.inlineDialogButton,onClick:function(){return new Promise(function(t){e.inputRef.select(),document.execCommand("copy"),t(!0)}).then(function(t){e.setState({statusMessage:"Copied!"},function(){setTimeout(function(){e.setState({statusMessage:""})},3e3)})})}},a.a.createElement(yr.a,null),a.a.createElement("div",{className:n.label},"Copy"))),te(a.a.createElement(L.a,{color:"inherit",className:n.dialogButton,fullWidth:!0},a.a.createElement("div",{className:n.label},"Generate Image"))),a.a.createElement("div",{className:n.statusMessage},this.state.statusMessage))))}}])&&Er(n.prototype,r),o&&Er(n,o),t}(),Cr=Object(s.withStyles)(function(e){return{label:{paddingLeft:10},dialogContainer:{display:"flex",flexDirection:"column"},inlineDialogButton:{paddingTop:10,paddingBottom:10},dialogButton:{marginTop:10},statusMessage:{display:"flex",flexDirection:"column"}}})(xr),Pr=n(397),jr=n.n(Pr),Tr=n(396),Ir=n.n(Tr),Nr=n(132),Ar=n.n(Nr),_r=n(398),Lr=n.n(_r);function Mr(e){return(Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dr(e){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Br(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gr(e,t){return(Gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zr=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,a=Dr(t).call(this,e),n=!a||"object"!==Mr(a)&&"function"!=typeof a?Br(r):a,Fr(Br(n),"debounce",function(e,t,n){var r;return function(){var a=this,o=arguments,i=n&&!r;clearTimeout(r),r=setTimeout(function(){r=null,n||e.apply(a,o)},t),i&&e.apply(a,o)}}),Fr(Br(n),"update",function(){if(n.props.selected.machine){var e=M.l("#node-level-accessor-"+n.props.selected.id);Le(e),n.props.selected.overclock=n.state.sliderValue;var t=M.l("#node-overclock-accessor-"+n.props.selected.id);Te.call(Br(n),n.props.selected,n.state.sliderValue,t)}else{var r=M.l("#path-parent"+n.props.selected.source.id+"-"+n.props.selected.target.id);Le(r)}}),Fr(Br(n),"debouncedUpdate",n.debounce(function(){n.update()},200)),Fr(Br(n),"upgrade",function(){var e=n.props.selected.instance,t=n.props.selected.upgradeTypes.indexOf(e);(t+=1)>=n.props.selected.upgradeTypes.length||(n.props.selected.instance=n.props.selected.upgradeTypes[t],n.update(),n.setState({dummy:!n.state.dummy}))}),Fr(Br(n),"downgrade",function(){var e=n.props.selected.instance,t=n.props.selected.upgradeTypes.indexOf(e);n.props.selected.upgradeTypes.length;(t-=1)<0||(n.props.selected.instance=n.props.selected.upgradeTypes[t],n.update(),n.setState({dummy:!n.state.dummy}))}),Fr(Br(n),"changeSlider",function(e,t){n.setState({sliderValue:t},function(){n.debouncedUpdate()})}),n.state={dummy:!1,sliderValue:n.props.selected.overclock},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gr(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.label;return a.a.createElement(Xe.a,{className:t.paper},a.a.createElement(lt.b,{variant:"h5"},n),a.a.createElement(lt.b,{variant:"body1"},a.a.createElement(Ar.a,{color:"secondary",className:t.button,onClick:this.downgrade},a.a.createElement(Ir.a,null)),this.props.selected.instance.name,a.a.createElement(Ar.a,{color:"primary",className:t.button,onClick:this.upgrade},a.a.createElement(jr.a,null))),-1!==this.props.overclock?a.a.createElement(a.a.Fragment,null,a.a.createElement(lt.b,{id:"label",className:t.overclock,variant:"body1"},"Overclock: ",this.state.sliderValue,"%"),a.a.createElement(Lr.a,{classes:{root:t.slider},value:this.state.sliderValue,min:0,max:250,step:1,onChange:this.changeSlider})):null)}}])&&Rr(n.prototype,r),o&&Rr(n,o),t}(),Hr=Object(s.withStyles)(function(e){return{root:{},formControl:{maxWidth:310},paper:{position:"absolute",left:330,bottom:20,margin:16,padding:12,minWidth:210},textField:{paddingBottom:10},button:{},label:{paddingLeft:10},slider:{padding:"10px"},overclock:{paddingLeft:10}}})(zr),qr=n(399),Kr=n.n(qr);n(860),n(864);function Vr(e){return(Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yr(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Wr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jr(e,t){return!t||"object"!==Vr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xr(e){return(Xr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ur(e,t){return(Ur=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Zr=Object(s.createMuiTheme)({typography:{useNextVariants:!0},palette:{primary:{main:"#FF9100"},secondary:{main:"#FF3D00",contrastText:"#FAFAFA"}},themeName:"Pizazz Vermilion Gayal"}),Qr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Jr(this,Xr(t).call(this,e))).state={loaded:!1},n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ur(e,t)}(t,r["Component"]),n=t,(o=[{key:"getRefkeyTableFireBase",value:function(e){var t=this.state.fbdb.ref("/"+e);return new Promise(function(e){return t.once("value").then(function(t){return e(t.val())})})}},{key:"generateRecursiveStructureFireBase",value:function(e){var t=this,n=this.state.fbdb.ref("/"+e);this.globalStructure=this.globalStructure||{};var r=this.globalStructure;return n.once("value").then(function(e){return e.val()}).then(function(){var n,a=(n=regeneratorRuntime.mark(function n(a){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(a.length>0)){n.next=2;break}return n.delegateYield(regeneratorRuntime.mark(function n(){var o,i,c,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r[e]=a,o=Object.keys(a[0]).filter(function(e){return e.endsWith("_id")});case 2:if(!(o.length>0)){n.next=12;break}if(i=o.pop(),c=i.slice(0,-3),r[c]){n.next=10;break}return n.next=8,t.getRefkeyTableFireBase(c);case 8:r[c]=n.sent,Object.keys(r[c]).filter(function(e){return e.endsWith("_id")}).forEach(function(e){r[e.slice(0,-3)]||o.push(e)});case 10:n.next=2;break;case 12:l=function e(t,n){return Array.isArray(t)?(t.forEach(function(r,a){e(r,n)&&(console.error("Why are we doing this to an array?"),t[a]=n(r))}),!1):"object"!==Vr(t)||(Object.keys(t).forEach(function(r){var a=t[r];e(a,n)&&n(a,r,t)}),!1)},Object.keys(r).forEach(function(e){r[e].forEach(function(t){Object.keys(t).filter(function(e){return e.endsWith("_id")}).forEach(function(n){var a=t[n],o=n.slice(0,-3),i=r[o];delete t[n];var c=i.filter(function(e){return e.id===a});if(1!==c.length)throw new Error("Unrecognized Id "+a+" in "+n+" within "+e);t[o]=c[0]})})}),Object.keys(r).forEach(function(e){r[e].forEach(function(t){Object.keys(t).filter(function(e){return e.endsWith("_id")}).forEach(function(n){var a=t[n],o=n.slice(0,-3),i=r[o];delete t[n];var c=i.filter(function(e){return e.id===a});if(1!==c.length)throw new Error("Unrecognized Id "+a+" in "+n+" within "+e);t[o]=c[0]}),Object.keys(t).filter(function(e){return!e.endsWith("_id")}).forEach(function(e){var n=t[e];l(n,function(e,t,n){if(t.endsWith("_id")){var a=e,o=t.slice(0,-3),i=r[o];delete n[t];var c=i.filter(function(e){return e.id===a});if(1!==c.length)throw new Error("Unrecognized Id "+a+" in table "+t+" within "+n);n[o]=c[0]}else"string"==typeof n[t]&&n[t].startsWith("http")&&((new Image).src=n[t])})})})});case 15:case"end":return n.stop()}},n)})(),"t0",2);case 2:return n.abrupt("return",r);case 3:case"end":return n.stop()}},n)}),function(){var e=this,t=arguments;return new Promise(function(r,a){var o=n.apply(e,t);function i(e){Yr(o,r,a,i,c,"next",e)}function c(e){Yr(o,r,a,i,c,"throw",e)}i(void 0)})});return function(e){return a.apply(this,arguments)}}())}},{key:"componentDidMount",value:function(){var e=this;C.a("UA-136827615-1"),C.b(window.location.pathname+window.location.search),window.addEventListener("hashchange",function(){document.location.reload()},!1),new Promise(function(e,t){if(window.location.hash){var n=null;return n=-1===window.location.hash.indexOf("?")?window.location.hash.slice(1):window.location.hash.slice(1,window.location.hash.indexOf("?")),fetch("https://api.myjson.com/bins//"+Z.a.atob(decodeURIComponent(n)),{method:"GET"}).then(function(e){return e.json()}).then(function(t){e($(t.data))}).catch(function(t){console.log("Fetch error:",t.message),e($(ee))})}e($(ee))}).then(function(t){e.setState({coreGraphData:t},function(){var t=Kr.a.initializeApp({apiKey:"AIzaSyC6qyWIC6Yvc3NmTXYUzQ-jcFE1p3VsKX4",authDomain:"satisgraphtory.firebaseapp.com",databaseURL:"https://satisgraphtory.firebaseio.com",projectId:"satisgraphtory",storageBucket:"satisgraphtory.appspot.com",messagingSenderId:"463653345773"}).database();e.setState({fbdb:t,loaded:!0},function(){var t=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return function(){return e.generateRecursiveStructureFireBase(t).then(function(r){var a,o,i;e.setState((i=r,(o=t)in(a={})?Object.defineProperty(a,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[o]=i,a),function(){console.debug("Loaded",t),n()})})}},n=function(){e.setState({isLoaded:!0})};["spring","recipe","path_type","machine_node","player_unlock","machine_class","item","spring_type","purity_type","node_type","machine_version","machine_class"].forEach(function(e){n=t(e,n)}),n()})})})}},{key:"generateNodeList",value:function(){var e=this,t={},n={};return this.state.recipe&&this.state.recipe.recipe.forEach(function(e){var r=t[e.machine_class.name]||[];r.push(e),t[e.machine_class.name]=r,n[e.machine_class.name]=e.machine_class.plural}),Object.keys(t).map(function(r){return a.a.createElement(St,{appObject:e,label:n[r],key:r,items:t[r]})})}},{key:"generateContainerList",value:function(){var e={};return this.state.purity_type&&this.state.spring&&this.state.spring.spring.forEach(function(t){var n=e[t.spring_type.name]||[];n.push(t),e[t.spring_type.name]=n}),e.Logistic=this.state.machine_node.machine_node.filter(function(e){return"Logistic"===e.machine_class.name}),a.a.createElement(a.a.Fragment,null,a.a.createElement(qn,{label:"Logistics",appObject:this,listItems:e}))}},{key:"generateUnlocksList",value:function(){var e=this;return this.state.player_unlock&&this.state.player_unlock.player_unlock.forEach(function(t){e.state.recipe.recipe.filter(function(e){return e.player_unlock&&e.player_unlock.id===t.id})[0]}),a.a.createElement("div",null,"hello")}},{key:"generateSpringList",value:function(){this.generateUnlocksList();var e={};return this.state.spring&&this.state.spring.spring.forEach(function(t){var n=e[t.spring_type.name]||[];n.push(t),e[t.spring_type.name]=n}),a.a.createElement(Ln,{label:"Miners",listItems:e,appObject:this})}},{key:"render",value:function(){var e=this.props.classes;if(!this.state.isReady)return a.a.createElement(q,{ready:this.state.isLoaded,parentState:this});var t=this;return a.a.createElement("div",{className:e.root},a.a.createElement(m.a,null),a.a.createElement(s.MuiThemeProvider,{theme:Zr},a.a.createElement(d.a,{position:"fixed",className:e.appBar},a.a.createElement(g.a,null,a.a.createElement("img",{alt:"wow so satis factory",className:e.logo,src:"https://raw.githubusercontent.com/rhocode/rhocode.github.io/master/img/satisgraphtory.png",title:"logo"}),a.a.createElement("div",{className:e.grow}),te("opt")?a.a.createElement(L.a,{color:"inherit"},a.a.createElement(I.a,null),a.a.createElement("div",{className:e.label},"Optimize")):null,a.a.createElement(L.a,{color:"inherit",onClick:function(){return t.graphSvg.analyze()}},a.a.createElement(A.a,null),a.a.createElement("div",{className:e.label},"Analyze")),a.a.createElement(Cr,{t:t}),a.a.createElement(pr,{t:t}))),a.a.createElement(en,null,a.a.createElement(v.a,{variant:"h4"},"Welcome to SatisGraphtory!"),a.a.createElement(v.a,{variant:"body1"},"Thanks for checking out our tool! If you have any questions, suggestions, or feedback, feel free to join our ",a.a.createElement("a",{href:"https://discord.gg/ZRpcgqY"},"Discord server"),"! We're always looking to add more functionality!"),a.a.createElement("br",null),a.a.createElement(v.a,{variant:"h5"},"This tool will always be free."),a.a.createElement(v.a,{variant:"body1"},"If you would like to contribute, contact us on Discord! We'd love your help!"),a.a.createElement("br",null),a.a.createElement(v.a,{variant:"h5"},"Graph Basics"),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(v.a,{variant:"body1"},"Use the ",a.a.createElement("b",null,"left menu")," to ",a.a.createElement("b",null,"add")," machines to the diagram")),a.a.createElement("li",null,a.a.createElement(v.a,{variant:"body1"},a.a.createElement("b",null,"CLICK")," on a node/path to ",a.a.createElement("b",null,"select")," it")),a.a.createElement("li",null,a.a.createElement(v.a,{variant:"body1"},"Press ",a.a.createElement("b",null,"BACKSPACE")," on a selected node/path to delete it")),a.a.createElement("li",null,a.a.createElement(v.a,{variant:"body1"},"Hold down ",a.a.createElement("b",null,"SHIFT")," and ",a.a.createElement("b",null,"drag")," from node to node to create belts")),a.a.createElement("li",null,a.a.createElement(v.a,{variant:"body1"},"Use ",a.a.createElement("b",null,"MOUSE SCROLL")," to control overclock (black text in the white circle)"))),a.a.createElement(v.a,{variant:"h5"},"Sharing"),a.a.createElement(v.a,{variant:"body1"},"Generate a share code by using the Share button in the top right."),a.a.createElement("br",null),a.a.createElement(v.a,{variant:"h5"},"Legend"),a.a.createElement(v.a,{variant:"body1"},a.a.createElement("span",{style:{color:"orange"}},"Orange")," numbers means the machine wastes time doing nothing."),a.a.createElement(v.a,{variant:"body1"},a.a.createElement("span",{style:{color:"LightCoral"}},"Red")," numbers means the machine isn't processing fast enough."),a.a.createElement(v.a,{variant:"body1"},a.a.createElement("span",{style:{color:"Blue"}},"Blue")," numbers means the belt capacity was overridden (and you need to fix it ASAP!)"),a.a.createElement("br",null),a.a.createElement(v.a,{variant:"body1"},"Revisit these instructions anytime by clicking on the ",a.a.createElement("b",null,"?")," in the bottom right.")),this.state.selectedNode&&this.state.selectedNode.upgradeTypes.length>1||this.state.selectedPath&&this.state.selectedPath.upgradeTypes&&this.state.selectedPath.upgradeTypes.length>1?a.a.createElement(Hr,{label:"Options",graphSvg:this.graphSvg,overclock:this.state.selectedNode?this.state.selectedNode.overclock:-1,selected:this.state.selectedNode||this.state.selectedPath}):null,a.a.createElement(f.a,{className:e.drawer,variant:"permanent",classes:{paper:e.drawerPaper}},a.a.createElement(w.a,null,a.a.createElement(v.a,{variant:"h5",className:e.drawerTitle},"Nodes"),this.generateNodeList(),this.generateSpringList(),this.generateContainerList()),a.a.createElement(k.a,null),a.a.createElement(nr,{parentState:this,playerUnlock:this.state.player_unlock}),a.a.createElement(k.a,null),a.a.createElement(w.a,null,a.a.createElement(hn,{Icon:x.a,label:"About/Disclaimers",title:"About/Disclaimers"},a.a.createElement(v.a,{variant:"body1"},"Created by ",a.a.createElement("a",{href:"https://github.com/tehalexf"},"Alex")," and ",a.a.createElement("a",{href:"https://github.com/thinkaliker"},"Adam")," (",a.a.createElement("a",{href:"https://twitter.com/thinkaliker"},"@thinkaliker"),")."),a.a.createElement(v.a,{variant:"body1"},"Not officially affiliated with Satisfactory, Coffee Stain Studios AB, or THQ Nordic AB."),a.a.createElement(v.a,{variant:"body1"},"Images sourced from the Satisfactory Wiki, which is sourced from Coffee Stain Studios AB's Satisfactory.")),a.a.createElement(hn,{Icon:j.a,label:"Known Issues",title:"Known Issues"},a.a.createElement("ul",null,a.a.createElement("li",null,"Resource nodes do not have purities displayed on the graph."),a.a.createElement("li",null,"No option yet to hide belt and factory numbers."))))),a.a.createElement("div",{id:"svgParent",className:e.content},this.state.loaded?a.a.createElement(Ve,{parentAccessor:this,ref:function(e){t.graphSvg=e}}):a.a.createElement("div",null))))}}])&&Wr(n.prototype,o),i&&Wr(n,i),t}();Qr.propTypes={classes:l.a.object.isRequired};var $r=Object(s.withStyles)(function(e){return{root:{display:"flex",flexGrow:1,flexBasis:"auto"},appBar:{zIndex:e.zIndex.drawer+1},drawer:{width:310,flexShrink:0,display:"flex",paddingTop:64},drawerPaper:{width:310,position:"unset"},drawerTitle:{paddingLeft:15,paddingTop:5},content:{display:"flex",flexGrow:1,paddingTop:64},toolbar:e.mixins.toolbar,logo:{width:310},grow:{flexGrow:1},pathIcon:{height:15,width:15,display:"inline-block"},pathText:{display:"inline-block"},paper:{margin:2*e.spacing.unit,display:"flex"},button:{flex:"0 0 100%"},label:{paddingLeft:10},inlineDialogButton:{paddingTop:10,paddingBottom:10},dialogButton:{marginTop:10},dialogContainer:{display:"flex",flexDirection:"column"},clearButton:{paddingTop:20}}})(Qr);n(968),n(973);i.a.render(a.a.createElement($r,null),document.getElementById("app"))},973:function(e,t){}});
//# sourceMappingURL=main.js.map