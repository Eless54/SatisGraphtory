{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Loader.jsx","webpack:///./src/components/newData.js","webpack:///./src/components/GraphSvg/constants.jsx","webpack:///./src/components/GraphSvg/algorithms.jsx","webpack:///./src/components/GraphSvg/util.jsx","webpack:///./src/components/TinyQueue.jsx","webpack:///./src/components/GraphSvg/graphActions.jsx","webpack:///./src/components/GraphSvg/mouseEvents.jsx","webpack:///./src/components/GraphSvg/edgeActions.jsx","webpack:///./src/components/GraphSvg/nodeActions.jsx","webpack:///./src/components/GraphSvg/keyboardEvents.jsx","webpack:///./src/components/GraphSvg/markerActions.jsx","webpack:///./src/components/GraphSvg/index.js","webpack:///./src/components/ClickAwayListenerV2.jsx","webpack:///./src/components/SidebarButton.jsx","webpack:///./src/components/PopupDialog.jsx","webpack:///./src/components/FabPopup.jsx","webpack:///./src/components/SidebarPopup.jsx","webpack:///./src/components/InnerNestedSidebarButton.jsx","webpack:///./src/components/NestedSidebarButton.jsx","webpack:///./src/components/SimpleSidebarButton.jsx","webpack:///./src/components/SidebarPanel.jsx","webpack:///./src/components/ClearButton.jsx","webpack:///./src/components/ShareButton.jsx","webpack:///./src/components/LoadButton.jsx","webpack:///./src/components/SelectorPanel.jsx","webpack:///./src/components/App.js","webpack:///./src/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","loading","Loader","props","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","React","Component","previousProps","previousState","ready","parentState","setState","isReady","console","info","d3","_this$props","classes","react_default","a","createElement","Fragment","className","Math","floor","random","withStyles","theme","root","schemaBuilder","lf","schema","createTable","addColumn","Type","INTEGER","addPrimaryKey","BOOLEAN","STRING","addNullable","OBJECT","getTableEntryIdByName","table","db","tableRef","getSchema","Promise","resolve","reject","select","from","where","eq","exec","then","rows","id","getTableEntries","baseUrl","parseRecipeIngredients","recipes","_ref","_asyncToGenerator","regeneratorRuntime","mark","_callee","recipe","keys","item","wrap","_context","prev","next","sent","abrupt","stop","_x","arguments","generateSpringList","_ref2","_callee2","ret","types","machine_type_miner","machine_type_container","spring_type_miner","spring_type_container","purity_types","ore","structure","container","_context2","item_id","machine_class_id","spring_type_id","purities","_x2","quantity","icon","representation","rank","speed","machine_version_id","plural","node_type_id","input_slots","output_slots","power","hidden","inputs","time","player_unlock_id","createDatabase","_ref3","_callee5","_context7","connect","_ref4","_callee4","promiseList","_loop","_context6","obj","valuePromiseRows","_loop2","_context5","forEach","row","index","createRow","blockingPromises","_context4","map","_ref5","_callee3","k","_context3","_x4","all","delegateYield","insertOrReplace","into","values","_x3","constants","lineObjectClass","lineParentObjectClass","lineHitboxObjectClass","lineStylingPathClass","lineStylingArrowClass","lineStylingFullClass","overclockedTextClass","nodeVersionTextClass","nodeRequirementsIconClass","nodeSurplusIconClass","nodeRequirementsSubIconClass","nodeProducesClass","nodeSurplusClass","nodeProducesPerMinText","nodeLimitingThroughputText","nodeLimitingThroughputClass","lineLimitedThroughputText","lineLimitedThroughputClass","selectedClass","selectedNodeClass","selectedLineClass","connectableClass","graphNodeClass","graphNodeHoverClass","overclockedArcClass","graphNodeGrabbedClass","graphNodeIdBase","svgGraphClass","activeEditId","BACKSPACE_KEY","DELETE_KEY","ENTER_KEY","nodeRadius","strongly_connected_components_standalone","graph","index_counter","stack","lowlink","node","includes","_strong_connect","parseInt","toString","successor","undefined","Error","JSON","stringify","min","connected_component","pop","spliceUtil","indexOf","TinyQueue","compare","defaultCompare","TinyQueue_classCallCheck","reheapify","_down","_up","top","bottom","pos","parent","current","halfLength","left","best","right","b","analyzeGraph","_this","nodeUnion","Set","nodeIn","nodeOut","add","nodeUnionArray","Array","nodeLookup","graphData","nodes","filter","elem","childProvides","hasSources","containedItems","machine","allowedIn","allowedOut","nodeOutWithSets","componentsList","superNodeGraphLookup","superNodeGraphLookupInflated","lookupArray","list","derivedGraphOutgoing","ids","thisNode","derivedGraphAccessor","thisId","derivedGraphIncoming","immutableDerivedGraphIncoming","myTinyQueue","concat","_toConsumableArray","size","providedThroughput","itemLookup","parentAccessor","state","efficiency","itemThroughPut","itemsPerMinute","internalError","location","search","workaroundHack","rec","log","itemIconLookup","links","link","tempIndex","forceOverwritable","thisNodeInflated","outgoing","nodeGroupSource","nodeGroupTarget","origin","targets","nodeGroupSourceThroughput","throughput","nodeSpeed","instance","overclock","provided","purity","fetchedPurity","actualPurity","maxThroughput","source","_defineProperty","max","actual","resources","providedSet","provideRaw","provide","parse","maxItemsPerSecLimiter","calculatedItemPerSecond","reconstructionMultiplier","itemPerSec","providedItem","resourceCount","missing","efficiencies","Infinity","inp","providedQuantity","has","resourceThroughputNeeded","calculatedThroughput","maxThroughputPerItem","totalItemThroughput","totalLinkThroughput","totalItemThroughputByItem","linkPairs","outgoingNode","sources","target","foundLink","localItemThroughput","q","e","tmp","reduce","sort","t1","t2","processingType","remainingItemProcessing","remainingLinkPairs","pair","limitedSpeed","fraction","itemsUsed","itemRaw","itemPerSecBeforeBeltLimiting","limitedItemPerSecByBelt","beltMaxForThisEntry","loopedNodes","itemPerNode","resultantResource","nodeInitial","initialItemPerSec","initialNode","previousOutput","outputIterator","visitedNodes","_loop3","theseResources","outNode","delta","round","v","_ret","graphActions_typeof","visit","nodeId","linkSpeed","totalItems","outerNode","provideByItem","thisProvide","totalCalculated","localModifier","propagateNodeToEdgesRevised","delete","editEfficiencyArc","updateGraph","simulation","graphNodesGroup","graphLinksGroup","_this2","incoming","open_in_slots","open_out_slot","recalculateStorageContainers","drag","clickDistance","on","graphSvg","shiftHeld","mouseDragSource","active","alphaTarget","restart","wasFixed","fx","fy","dragLine","classed","attr","x","y","svgGroup","wasMoved","sourceEvent","stopImmediatePropagation","mouseOverNode","addPath","graphNodesData","selectAll","graphNodesEnter","enter","append","wheelZoomCalculation","node_clicked","remove_select_from_nodes","node_mouse_over","node_mouse_out","node_mouse_down","node_mouse_up","exit","remove","addEfficiencyArc","addNodeImage","insertNodeOverclock","insertNodeTier","insertComponents","merge","graphLinksData","graphLinksEnter","linkFullObject","insertEdgeLabel","pathMouseClick","handleTick","force","callback","deselect_path_and_nodes","selectedPath","selectedNode","alpha","calculateLabelPositions","each","vx","edgeActions_toConsumableArray","globalProvideMap","reverseTraversalStack","combinedProvides","combinedProvidesSource","allowed","nodeGroup","propagateNodeToEdgesReversed","passedThis","sourceChecker","targetChecker","specialSource","specialTarget","mergerTarget","mergerSource","targetSlotsUsed","error","path_type","path1","path2","upgrades","path","newEdge","upgradeTypes","usedOut","usedIn","updateGraphHelper","removePath","sharedItems","parentElement","link_label","pathLength","getTotalLength","point","getPointAtLength","updateNodeTierExternal","edgeThis","definedColor","style","text","previouslySelected","datum","shiftKey","sourceId","percentage_metric","offset","endOffset","endOffsetRaw","percentage","innerRadius","outerRadius","arc","startAngle","PI","endAngle","overClockCalculation","roughEstimate","deltaY","updateOverclock","textElement","updateNodeTier","machine_version","forceUpdateComponentLabel","elementsToUpdate","itemAccessor","allowedInRemaining","flat","element","fetchRemainingIn","findItem","outputtedItems","remaining","findSuitableSource","allowedOutRemaining","fetchRemainingOut","outputtedItemsIn","findSuitableTarget","nodeThis","containedItem","combinedSum","el","backgroundText","tspan","gEl","svgKeyDown","document","activeElement","nodeName","pressedKey","keyCode","appendMarkerAttributes","marker","GraphSvg","GraphSvg_classCallCheck","GraphSvg_getPrototypeOf","GraphSvg_assertThisInitialized","nodeData","zoomData","parseSvg","viewCenter","bodyEl","getElementById","width","clientWidth","height","clientHeight","scaleX","translateX","scaleY","translateY","add_node","inputSvg","transition","duration","zoom_handler","transform","vy","GraphSvg_toConsumableArray","Number","NEGATIVE_INFINITY","graphObjects","zoom_actions","scaleExtent","defs","feMerge","distance","strength","radius","initialX","initialY","svg","clearGraphDataRaw","createGraph","compressedData","version","playerData","secret","Base64","btoa","pako","deflate","to","inflate","atob","loadGraphData","inflateGraphData","analyze","prevProps","prevState","snapshot","ClickAwayListenerV2","ClickAwayListenerV2_classCallCheck","ClickAwayListenerV2_possibleConstructorReturn","ClickAwayListenerV2_getPrototypeOf","windowOnClobber","clobberList","clobberedElement","onClickAway","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","querySelectorAll","iterator","done","addEventListener","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","removeEventListener","index_es","children","propTypes","PropTypes","isRequired","string","func","SidebarButton","SidebarButton_classCallCheck","SidebarButton_getPrototypeOf","SidebarButton_defineProperty","SidebarButton_assertThisInitialized","event","currentTarget","lastTarget","anchorEl","setTimeout","label","appObject","open","Boolean","listItems","items","Tooltip_default","tooltip","placement","title","src","tooltipIconFirst","tooltipIcon","tooltipText","MenuItem_default","onClick","machine_nodes","machine_node","node1","node2","machine_class","addNode","dict","handleClose","alt","itemListIcon","grow","Paper_default","paper","Button_default","aria-owns","aria-haspopup","handleMenu","button","AddBox_default","Popper_default","popper","TransitionProps","Grow_default","_extends","transformOrigin","components_ClickAwayListenerV2","MenuList_default","flex","justifyContent","padding","margin","spacing","unit","display","paddingLeft","zIndex","paddingRight","fontSize","PopupDialog","PopupDialog_classCallCheck","PopupDialog_possibleConstructorReturn","PopupDialog_getPrototypeOf","contents","handleModalClose","Dialog_default","onClose","DialogTitle_default","DialogContent_default","DialogActions_default","color","modal","position","backgroundColor","palette","background","boxShadow","shadows","outline","FabPopup","FabPopup_classCallCheck","FabPopup_possibleConstructorReturn","FabPopup_getPrototypeOf","modalOpen","Fab_default","aria-label","fab","Help_default","components_PopupDialog","SidebarPopup","SidebarPopup_classCallCheck","SidebarPopup_possibleConstructorReturn","SidebarPopup_getPrototypeOf","Icon","ListItem_default","ListItemIcon_default","icons","ListItemText_default","primary","marginRight","InnerNestedSidebarButton","InnerNestedSidebarButton_classCallCheck","InnerNestedSidebarButton_getPrototypeOf","InnerNestedSidebarButton_defineProperty","InnerNestedSidebarButton_assertThisInitialized","selectedButton","resource","machineIcon","selected","InnerNestedSidebarButton_extends","NestedSidebarButton","NestedSidebarButton_classCallCheck","NestedSidebarButton_getPrototypeOf","NestedSidebarButton_defineProperty","NestedSidebarButton_assertThisInitialized","NestedSidebarButton_extends","ClickAwayListener_default","returnDivList","components_InnerNestedSidebarButton","SimpleSidebarButton","SimpleSidebarButton_classCallCheck","SimpleSidebarButton_getPrototypeOf","SimpleSidebarButton_defineProperty","SimpleSidebarButton_assertThisInitialized","SimpleSidebarButton_extends","SidebarPanel","SidebarPanel_classCallCheck","SidebarPanel_getPrototypeOf","SidebarPanel_assertThisInitialized","options","getAttribute","selectedDrives","querySelector","checked","playerUnlock","player_unlock","Typography_default","variant","fullWidth","jiggle","Shuffle_default","resetCamera","Replay_default","fixNodes","unfixNodes","Undo_default","flexDirection","flexShrink","textField","paddingBottom","marginTop","chips","flexWrap","chip","ClearButton","ClearButton_classCallCheck","ClearButton_getPrototypeOf","ClearButton_defineProperty","ClearButton_assertThisInitialized","handleModalOpen","Delete_default","dialogContainer","dialogButton","clearGraphData","ShareButton","ShareButton_classCallCheck","ShareButton_getPrototypeOf","ShareButton_defineProperty","ShareButton_assertThisInitialized","compressGraphData","Share_default","TextField_default","inputRef","ref","inlineDialogButton","execCommand","statusMessage","FileCopy_default","paddingTop","LoadButton","LoadButton_classCallCheck","LoadButton_getPrototypeOf","LoadButton_defineProperty","LoadButton_assertThisInitialized","inputValue","Input_default","onChange","catch","SelectorPanel","SelectorPanel_classCallCheck","SelectorPanel_getPrototypeOf","SelectorPanel_defineProperty","SelectorPanel_assertThisInitialized","update","dummy","IconButton_default","upgrade","ArrowUpward_default","downgrade","ArrowDownward_default","formControl","maxWidth","drawerWidth","minWidth","createMuiTheme","typography","useNextVariants","main","App","App_classCallCheck","App_possibleConstructorReturn","App_getPrototypeOf","loaded","results","startingTable","starting","globalStructure","refKeysToProcess","refKey","tableName","recursiveFind","str","endsWith","getRefkeyTable","functionToApply","isArray","App_typeof","rowKey","refId","associatedData","possibleData","rowValue","id_name","startsWith","Image","_this3","generateRecursiveStructure","spring","purity_type","isLoaded","_this4","recipesByMachineClass","machineClassPlural","thisList","components_SidebarButton","springByClass","spring_type","components_SimpleSidebarButton","_this5","generateUnlocksList","components_NestedSidebarButton","components_Loader","CssBaseline_default","styles","AppBar_default","appBar","Toolbar_default","logo","disabled","OfflineBolt_default","SettingsInputComponent_default","components_ShareButton","components_LoadButton","components_ClearButton","components_FabPopup","components_SelectorPanel","Drawer_default","drawer","drawerPaper","List_default","drawerTitle","generateNodeList","generateContainerList","Divider_default","components_SidebarPanel","components_SidebarPopup","InfoIcon","href","WarningIcon","content","components_GraphSvg","flexGrow","flexBasis","toolbar","mixins","pathIcon","pathText","clearButton","ReactDOM","render","components_App"],"mappings":"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","file":"main.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([450,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import React from 'react';\nimport {withStyles} from '@material-ui/core';\nimport * as d3 from 'd3';\n\nconst loading = [\n  'Loading...',\n  'Burning Coal...',\n  'Deleting Steam Keys...',\n  'Exploiting Resources...',\n  'Petting Lizard Doggo...',\n  'Adding Pipes...',\n  'Adding Mana...',\n  'Spilling Coffee...',\n  'Becoming A Goat...',\n  'Charging Batteries...'\n];\n\nexport const styles = theme => ({\n  root: {},\n});\n\nclass Loader extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidUpdate(previousProps, previousState) {\n    if (this.props.ready === true && !previousProps.ready) {\n      this.props.parentState.setState({isReady: true}, () => {\n        console.info('App set as \"Ready\"', d3);\n      });\n    }\n  }\n\n  render() {\n    const {ready, parentState, classes} = this.props;\n    return (\n      <React.Fragment>\n        <div className=\"loader-spinner\"/>\n        <div className=\"align-loading\">\n          <div className='loading-text align-loading-text'>{loading[Math.floor(Math.random() * loading.length)]}</div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default withStyles(styles)(Loader);","import lf from 'lovefield';\n\n/** @namespace lf.Type */\nconst schemaBuilder = lf.schema.create('test', 6);\n\nschemaBuilder.createTable('node_type')\n  .addColumn('id', lf.Type.INTEGER)\n  .addPrimaryKey(['id'])\n  .addColumn('hidden', lf.Type.BOOLEAN)\n  .addColumn('name', lf.Type.STRING);\n\nschemaBuilder.createTable('machine_node_type')\n  .addColumn('id', lf.Type.INTEGER)\n  .addPrimaryKey(['id'])\n  .addColumn('name', lf.Type.STRING)\n  .addColumn('hidden', lf.Type.BOOLEAN);\n\nschemaBuilder.createTable('machine_version')\n  .addColumn('id', lf.Type.INTEGER)\n  .addPrimaryKey(['id'])\n  .addColumn('hidden', lf.Type.BOOLEAN)\n  .addColumn('color', lf.Type.STRING)\n  .addColumn('rank', lf.Type.INTEGER)\n  .addColumn('representation', lf.Type.STRING)\n  .addColumn('name', lf.Type.STRING)\n  .addNullable(['color', 'rank']);\n\nschemaBuilder.createTable('machine_class')\n  .addColumn('id', lf.Type.INTEGER)\n  .addPrimaryKey(['id'])\n  .addColumn('name', lf.Type.STRING)\n  .addColumn('icon', lf.Type.STRING)\n  .addNullable(['icon'])\n  .addColumn('hidden', lf.Type.BOOLEAN)\n  .addColumn('plural', lf.Type.STRING);\n\nschemaBuilder.createTable('machine_node')\n  .addColumn('id', lf.Type.INTEGER)\n  .addColumn('speed', lf.Type.INTEGER)\n  .addColumn('power', lf.Type.INTEGER)\n  .addNullable(['power'])\n  .addPrimaryKey(['id'])\n  .addColumn('name', lf.Type.STRING)\n  .addColumn('hidden', lf.Type.BOOLEAN)\n  .addColumn('node_type_id', lf.Type.STRING)\n  .addColumn('icon', lf.Type.STRING)\n  .addColumn('input_slots', lf.Type.INTEGER)\n  .addColumn('output_slots', lf.Type.INTEGER);\n\n\nschemaBuilder.createTable('path_type')\n  .addColumn('id', lf.Type.INTEGER)\n  .addPrimaryKey(['id'])\n  .addColumn('name', lf.Type.STRING)\n  .addColumn('speed', lf.Type.INTEGER)\n  .addColumn('rank', lf.Type.INTEGER)\n  .addColumn('machine_class_id', lf.Type.INTEGER)\n  .addNullable(['machine_class_id'])\n  .addColumn('hidden', lf.Type.BOOLEAN);\n\nschemaBuilder.createTable('purity_type')\n  .addColumn('id', lf.Type.INTEGER)\n  .addPrimaryKey(['id'])\n  .addColumn('name', lf.Type.STRING)\n  .addColumn('hidden', lf.Type.BOOLEAN)\n  .addColumn('quantity', lf.Type.INTEGER);\n\nschemaBuilder.createTable('spring_type')\n  .addColumn('id', lf.Type.INTEGER)\n  .addPrimaryKey(['id'])\n  .addColumn('name', lf.Type.STRING)\n  .addColumn('hidden', lf.Type.BOOLEAN);\n\nschemaBuilder.createTable('spring')\n  .addColumn('id', lf.Type.INTEGER)\n  .addPrimaryKey(['id'])\n  .addColumn('spring_type_id', lf.Type.INTEGER)\n  .addColumn('machine_class_id', lf.Type.INTEGER)\n  .addColumn('item_id', lf.Type.INTEGER)\n  .addColumn('icon', lf.Type.STRING)\n  .addNullable(['item_id', 'icon'])\n  .addColumn('hidden', lf.Type.BOOLEAN)\n  .addColumn('purities', lf.Type.OBJECT);\n\nschemaBuilder.createTable('item')\n  .addColumn('id', lf.Type.INTEGER)\n  .addPrimaryKey(['id'])\n  .addColumn('name', lf.Type.STRING)\n  .addColumn('icon', lf.Type.STRING)\n  .addColumn('hidden', lf.Type.BOOLEAN);\n\nschemaBuilder.createTable('recipe')\n  .addColumn('id', lf.Type.INTEGER)\n  .addPrimaryKey(['id'])\n  .addColumn('name', lf.Type.STRING)\n  .addColumn('inputs', lf.Type.OBJECT)\n  .addColumn('machine_class_id', lf.Type.INTEGER)\n  .addColumn('item_id', lf.Type.INTEGER) // The output Item Id\n  .addColumn('time', lf.Type.INTEGER)\n  .addColumn('quantity', lf.Type.INTEGER)\n  .addColumn('power', lf.Type.INTEGER)\n  .addColumn('hidden', lf.Type.BOOLEAN)\n  .addColumn('player_unlock_id', lf.Type.INTEGER)\n  .addColumn('icon', lf.Type.STRING)\n  .addNullable(['item_id', 'icon', 'player_unlock_id']);\n\nschemaBuilder.createTable('player_unlock')\n  .addColumn('id', lf.Type.INTEGER)\n  .addPrimaryKey(['id'])\n  .addColumn('name', lf.Type.STRING)\n  .addColumn('chip_name', lf.Type.STRING)\n  .addNullable(['chip_name'])\n  .addColumn('hidden', lf.Type.BOOLEAN);\n\nconst getTableEntryIdByName = (table, name) => {\n  return (db) => {\n    const tableRef = db.getSchema().table(table);\n    return new Promise((resolve, reject) => {\n      db.select().from(tableRef).where(tableRef.name.eq(name)).exec()\n        .then((rows) => {\n          if (rows.length == 1) {\n            resolve(rows[0].id);\n          } else {\n            reject('No element found or too many matching rows: ' + table + '|' + name + '|' + rows);\n          }\n        });\n    });\n  };\n};\n\nconst getTableEntries = (table, db) => {\n  const tableRef = db.getSchema().table(table);\n  return new Promise((resolve) => {\n    db.select().from(tableRef).exec()\n      .then((rows) => {\n        resolve(rows);\n      });\n  });\n};\n\nconst baseUrl = 'https://raw.githubusercontent.com/rhocode/rhocode.github.io/master/img/satoolsfactory_icons/';\n\nconst parseRecipeIngredients = recipes => {\n  return async db => {\n    for (let i = 0; i < recipes.length; i++) {\n      const recipe = recipes[i];\n      const keys = Object.keys(recipe);\n      for (let j = 0; j < keys.length; j++) {\n        const item = recipe[keys[j]];\n        if (typeof item == 'function') {\n          recipe[keys[j]] = await item(db);\n        }\n      }\n    }\n\n    return recipes;\n  };\n};\n\nconst generateSpringList = async db => {\n  const ret = [];\n  const types = ['Coal Ore', 'Iron Ore', 'Limestone Ore', 'Copper Ore', 'Caterium Ore'];\n  const machine_type_miner = await getTableEntryIdByName('machine_class', 'Miner')(db);\n  const machine_type_container = await getTableEntryIdByName('machine_class', 'Container')(db);\n  const spring_type_miner = await getTableEntryIdByName('spring_type', 'Miner')(db);\n  const spring_type_container = await getTableEntryIdByName('spring_type', 'Container')(db);\n  const purity_types = await getTableEntries('purity_type', db);\n  for (let i = 0; i < types.length; i++) {\n    const ore = await getTableEntryIdByName('item', types[i])(db);\n\n    const structure = {\n      item_id: ore,\n      machine_class_id: machine_type_miner,\n      spring_type_id: spring_type_miner,\n      purities: purity_types\n    };\n    ret.push(structure);\n  }\n\n  const container = {\n    machine_class_id: machine_type_container,\n    spring_type_id: spring_type_container\n  };\n\n  ret.push(container);\n\n  return ret;\n};\n\nconst data = [\n  {\n    key: 'purity_type',\n    value: [\n      {name: 'Impure', quantity: 30},\n      {name: 'Normal', quantity: 60},\n      {name: 'Pure', quantity: 120}\n    ]\n  },\n  {\n    key: 'item',\n    value: [\n      {\n        name: 'Copper Ore',\n        icon: baseUrl + 'Copper_Ore.png'\n      },\n      {\n        name: 'Iron Ore',\n        icon: baseUrl + 'Iron_Ore.png'\n      },\n      {\n        name: 'Limestone Ore',\n        icon: baseUrl + 'Limestone.png'\n      },\n      {\n        name: 'Coal Ore',\n        icon: baseUrl + 'Coal.png'\n      },\n      {\n        name: 'Iron Ingot',\n        icon: baseUrl + 'Iron_Ingot.png'\n      },\n      {\n        name: 'Copper Ingot',\n        icon: baseUrl + 'Copper_Ingot.png'\n      },\n      {\n        name: 'Iron Plate',\n        icon: baseUrl + 'Iron_Plate.png'\n      },\n      {\n        name: 'Iron Rod',\n        icon: baseUrl + 'Iron_Rod.png'\n      },\n      {\n        name: 'Screw',\n        icon: baseUrl + 'Screw.png'\n      },\n      {\n        name: 'Wire',\n        icon: baseUrl + 'Wire.png'\n      },\n      {\n        name: 'Cable',\n        icon: baseUrl + 'Cable.png'\n      },\n      {\n        name: 'Concrete',\n        icon: baseUrl + 'Concrete.png'\n      },\n      {\n        name: 'Reinforced Iron Plate',\n        icon: baseUrl + 'Reinforced_Iron_Plate.png'\n      },\n      {\n        name: 'Modular Frame',\n        icon: baseUrl + 'Modular_Frame.png'\n      },\n      {\n        name: 'Rotor',\n        icon: baseUrl + 'Rotor.png'\n      },\n      {\n        name: 'Caterium Ore',\n        icon: baseUrl + 'Caterium_Ore.png'\n      },\n      {\n        name: 'Caterium Ingot',\n        icon: baseUrl + 'Caterium_Ingot.png'\n      },\n      {\n        name: 'Quickwire',\n        icon: baseUrl + 'Quickwire.png'\n      },\n      {\n        name: 'Steel Ingot',\n        icon: baseUrl + 'Steel_Ingot.png'\n      },\n      {\n        name: 'Steel Beam',\n        icon: baseUrl + 'Steel_Beam.png'\n      },\n      {\n        name: 'Steel Pipe',\n        icon: baseUrl + 'Steel_Pipe.png'\n      },\n      {\n        name: 'Encased Industrial Beam',\n        icon: baseUrl + 'Encased_Industrial_Beam.png'\n      },\n      {\n        name: 'Stator',\n        icon: baseUrl + 'Stator.png'\n      },\n      {\n        name: 'Heavy Modular Frame',\n        icon: baseUrl + 'Heavy_Modular_Frame.png'\n      },\n      {\n        name: 'Motor',\n        icon: baseUrl + 'Motor.png'\n      }\n    ]\n  },\n  {\n    key: 'node_type',\n    value: [\n      {name: 'Machine Node'},\n      {name: 'Resource Node'},\n    ]\n  },\n  {\n    key: 'machine_version',\n    value: [\n      {name: 'internal', representation: ''},\n      {name: 'Mk.1', rank: 0, representation: 'I'},\n      {name: 'Mk.2', rank: 1, representation: 'II'},\n      {name: 'Mk.3', rank: 2, representation: 'III'},\n      {name: 'Mk.4', rank: 3, representation: 'IV'},\n      {name: 'Mk.5', rank: 4, representation: 'V'},\n      {name: 'Mk.6', rank: 5, representation: 'VI'},\n      {name: 'S', rank: 6, representation: 'S'}, // For Splitters\n      {name: 'M', rank: 7, representation: 'M'},\n    ]\n  },\n  {\n    key: 'path_type',\n    value: [\n      {\n        name: 'Item Belt Mk 1',\n        speed: 60,\n        machine_version_id: getTableEntryIdByName('machine_version', 'Mk.1'),\n        rank: 0\n      },\n      {\n        name: 'Item Belt Mk 2',\n        speed: 120,\n        machine_version_id: getTableEntryIdByName('machine_version', 'Mk.2'),\n        rank: 1\n      },\n      {\n        name: 'Item Belt Mk 3',\n        speed: 270,\n        machine_version_id: getTableEntryIdByName('machine_version', 'Mk.3'),\n        rank: 2\n      },\n      {\n        name: 'Item Belt Mk 4',\n        speed: 450,\n        machine_version_id: getTableEntryIdByName('machine_version', 'Mk.4'),\n        rank: 3\n      },\n      {\n        name: 'Item Belt Mk 5',\n        speed: 6600,\n        machine_version_id: getTableEntryIdByName('machine_version', 'Mk.5'),\n        rank: 4\n      },\n      {\n        name: 'Item Belt Mk 6',\n        speed: 900,\n        machine_version_id: getTableEntryIdByName('machine_version', 'Mk.6'),\n        rank: 5\n      },\n      {\n        name: 'internal',\n        speed: 9999999,\n        machine_version_id: getTableEntryIdByName('machine_version', 'internal'),\n        rank: -1\n      },\n    ]\n  },\n  {\n    key: 'machine_class',\n    value: [\n      {name: 'Constructor', plural: 'Constructors', icon: baseUrl + 'Constructor.png'},\n      {name: 'Miner', plural: 'Miners', icon: baseUrl + 'Miner_MK1.png'},\n      {name: 'Assembler', plural: 'Assemblers', icon: baseUrl + 'Assembler.png'},\n      {name: 'Smelter', plural: 'Smelters', icon: baseUrl + 'Smelter.png'},\n      {name: 'Coal Generator', plural: 'Coal Generators', icon: baseUrl + 'Coal_Generator.png'},\n      {name: 'Manufacturer', plural: 'Manufacturer', icon: baseUrl + 'Manufacturer.png'},\n      {name: 'Container', plural: 'Containers', icon: baseUrl + 'Storage_Container_MK1.png'},\n      {name: 'Logistic', plural: 'Logistics', icon: baseUrl + 'Splitter.png'},\n      {name: 'Foundry', plural: 'Foundries', icon: baseUrl + 'Foundry_MK1.png'}\n    ]\n  },\n  {\n    key: 'machine_node',\n    value: [\n      {\n        name: 'Container',\n        node_type_id: getTableEntryIdByName('node_type', 'Machine Node'),\n        machine_version_id: getTableEntryIdByName('machine_version', 'Mk.1'),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Container'),\n        speed: 999999,\n        icon: baseUrl + 'Storage_Container_MK1.png',\n        input_slots: 1,\n        output_slots: 1\n      },\n      {\n        name: 'Splitter',\n        node_type_id: getTableEntryIdByName('node_type', 'Machine Node'),\n        machine_version_id: getTableEntryIdByName('machine_version', 'S'),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Logistic'),\n        speed: 999999,\n        icon: baseUrl + 'Splitter.png',\n        input_slots: 1,\n        output_slots: 3\n      },\n      {\n        name: 'Merger',\n        node_type_id: getTableEntryIdByName('node_type', 'Machine Node'),\n        machine_version_id: getTableEntryIdByName('machine_version', 'M'),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Logistic'),\n        speed: 999999,\n        icon: baseUrl + 'Merger.png',\n        input_slots: 3,\n        output_slots: 1\n      },\n      {\n        name: 'Miner Mk.1',\n        node_type_id: getTableEntryIdByName('node_type', 'Machine Node'),\n        machine_version_id: getTableEntryIdByName('machine_version', 'Mk.1'),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Miner'),\n        speed: 100,\n        power: 5,\n        icon: baseUrl + 'Miner_MK1.png'\n        ,\n        input_slots: 0,\n        output_slots: 1\n      },\n      {\n        name: 'Miner Mk.2',\n        node_type_id: getTableEntryIdByName('node_type', 'Machine Node'),\n        machine_version_id: getTableEntryIdByName('machine_version', 'Mk.2'),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Miner'),\n        icon: baseUrl + 'Miner_MK2.png',\n        speed: 200,\n        power: 5,\n        hidden: true\n        ,\n        input_slots: 0,\n        output_slots: 1\n      },\n      {\n        name: 'Smelter Mk.1',\n        node_type_id: getTableEntryIdByName('node_type', 'Machine Node'),\n        machine_version_id: getTableEntryIdByName('machine_version', 'Mk.1'),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Smelter'),\n        speed: 100,\n        icon: baseUrl + 'Smelter.png'\n        ,\n        input_slots: 1,\n        output_slots: 1\n      },\n      {\n        name: 'Smelter Mk.2',\n        node_type_id: getTableEntryIdByName('node_type', 'Machine Node'),\n        machine_version_id: getTableEntryIdByName('machine_version', 'Mk.2'),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Smelter'),\n        icon: baseUrl + 'Smelter.png',\n        speed: 200,\n        hidden: true,\n        input_slots: 1,\n        output_slots: 1\n      },\n      {\n        name: 'Constructor Mk.1',\n        node_type_id: getTableEntryIdByName('node_type', 'Machine Node'),\n        machine_version_id: getTableEntryIdByName('machine_version', 'Mk.1'),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Constructor'),\n        icon: baseUrl + 'Constructor.png',\n        speed: 100,\n        input_slots: 1,\n        output_slots: 1\n      },\n      {\n        name: 'Constructor Mk.2',\n        node_type_id: getTableEntryIdByName('node_type', 'Machine Node'),\n        machine_version_id: getTableEntryIdByName('machine_version', 'Mk.2'),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Constructor'),\n        icon: baseUrl + 'Constructor.png',\n        speed: 200,\n        hidden: true,\n        input_slots: 1,\n        output_slots: 1\n      },\n      {\n        name: 'Assembler Mk.1',\n        node_type_id: getTableEntryIdByName('node_type', 'Machine Node'),\n        machine_version_id: getTableEntryIdByName('machine_version', 'Mk.1'),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Assembler'),\n        icon: baseUrl + 'Assembler.png',\n        speed: 100,\n        input_slots: 2,\n        output_slots: 1\n      },\n      {\n        name: 'Assembler Mk.2',\n        node_type_id: getTableEntryIdByName('node_type', 'Machine Node'),\n        machine_version_id: getTableEntryIdByName('machine_version', 'Mk.2'),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Assembler'),\n        icon: baseUrl + 'Assembler.png',\n        speed: 100,\n        hidden: true,\n        input_slots: 2,\n        output_slots: 1\n      },\n      {\n        name: 'Manufacturer Mk.1',\n        node_type_id: getTableEntryIdByName('node_type', 'Machine Node'),\n        machine_version_id: getTableEntryIdByName('machine_version', 'Mk.1'),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Manufacturer'),\n        icon: '',\n        speed: 100,\n        hidden: true,\n        input_slots: 4,\n        output_slots: 1\n      },\n      {\n        name: 'Manufacturer Mk.2',\n        node_type_id: getTableEntryIdByName('node_type', 'Machine Node'),\n        machine_version_id: getTableEntryIdByName('machine_version', 'Mk.2'),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Manufacturer'),\n        icon: '',\n        speed: 200,\n        hidden: true,\n        input_slots: 4,\n        output_slots: 1\n      },\n      {\n        name: 'Coal Generator',\n        node_type_id: getTableEntryIdByName('node_type', 'Machine Node'),\n        machine_version_id: getTableEntryIdByName('machine_version', 'Mk.1'),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Coal Generator'),\n        icon: baseUrl + 'Coal_Generator.png',\n        speed: 100,\n        hidden: true,\n        input_slots: 1,\n        output_slots: 0\n      },\n      {\n        name: 'Foundry Mk.1',\n        node_type_id: getTableEntryIdByName('node_type', 'Machine Node'),\n        machine_version_id: getTableEntryIdByName('machine_version', 'Mk.1'),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Foundry'),\n        icon: baseUrl + 'Foundry_MK1.png',\n        speed: 100,\n        hidden: true,\n        input_slots: 2,\n        output_slots: 1\n      },\n      {\n        name: 'Foundry Mk.2',\n        node_type_id: getTableEntryIdByName('node_type', 'Machine Node'),\n        machine_version_id: getTableEntryIdByName('machine_version', 'Mk.2'),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Foundry'),\n        icon: baseUrl + 'Foundry_MK2.png', //TODO get MK2 icon\n        speed: 200,\n        hidden: true,\n        input_slots: 2,\n        output_slots: 1\n      }\n    ]\n  },\n  {\n    key: 'spring_type',\n    value: [\n      {name: 'Miner'},\n      {name: 'Container'}\n    ]\n  },\n  {\n    key: 'player_unlock',\n    value: [\n      {name: 'Reinforced Iron Plate (Alt.)'},\n      {name: 'Stitched Iron Plate'},\n      {name: 'Caterium Wire'},\n      {name: 'Encased Industrial Beam (Alt.)'},\n      {name: 'Heavy Modular Frame (Alt.)'},\n      {name: 'Iron Ingot (Alt.)'},\n      {name: 'Iron Wire'},\n      {name: 'Modular Frame (Alt.)'},\n      {name: 'Rotor (Alt.)'},\n      {name: 'Stator (Alt.)'},\n      {name: 'Steel Ingot (Alt.)'},\n      {name: 'Screw (Alt.)'},\n      // {name: 'Rubber Cable'},\n      // {name: 'Circuit Board'},\n      // {name: 'Caterium Computer'},\n      {name: 'Quickwire (Alt.)'},\n      // {name: 'Caterium Circuit Board'},\n      // {name: 'Crystal Computer'}\n      // time = output_quantity * 60 / ppm\n    ]\n  },\n  {\n    key: 'spring',\n    value: generateSpringList\n  },\n  {\n    key: 'recipe',\n    value: [\n      {\n        name: 'Iron Ingot',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Iron Ore'),\n          quantity: 1\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Smelter'),\n        item_id: getTableEntryIdByName('item', 'Iron Ingot'),\n        time: 2,\n        power: 4,\n        quantity: 1\n      },\n      {\n        name: 'Copper Ingot',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Copper Ore'),\n          quantity: 1\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Smelter'),\n        item_id: getTableEntryIdByName('item', 'Copper Ingot'),\n        time: 2,\n        power: 4,\n        quantity: 1\n      },\n      {\n        name: 'Caterium Ingot',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Caterium Ore'),\n          quantity: 4\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Smelter'),\n        item_id: getTableEntryIdByName('item', 'Caterium Ingot'),\n        time: 4,\n        power: 4,\n        quantity: 1,\n      },\n      {\n        name: 'Iron Plate',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Iron Ingot'),\n          quantity: 2\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Constructor'),\n        item_id: getTableEntryIdByName('item', 'Iron Plate'),\n        time: 4,\n        power: 4,\n        quantity: 1\n      },\n      {\n        name: 'Iron Rod',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Iron Ingot'),\n          quantity: 1\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Constructor'),\n        item_id: getTableEntryIdByName('item', 'Iron Rod'),\n        time: 4,\n        power: 4,\n        quantity: 1\n      },\n      {\n        name: 'Wire',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Copper Ingot'),\n          quantity: 1\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Constructor'),\n        item_id: getTableEntryIdByName('item', 'Wire'),\n        time: 4,\n        power: 4,\n        quantity: 3\n      },\n      {\n        name: 'Iron Wire',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Iron Ingot'),\n          quantity: 2\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Constructor'),\n        item_id: getTableEntryIdByName('item', 'Wire'),\n        time: 8,\n        power: 4,\n        quantity: 9,\n        hidden: true,\n        player_unlock_id: getTableEntryIdByName('player_unlock', 'Iron Wire')\n      },\n      {\n        name: 'Caterium Wire',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Caterium Ingot'),\n          quantity: 1\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Constructor'),\n        item_id: getTableEntryIdByName('item', 'Wire'),\n        time: 8,\n        power: 4,\n        quantity: 9,\n        hidden: true,\n        player_unlock_id: getTableEntryIdByName('player_unlock', 'Caterium Wire')\n      },\n      {\n        name: 'Cable',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Wire'),\n          quantity: 2\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Constructor'),\n        item_id: getTableEntryIdByName('item', 'Cable'),\n        time: 4,\n        power: 4,\n        quantity: 1\n      },\n      {\n        name: 'Screw',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Iron Rod'),\n          quantity: 1\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Constructor'),\n        item_id: getTableEntryIdByName('item', 'Screw'),\n        time: 4,\n        power: 4,\n        quantity: 6\n      },\n      {\n        name: 'Screw (Alt.)',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Iron Ingot'),\n          quantity: 2\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Constructor'),\n        item_id: getTableEntryIdByName('item', 'Screw'),\n        time: 8,\n        power: 4,\n        quantity: 12,\n        hidden: true,\n        player_unlock_id: getTableEntryIdByName('player_unlock', 'Screw (Alt.)')\n      },\n      {\n        name: 'Concrete',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Limestone Ore'),\n          quantity: 3\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Constructor'),\n        item_id: getTableEntryIdByName('item', 'Concrete'),\n        time: 4,\n        power: 4,\n        quantity: 1\n      },\n      {\n        name: 'Reinforced Iron Plate',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Iron Plate'),\n          quantity: 4\n        }, {\n          item_id: getTableEntryIdByName('item', 'Screw'),\n          quantity: 24\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Assembler'),\n        item_id: getTableEntryIdByName('item', 'Reinforced Iron Plate'),\n        time: 12,\n        power: 15,\n        quantity: 1,\n      },\n      {\n        name: 'Reinforced Iron Plate (Alt.)',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Iron Plate'),\n          quantity: 10\n        }, {\n          item_id: getTableEntryIdByName('item', 'Screw'),\n          quantity: 24\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Assembler'),\n        item_id: getTableEntryIdByName('item', 'Reinforced Iron Plate'),\n        time: 24,\n        power: 15,\n        quantity: 3,\n        hidden: true,\n        player_unlock_id: getTableEntryIdByName('player_unlock', 'Reinforced Iron Plate (Alt.)')\n      },\n      {\n        name: 'Stitched Iron Plate',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Iron Plate'),\n          quantity: 6\n        }, {\n          item_id: getTableEntryIdByName('item', 'Wire'),\n          quantity: 30\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Assembler'),\n        item_id: getTableEntryIdByName('item', 'Reinforced Iron Plate'),\n        time: 24,\n        power: 15,\n        quantity: 3,\n        hidden: true,\n        player_unlock_id: getTableEntryIdByName('player_unlock', 'Stitched Iron Plate')\n      },\n      {\n        name: 'Rotor',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Iron Rod'),\n          quantity: 3\n        }, {\n          item_id: getTableEntryIdByName('item', 'Screw'),\n          quantity: 22\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Assembler'),\n        item_id: getTableEntryIdByName('item', 'Rotor'),\n        time: 10,\n        power: 15,\n        quantity: 1,\n      },\n      {\n        name: 'Rotor (Alt.)',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Steel Pipe'),\n          quantity: 6\n        }, {\n          item_id: getTableEntryIdByName('item', 'Wire'),\n          quantity: 20\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Assembler'),\n        item_id: getTableEntryIdByName('item', 'Rotor'),\n        time: 20,\n        power: 15,\n        quantity: 3,\n        hidden: true,\n        player_unlock_id: getTableEntryIdByName('player_unlock', 'Rotor (Alt.)')\n      },\n      {\n        name: 'Modular Frame',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Reinforced Iron Plate'),\n          quantity: 3\n        }, {\n          item_id: getTableEntryIdByName('item', 'Iron Rod'),\n          quantity: 6\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Assembler'),\n        item_id: getTableEntryIdByName('item', 'Modular Frame'),\n        time: 15,\n        power: 15,\n        quantity: 1,\n      },\n      {\n        name: 'Modular Frame (Alt.)',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Reinforced Iron Plate'),\n          quantity: 6\n        }, {\n          item_id: getTableEntryIdByName('item', 'Steel Pipe'),\n          quantity: 6\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Assembler'),\n        item_id: getTableEntryIdByName('item', 'Modular Frame'),\n        time: 30,\n        power: 15,\n        quantity: 3,\n        hidden: true,\n        player_unlock_id: getTableEntryIdByName('player_unlock', 'Modular Frame (Alt.)')\n      },\n      {\n        name: 'Encased Industrial Beam',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Steel Beam'),\n          quantity: 4\n        }, {\n          item_id: getTableEntryIdByName('item', 'Concrete'),\n          quantity: 5\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Assembler'),\n        item_id: getTableEntryIdByName('item', 'Encased Industrial Beam'),\n        time: 15,\n        power: 15,\n        quantity: 1,\n      },\n      {\n        name: 'Encased Industrial Beam (Alt.)',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Steel Pipe'),\n          quantity: 18\n        }, {\n          item_id: getTableEntryIdByName('item', 'Concrete'),\n          quantity: 10\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Assembler'),\n        item_id: getTableEntryIdByName('item', 'Encased Industrial Beam'),\n        time: 30,\n        power: 15,\n        quantity: 3,\n        hidden: true,\n        player_unlock_id: getTableEntryIdByName('player_unlock', 'Encased Industrial Beam (Alt.)')\n      },\n      {\n        name: 'Heavy Modular Frame',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Modular Frame'),\n          quantity: 5\n        }, {\n          item_id: getTableEntryIdByName('item', 'Encased Industrial Beam'),\n          quantity: 5\n        }, {\n          item_id: getTableEntryIdByName('item', 'Steel Pipe'),\n          quantity: 15\n        }, {\n          item_id: getTableEntryIdByName('item', 'Screw'),\n          quantity: 90\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Manufacturer'),\n        item_id: getTableEntryIdByName('item', 'Heavy Modular Frame'),\n        time: 30,\n        power: 60,\n        quantity: 1,\n      },\n      {\n        name: 'Heavy Modular Frame (Alt.)',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Modular Frame'),\n          quantity: 8\n        }, {\n          item_id: getTableEntryIdByName('item', 'Encased Industrial Beam'),\n          quantity: 10\n        }, {\n          item_id: getTableEntryIdByName('item', 'Steel Pipe'),\n          quantity: 36\n        }, {\n          item_id: getTableEntryIdByName('item', 'Concrete'),\n          quantity: 25\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Manufacturer'),\n        item_id: getTableEntryIdByName('item', 'Heavy Modular Frame'),\n        time: 64, //TODO\n        power: 60,\n        quantity: 3,\n        hidden: true,\n        player_unlock_id: getTableEntryIdByName('player_unlock', 'Heavy Modular Frame (Alt.)')\n      },\n      {\n        name: 'Iron Ingot (Alt.)',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Iron Ore'),\n          quantity: 1\n        }, {\n          item_id: getTableEntryIdByName('item', 'Copper Ore'),\n          quantity: 1\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Foundry'),\n        item_id: getTableEntryIdByName('item', 'Iron Ingot'),\n        time: 4,\n        power: 4,\n        quantity: 3,\n        hidden: true,\n        player_unlock_id: getTableEntryIdByName('player_unlock', 'Iron Ingot (Alt.)')\n      },\n      {\n        name: 'Steel Ingot',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Iron Ore'),\n          quantity: 3\n        }, {\n          item_id: getTableEntryIdByName('item', 'Coal Ore'),\n          quantity: 3\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Foundry'),\n        item_id: getTableEntryIdByName('item', 'Steel Ingot'),\n        time: 4,\n        power: 12,\n        quantity: 2,\n      },\n      {\n        name: 'Steel Ingot (Alt.)',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Iron Ingot'),\n          quantity: 3\n        }, {\n          item_id: getTableEntryIdByName('item', 'Coal Ore'),\n          quantity: 6\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Foundry'),\n        item_id: getTableEntryIdByName('item', 'Steel Ingot'),\n        time: 8,\n        power: 12,\n        quantity: 6,\n        hidden: true,\n        player_unlock_id: getTableEntryIdByName('player_unlock', 'Steel Ingot (Alt.)')\n      },\n      {\n        name: 'Steel Beam',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Steel Ingot'),\n          quantity: 3\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Constructor'),\n        item_id: getTableEntryIdByName('item', 'Steel Beam'),\n        time: 6,\n        power: 4,\n        quantity: 1,\n      },\n      {\n        name: 'Steel Pipe',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Steel Ingot'),\n          quantity: 1\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Constructor'),\n        item_id: getTableEntryIdByName('item', 'Steel Pipe'),\n        time: 4,\n        power: 4,\n        quantity: 1,\n      },\n      {\n        name: 'Quickwire',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Caterium Ingot'),\n          quantity: 1\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Constructor'),\n        item_id: getTableEntryIdByName('item', 'Quickwire'),\n        time: 4,\n        power: 4,\n        quantity: 4,\n      },\n      {\n        name: 'Quickwire (Alt.)',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Caterium Ingot'),\n          quantity: 1\n        }, {\n          item_id: getTableEntryIdByName('item', 'Copper Ingot'),\n          quantity: 2\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Assembler'),\n        item_id: getTableEntryIdByName('item', 'Quickwire'),\n        time: 8,\n        power: 4,\n        quantity: 12,\n        hidden: true,\n        player_unlock_id: getTableEntryIdByName('player_unlock', 'Quickwire (Alt.)')\n      },\n      {\n        name: 'Motor',\n        inputs: parseRecipeIngredients([{\n          item_id: getTableEntryIdByName('item', 'Rotor'),\n          quantity: 2\n        }, {\n          item_id: getTableEntryIdByName('item', 'Stator'),\n          quantity: 2\n        }]),\n        machine_class_id: getTableEntryIdByName('machine_class', 'Assembler'),\n        item_id: getTableEntryIdByName('item', 'Motor'),\n        time: 12,\n        power: 15,\n        quantity: 1,\n      },\n    ]\n  }\n];\n\nconst createDatabase = () => {\n  const createDB = async () => {\n    const p = schemaBuilder.connect().then(async db => {\n      const schema = db.getSchema();\n      const promiseList = [];\n\n      for (let i = 0; i < data.length; i++) {\n        const obj = data[i];\n        const key = obj.key;\n        const table = schema.table(key);\n        const rows = [];\n        const valuePromiseRows = [];\n\n        if (typeof obj.value == 'function') {\n          const value = await obj.value(db);\n          value.forEach((row, index) => {\n            row.hidden = row.hidden || false;\n            row.id = index;\n            rows.push(table.createRow(row));\n          });\n        } else {\n          for (let j = 0; j < obj.value.length; j++) {\n            const index = j;\n            const row = obj.value[j];\n            row.hidden = row.hidden || false;\n            row.id = index;\n\n            const blockingPromises = Object.keys(row).map(async k => {\n              if (typeof row[k] == 'function') {\n                row[k] = await row[k](db);\n              }\n              return Promise.resolve();\n            });\n\n            await Promise.all(blockingPromises);\n            rows.push(table.createRow(row));\n            valuePromiseRows.push(Promise.resolve());\n          }\n        }\n\n        await Promise.all(valuePromiseRows);\n        await db.insertOrReplace().into(table).values(rows).exec();\n        console.info('Loaded ' + rows.length + ' into ' + key);\n      }\n      await Promise.all(promiseList);\n      return db;\n    });\n\n    return await p;\n  };\n  return createDB();\n};\n\nexport default createDatabase;","const constants = {\n  lineObjectClass: 'line-object',\n  lineParentObjectClass: 'lineParentObjectClass',\n  lineHitboxObjectClass: 'line-object-hitbox',\n  lineStylingPathClass: 'line-object-path-styled',\n  lineStylingArrowClass: 'line-object-arrow-styled',\n  lineStylingFullClass: 'line-object-combined-styled',\n  overclockedTextClass: 'overclockedTextClass',\n  nodeVersionTextClass: 'nodeVersionTextClass',\n  nodeRequirementsIconClass: 'nodeRequirementsIconClass',\n  nodeSurplusIconClass: 'nodeSurplusIconClass',\n  nodeRequirementsSubIconClass: 'nodeRequirementsSubIconClass',\n  nodeProducesClass: 'nodeProducesClass',\n  nodeSurplusClass: 'nodeSurplusClass',\n  nodeProducesPerMinText: 'nodeProducesPerMinText',\n  nodeLimitingThroughputText: 'nodeLimitingThroughputText',\n  nodeLimitingThroughputClass: 'nodeLimitingThroughputClass',\n\n  lineLimitedThroughputText: 'lineLimitedThroughputText',\n  lineLimitedThroughputClass: 'lineLimitedThroughputClass',\n\n  selectedClass: 'selected',\n  selectedNodeClass: 'selected-node',\n  selectedLineClass: 'selected-line',\n  connectableClass: 'potential-connectable-node',\n  graphNodeClass: 'graphMachineNode',\n  graphNodeHoverClass: 'graphNodeHoverClass',\n  overclockedArcClass: 'overclockedArcClass',\n  graphNodeGrabbedClass: 'graphNodeGrabbedClass',\n  graphNodeIdBase: 'graph-svg-node-',\n  svgGraphClass: 'graph-svg',\n  activeEditId: 'active-editing',\n  BACKSPACE_KEY: 8,\n  DELETE_KEY: 46,\n  ENTER_KEY: 13,\n  nodeRadius: 50\n};\n\nexport default constants;","export const strongly_connected_components = function(graph) {\n  console.error(graph);\n  throw new Error('JKNFDKJNFDJN');\n  const index_counter = ['0'];\n  const stack = [];\n  const lowlink = {};\n  const index = {};\n  const result = [];\n\n  const _strong_connect = function(node) {\n    index[node] = index_counter[0];\n    lowlink[node] = index_counter[0];\n    index_counter[0] = (parseInt(index_counter[0]) + 1).toString();\n    stack.push(node);\n\n    const successors = graph[node] || [];\n    successors.forEach(successor => {\n      if(!Object.keys(index).includes(successor)) {\n        _strong_connect(successor);\n        if (lowlink[node] === undefined || lowlink[successor] === undefined) {\n          throw new Error('Not defined: ' + node + ' ' + successor + ' '  + JSON.stringify(lowlink));\n        }\n        lowlink[node] = Math.min(parseInt(lowlink[node]),parseInt(lowlink[successor])).toString();\n      } else if (stack.includes(successor)) {\n        if (lowlink[node] === undefined || lowlink[successor] === undefined) {\n          throw new Error('Not defined: ' + node + ' ' + successor + ' '  + JSON.stringify(lowlink) + ' ' + JSON.stringify(index));\n        }\n        lowlink[node] = Math.min(parseInt(lowlink[node]),parseInt(index[successor])).toString();\n      }\n    });\n\n    if (lowlink[node] === index[node]) {\n      const connected_component = [];\n      /*eslint no-constant-condition: [\"error\", { \"checkLoops\": false }]*/\n      while(true) {\n        const successor = stack.pop();\n        connected_component.push(successor);\n        if (successor === node) break;\n      }\n      result.push(connected_component.slice());\n    }\n  };\n  Object.keys(graph).forEach(node => {\n    if (!Object.keys(index).includes(node)) {\n      _strong_connect(node);\n    }\n  });\n\n  return result;\n};\n\nconst remove_node = function(G, target) {\n  delete G[target];\n  const values = Object.keys(G).map(key => G[key]);\n  values.forEach(value => {\n    value.delete(target);\n  });\n};\n\nconst subgraphs = function(G, vertices) {\n  const returnMap = {};\n  vertices.forEach(v => {\n    const gvarray = Array.from(G[v]);\n    const filtered = gvarray.filter(elem => vertices.has(elem));\n\n\n    returnMap[v] = new Set(filtered);\n  });\n  return returnMap;\n};\n\nexport const strongly_connected_components_standalone = function(graph) {\n  const index_counter = ['0'];\n  const stack = [];\n  const lowlink = {};\n  const index = {};\n  const result = [];\n\n  const _strong_connect = function(node) {\n    index[node] = index_counter[0];\n    lowlink[node] = index_counter[0];\n    index_counter[0] = (parseInt(index_counter[0], 10) + 1).toString();\n    stack.push(node);\n\n    const successors = graph[node] || [];\n    successors.forEach(successor => {\n      if(!Object.keys(index).includes(successor)) {\n        _strong_connect(successor);\n        if (lowlink[node] === undefined || lowlink[successor] === undefined) {\n          throw new Error('Not defined: ' + node + ' ' + successor + ' '  + JSON.stringify(lowlink));\n        }\n        lowlink[node] = Math.min(parseInt(lowlink[node], 10),parseInt(lowlink[successor], 10)).toString();\n      } else if (stack.includes(successor)) {\n        if (lowlink[node] === undefined || lowlink[successor] === undefined) {\n          throw new Error('Not defined: ' + node + ' ' + successor + ' '  + JSON.stringify(lowlink) + ' ' + JSON.stringify(index));\n        }\n        lowlink[node] = Math.min(parseInt(lowlink[node], 10),parseInt(index[successor], 10)).toString();\n      }\n    });\n\n    if (lowlink[node] === index[node]) {\n      const connected_component = [];\n      /*eslint no-constant-condition: [\"error\", { \"checkLoops\": false }]*/\n      while(true) {\n        const successor = stack.pop();\n        connected_component.push(successor);\n        if (successor === node) break;\n      }\n      result.push(connected_component.slice());\n    }\n  };\n  Object.keys(graph).forEach(node => {\n    if (!Object.keys(index).includes(node)) {\n      _strong_connect(node);\n    }\n  });\n\n  return result;\n};\n\nexport const simple_cycle = function(Ginput) {\n  const _unblock = function(thisnode, blocked, B) {\n    const stack = new Set([thisnode]);\n    while(stack.size) {\n      const node =  stack.values().next().value;\n      stack.delete(node);\n      if (blocked.has(node)) {\n        blocked.delete(node);\n        if (!B[node]) {\n          B[node] = new Set();\n        }\n        B[node].forEach(elem => {\n          stack.add(elem);\n        });\n        B[node].clear();\n      }\n    }\n  };\n\n\n  const G = {};\n  Object.keys(Ginput).forEach(key => {\n    G[key] = new Set(Ginput[key].map(elem => elem.toString()));\n  });\n\n  const sccs = strongly_connected_components(G);\n  const returnValues = [];\n  while(sccs.length) {\n    const scc = sccs.pop();\n    const startnode = scc.pop();\n    const path = [startnode];\n    const blocked = new Set();\n    const closed = new Set();\n    blocked.add(startnode);\n    const B = {};\n    const stack = [  [ startnode, Array.from(G[startnode] || new Set())] ];\n    while(stack.length) {\n      const [thisnode, nbrs] = stack[stack.length - 1];\n      if (nbrs && nbrs.length) {\n        const nextnode = nbrs.pop();\n        if (nextnode === startnode) {\n          returnValues.push(path.slice().map(elem => parseInt(elem)));\n          path.forEach(node => {\n            closed.add(node);\n          });\n        } else if (!blocked.has(nextnode)) {\n          path.push(nextnode);\n          stack.push([ nextnode, Array.from(G[nextnode] || new Set())  ]);\n          closed.delete(nextnode);\n          blocked.add(nextnode);\n        }\n      } else {\n        if (closed.has(thisnode)) {\n          _unblock(thisnode, blocked, B);\n        } else {\n          (G[thisnode] || []).forEach(nbr => {\n            B[nbr] = B[nbr] || new Set();\n            if(!B[nbr].has(nbr)) {\n              B[nbr].add(thisnode);\n            }\n          });\n        }\n\n        stack.pop();\n        path.pop();\n      }\n    }\n\n    remove_node(G, startnode);\n    const H = subgraphs(G, new Set(scc));\n    const toAdd = strongly_connected_components(H);\n    toAdd.forEach(elem => {\n      sccs.push(elem);\n    });\n  }\n  return returnValues;\n};\n\n// how to remove dups\n\n//to generate the specific indexes\n// pos = myArray.map(function(e) { return e.hello; }).indexOf('stevie');\n\n\n// var a = [1, 2, 3], b = [101, 2, 1, 10];\n// var c = a.concat(b);\n// var d = c.filter(function (item, pos) {return c.indexOf(item) == pos});","export const spliceUtil = function(object, item) {\n  if (object.indexOf(item) === -1) return;\n  object.splice(object.indexOf(item), 1);\n};","import {spliceUtil} from \"./GraphSvg/util\";\n\nexport default class TinyQueue {\n  constructor(data = [], compare = defaultCompare) {\n    this.data = data;\n    this.length = this.data.length;\n    this.compare = compare;\n\n    this.reheapify();\n  }\n\n  reheapify() {\n    if (this.length > 0) {\n      for (let i = (this.length >> 1) - 1; i >= 0; i--) this._down(i);\n    }\n  }\n\n  size() {\n    return this.data.length;\n  }\n\n  remove(item) {\n    spliceUtil(this.data, item);\n    this.length = this.data.length;\n  }\n\n  push(item) {\n    this.data.push(item);\n    this.length++;\n    this._up(this.length - 1);\n  }\n\n  pop() {\n    if (this.length === 0) return undefined;\n\n    const top = this.data[0];\n    const bottom = this.data.pop();\n    this.length--;\n\n    if (this.length > 0) {\n      this.data[0] = bottom;\n      this._down(0);\n    }\n\n    return top;\n  }\n\n  peek() {\n    return this.data[0];\n  }\n\n  _up(pos) {\n    const {data, compare} = this;\n    const item = data[pos];\n\n    while (pos > 0) {\n      const parent = (pos - 1) >> 1;\n      const current = data[parent];\n      if (compare(item, current) >= 0) break;\n      data[pos] = current;\n      pos = parent;\n    }\n\n    data[pos] = item;\n  }\n\n  _down(pos) {\n    const {data, compare} = this;\n    const halfLength = this.length >> 1;\n    const item = data[pos];\n\n    while (pos < halfLength) {\n      let left = (pos << 1) + 1;\n      let best = data[left];\n      const right = left + 1;\n\n      if (right < this.length && compare(data[right], best) < 0) {\n        left = right;\n        best = data[right];\n      }\n      if (compare(best, item) >= 0) break;\n\n      data[pos] = best;\n      pos = left;\n    }\n\n    data[pos] = item;\n  }\n}\n\nfunction defaultCompare(a, b) {\n  return a < b ? -1 : a > b ? 1 : 0;\n}","import constants from './constants';\nimport * as d3 from 'd3';\nimport {\n  addEfficiencyArc,\n  addNodeImage, editEfficiencyArc,\n  insertComponents,\n  insertNodeOverclock,\n  insertNodeTier,\n  node_clicked,\n  node_mouse_down,\n  node_mouse_out,\n  node_mouse_over,\n  node_mouse_up,\n  remove_select_from_nodes,\n  wheelZoomCalculation\n} from './nodeActions';\nimport {drag_drag, drag_end, drag_start} from './mouseEvents';\nimport {pathMouseClick, recalculateStorageContainers, insertEdgeLabel, calculateLabelPositions} from './edgeActions';\nimport {strongly_connected_components_standalone} from './algorithms';\nimport TinyQueue from '../TinyQueue';\n\n\nexport const analyzeGraph = function() {\n  const nodeUnion = new Set(Object.keys(this.nodeIn));\n  Object.keys(this.nodeOut).forEach(node => nodeUnion.add(node));\n  const nodeUnionArray = Array.from(nodeUnion);\n\n  const nodeLookup = {};\n\n  nodeUnionArray.forEach((value, index) => {\n    nodeUnionArray[index] = this.graphData.nodes.filter(elem => elem.id.toString() === value)[0];\n    nodeLookup[nodeUnionArray[index].id] = nodeUnionArray[index];\n    nodeUnionArray[index].childProvides = [];\n    nodeUnionArray[index].hasSources = new Set();\n    nodeUnionArray[index].containedItems = [];\n\n    if (nodeUnionArray[index].machine.name !== 'Container' && nodeUnionArray[index].machine.name !== 'Logistic') {\n    } else {\n      nodeUnionArray[index].allowedIn = [];\n      nodeUnionArray[index].allowedOut = [];\n    }\n  });\n\n  const nodeOutWithSets = {};\n  Object.keys(this.nodeOut).forEach(key => {\n    const value = this.nodeOut[key];\n    nodeOutWithSets[key] = new Set(value.map(elem => elem.id.toString()));\n  });\n\n  const componentsList = strongly_connected_components_standalone(nodeOutWithSets);\n  const superNodeGraphLookup = {};\n  const superNodeGraphLookupInflated = {};\n  const lookupArray = {};\n  componentsList.forEach((list, index) => {\n    superNodeGraphLookup[index] = list;\n    superNodeGraphLookupInflated[index] = list.map(id => nodeLookup[id]);\n    list.forEach(item => {\n      lookupArray[item] = index;\n    });\n  });\n  const derivedGraphOutgoing = {};\n\n  // Derive a graph from this new info\n  Object.keys(this.nodeOut).forEach(node => {\n    const ids = this.nodeOut[node].map(item => item.id);\n    const thisNode = lookupArray[node];\n    derivedGraphOutgoing[thisNode] = derivedGraphOutgoing[thisNode] || new Set();\n    const derivedGraphAccessor = derivedGraphOutgoing[thisNode];\n    ids.forEach(id => {\n      const thisId = lookupArray[id];\n      if (thisId === thisNode) return;\n      derivedGraphAccessor.add(thisId);\n    });\n  });\n  const derivedGraphIncoming = {};\n  const immutableDerivedGraphIncoming = {};\n\n  // Derive a graph from this new info\n  Object.keys(this.nodeOut).forEach(node => {\n    const ids = this.nodeOut[node].map(item => item.id);\n    const thisNode = lookupArray[node];\n    derivedGraphIncoming[thisNode] = derivedGraphIncoming[thisNode] || new Set();\n    immutableDerivedGraphIncoming[thisNode] = immutableDerivedGraphIncoming[thisNode] || new Set();\n    ids.forEach(id => {\n      const thisId = lookupArray[id];\n      if (thisId === thisNode) return;\n\n      if (!derivedGraphIncoming[thisId]) {\n        derivedGraphIncoming[thisId] = new Set();\n        immutableDerivedGraphIncoming[thisId] = new Set();\n      }\n\n      const derivedGraphAccessor = derivedGraphIncoming[thisId];\n      derivedGraphAccessor.add(thisNode);\n      immutableDerivedGraphIncoming[thisId].add(thisNode);\n    });\n  });\n  const myTinyQueue = new TinyQueue(Array.from(new Set([...Object.keys(derivedGraphOutgoing), ...Object.keys(derivedGraphIncoming)])), (a, b) => {\n    return (derivedGraphIncoming[a] || []).size - (derivedGraphIncoming[b] || []).size;\n  });\n\n  const providedThroughput = {};\n\n  const itemLookup = {};\n\n  this.props.parentAccessor.state.recipe.item.forEach(item => {\n    itemLookup[item.id] = item.icon;\n  });\n\n  this.graphData.nodes.forEach(node => {\n    delete node.efficiency;\n    delete node.itemThroughPut;\n    delete node.itemsPerMinute;\n    delete node.internalError;\n\n    if (node.data && node.data.recipe && !node.data.node && this.props.parentAccessor.state && this.props.parentAccessor.state.recipe && this.props.parentAccessor.state.recipe.recipe) {\n      if (window.location.search.indexOf('thankYouStay=veryYes') > -1) {\n        const workaroundHack = this.props.parentAccessor.state.recipe.recipe.filter(rec => rec.id === node.data.recipe.id);\n        if (workaroundHack.length > 0) {\n          node.data.recipe = workaroundHack[0];\n        }\n        console.log('Replaced recipe', workaroundHack[0]);\n      }\n    }\n\n    node.itemIconLookup = itemLookup;\n  });\n\n  this.graphData.links.forEach(link => {\n    delete link.itemThroughPut;\n    delete link.tempIndex;\n    delete link.forceOverwritable;\n    link.itemIconLookup = itemLookup;\n  });\n\n\n  while(myTinyQueue.size()) {\n    const node = myTinyQueue.pop();\n\n    const thisNodeInflated = superNodeGraphLookupInflated[node];\n    const outgoing = Array.from(derivedGraphOutgoing[node] || new Set());\n    const outgoingInflated = outgoing.map(item => superNodeGraphLookupInflated[item]);\n\n    const propagateNodeToEdgesRevised = (nodeGroupSource, nodeGroupTarget, origin, targets) => {\n      const nodeGroupSourceThroughput = [];\n      if (nodeGroupSource.length === 1) {\n        const node = nodeGroupSource[0];\n        let throughput = null;\n        let efficiency = null;\n\n        const nodeSpeed = node.instance.speed / 100;\n        const overclock = node.overclock / 100;\n\n        const provided = providedThroughput[node.id] || [];\n\n        if (node.data.node) {\n          // this is a purity calculation\n          const recipe = node.data.recipe;\n          const purity = node.data.purity;\n          const fetchedPurity = recipe.purities.filter(item => item.name === purity);\n\n          if (fetchedPurity.length !== 1) {\n            throw new Error('Trying to get purity', purity, 'wtf?');\n          }\n          const actualPurity = fetchedPurity[0];\n\n          throughput = {\n            speed: nodeSpeed,\n            overclock,\n            quantity: actualPurity.quantity,\n            item: recipe.item.id,\n            time: 60,\n            power: node.instance.power,\n            inputs: []\n          };\n          efficiency = 1;\n\n          const maxThroughput = (throughput.quantity / throughput.time) * 60 * node.instance.speed / 100 * throughput.overclock;\n          nodeGroupSourceThroughput.push({throughput, efficiency, source: origin });\n\n          nodeGroupSource.forEach(node => {\n            node.efficiency = efficiency;\n            node.itemsPerMinute = {[throughput.item]: maxThroughput};\n\n            // Comment this out if we should remove the display from nodes\n            node.itemThroughPut = {[throughput.item]: {max: maxThroughput, actual: maxThroughput}};\n          });\n        } else if (node.machine.name === 'Logistic' && node.instance.name === 'Splitter') {\n          const resources = {};\n          const providedSet = new Set();\n          provided.forEach(provideRaw => {\n            const provide = JSON.parse(JSON.stringify(provideRaw));\n\n            //TODO: change the 3 to the actual number of links out\n            provide.maxItemsPerSecLimiter = provide.calculatedItemPerSecond;\n                // / ((this.nodeOut[nodeGroupSource[0].id] || []).length || 1);\n\n            provide.reconstructionMultiplier = ((this.nodeOut[nodeGroupSource[0].id] || []).length || 1);\n\n            const i = provide.throughput.item;\n            providedSet.add(i);\n            const itemPerSec = provide.calculatedItemPerSecond;\n            resources[i] = resources[i] || 0;\n            resources[i] += itemPerSec * 60;\n\n            nodeGroupSourceThroughput.push(provide);\n          });\n\n          nodeGroupSource.forEach(node => {\n            node.efficiency = 1;\n            node.itemsPerMinute = {};\n            node.itemThroughPut = {};\n            providedSet.forEach(providedItem => {\n              const resourceCount = resources[providedItem];\n              node.itemsPerMinute[providedItem] = resourceCount;\n              node.itemThroughPut[providedItem] = {max: resourceCount, actual: resourceCount};\n            });\n          });\n        } else if (node.machine.name === 'Logistic' && node.instance.name === 'Merger') {\n          const resources = {};\n          const providedSet = new Set();\n          provided.forEach(provideRaw => {\n            const provide = JSON.parse(JSON.stringify(provideRaw));\n            const i = provide.throughput.item;\n            providedSet.add(i);\n            const itemPerSec = provide.calculatedItemPerSecond;\n            resources[i] = resources[i] || 0;\n            resources[i] += itemPerSec * 60;\n            nodeGroupSourceThroughput.push(provide);\n          });\n\n          nodeGroupSource.forEach(node => {\n            node.efficiency = 1;\n            node.itemsPerMinute = {};\n            node.itemThroughPut = {};\n            providedSet.forEach(providedItem => {\n              const resourceCount = resources[providedItem];\n              node.itemsPerMinute[providedItem] = resourceCount;\n              node.itemThroughPut[providedItem] = {max: resourceCount, actual: resourceCount};\n            });\n          });\n        } else if (node.machine.name === 'Container') {\n          const resources = {};\n          const providedSet = new Set();\n          provided.forEach(provide => {\n            const i = provide.throughput.item;\n            providedSet.add(i);\n            const itemPerSec = provide.calculatedItemPerSecond;\n            resources[i] = resources[i] || 0;\n            resources[i] += itemPerSec * 60;\n            nodeGroupSourceThroughput.push(provide);\n          });\n\n          nodeGroupSource.forEach(node => {\n            node.efficiency = 1;\n            node.itemsPerMinute = {};\n            providedSet.forEach(providedItem => {\n              const resourceCount = resources[providedItem];\n              node.itemsPerMinute[providedItem] = resourceCount;\n              node.itemThroughPut = {[providedItem]: {max: resourceCount, actual: resourceCount}};\n            });\n          });\n        } else {\n          throughput = {\n            speed: nodeSpeed,\n            overclock,\n            quantity: node.data.recipe.quantity,\n            item: node.data.recipe.item.id,\n            time: node.data.recipe.time,\n            power: node.data.recipe.power,\n            inputs: node.data.recipe.inputs.map(elem => {\n              return {item: elem.item.id, quantity: elem.quantity};\n            })\n          };\n\n          const resources = {};\n\n          const providedSet = new Set();\n\n          provided.forEach(provide => {\n            const i = provide.throughput.item;\n\n            providedSet.add(i);\n\n            const itemPerSec = provide.calculatedItemPerSecond;\n\n            resources[i] = resources[i] || 0;\n            resources[i] += itemPerSec * 60;\n          });\n\n          const missing = new Set();\n          const efficiencies = [Infinity];\n\n          const maxThroughput = (throughput.quantity / throughput.time) * 60 * node.instance.speed / 100 * throughput.overclock;\n\n          throughput.inputs.forEach(inp => {\n            const item = inp.item;\n            const quantity = inp.quantity;\n            const providedQuantity = resources[item] || 0;\n            if (!providedSet.has(item)) {\n              missing.add(item);\n            }\n\n            const resourceThroughputNeeded = maxThroughput * (quantity / throughput.quantity);\n            const calculatedThroughput = maxThroughput * (Math.min(resourceThroughputNeeded, providedQuantity) / resourceThroughputNeeded);\n            const maxThroughputPerItem = resourceThroughputNeeded;\n\n            node.itemThroughPut = node.itemThroughPut || {};\n            node.itemThroughPut[item] = node.itemThroughPut[item] || {max: 0, actual: 0};\n            node.itemThroughPut[item].max += maxThroughputPerItem;\n            node.itemThroughPut[item].actual += providedQuantity;\n\n            const efficiency = calculatedThroughput / maxThroughput;\n\n            efficiencies.push(Math.min(1, efficiency));\n          });\n\n          if (missing.size > 0) {\n            efficiency = 0;\n          } else {\n            efficiency = Math.min(...efficiencies);\n          }\n\n          nodeGroupSourceThroughput.push({throughput, efficiency, source: origin});\n\n          nodeGroupSource.forEach(node => {\n            node.efficiency = efficiency;\n            node.itemsPerMinute = {[throughput.item]: maxThroughput * efficiency};\n          });\n        }\n\n        let totalItemThroughput = 0;\n        let totalLinkThroughput = 0;\n        let totalItemThroughputByItem = {};\n\n        let linkPairs = [];\n\n        (derivedGraphOutgoing[origin] || []).forEach(outgoingNode => {\n          const sources = nodeGroupSource.map(node => node.id);\n          const targets = superNodeGraphLookupInflated[outgoingNode].map(node => node.id);\n\n          sources.forEach(source => {\n            targets.forEach(target => {\n              const link = this.graphData.links.filter(link => link.source.id === source && link.target.id === target);\n              let foundLink = null;\n              if (link && link.length === 1) {\n                foundLink = link[0];\n              } else if (link && link.length > 1) {\n                throw new Error('Too many links found!!!');\n              } else {\n                return;\n              }\n\n              linkPairs.push({source, target, speed: foundLink.instance.speed, link: foundLink});\n              totalLinkThroughput += foundLink.instance.speed;\n            });\n          });\n        });\n\n        const localItemThroughput = nodeGroupSourceThroughput.map(throughput => {\n\n          const q = throughput.throughput.quantity;\n          const t = throughput.throughput.time;\n          const e = throughput.efficiency;\n          const o = throughput.throughput.overclock;\n          const s = throughput.throughput.speed;\n          const i = throughput.throughput.item;\n\n          const maxItemsPerSecLimiter = throughput.maxItemsPerSecLimiter === undefined ? Infinity : throughput.maxItemsPerSecLimiter;\n          const tmp = Math.min(q / t * e * o * s || 0, maxItemsPerSecLimiter);\n\n          totalItemThroughputByItem[i] = totalItemThroughputByItem[i] || 0;\n          totalItemThroughputByItem[i] += tmp;\n\n          return tmp;\n        }).reduce((a, b = 0) => a + b, 0);\n\n        totalItemThroughput += localItemThroughput;\n\n        linkPairs.sort(\n          (t1, t2) => {\n            return t1.speed - t2.speed;\n          }\n        );\n\n        let processingType = 1;\n        if (totalItemThroughput * 60 > totalLinkThroughput) {\n          // split proportioanly the totalItemThroughput\n        } else {\n          processingType = 0;\n          //fill things sequentiually\n        }\n\n\n\n        let remainingItemProcessing = totalItemThroughput * 60;\n        let remainingLinkPairs = linkPairs.length;\n        linkPairs.forEach(pair => {\n          const target = pair.target;\n          const limitedSpeed = pair.speed;\n\n          providedThroughput[target] = providedThroughput[target] || [];\n          if (processingType === 1) {\n            // split everything\n            // fraction of this belt of ALL belts:\n            const fraction = limitedSpeed / (totalLinkThroughput);\n            pair.fraction = fraction;\n          } else {\n            if (remainingItemProcessing / remainingLinkPairs > limitedSpeed) {\n              // there will be residuals\n              const itemsUsed = limitedSpeed;\n              remainingItemProcessing -= itemsUsed;\n              const fraction = limitedSpeed / (totalItemThroughput * 60);\n              pair.fraction = fraction;\n            } else {\n              // no residuals.\n              const itemsUsed = remainingItemProcessing / remainingLinkPairs;\n              remainingItemProcessing -= itemsUsed;\n              const fraction = itemsUsed / (totalItemThroughput * 60);\n              pair.fraction = fraction;\n            }\n          }\n          remainingLinkPairs -= 1;\n        });\n\n        linkPairs.forEach(pair => {\n          const source = pair.source;\n          const target = pair.target;\n          const speed = pair.speed;\n          const foundLink = pair.link;\n          const fraction = pair.fraction || 1;\n          const limitedSpeed = speed;\n\n          providedThroughput[target] = providedThroughput[target] || [];\n\n          nodeGroupSourceThroughput.forEach(itemRaw => {\n            const throughput = JSON.parse(JSON.stringify(itemRaw));\n            const q = throughput.throughput.quantity;\n            const t = throughput.throughput.time;\n            const e = throughput.efficiency;\n            const o = throughput.throughput.overclock;\n            const s = throughput.throughput.speed;\n            const i = throughput.throughput.item;\n            //check propagated limited\n            const maxItemsPerSecLimiter = throughput.maxItemsPerSecLimiter === undefined ? Infinity : throughput.maxItemsPerSecLimiter;\n\n            let itemPerSecBeforeBeltLimiting = Math.min(q / t * e * o * s || 0, maxItemsPerSecLimiter);\n\n            // need to do some weird math to constrain the items/psec to a PORTION of the belt limited\n            const limitedItemPerSecByBelt = limitedSpeed / 60;\n\n            const beltMaxForThisEntry = limitedItemPerSecByBelt * 60;\n\n            throughput.maxItemsPerSecLimiter = Math.min(limitedItemPerSecByBelt * (maxItemsPerSecLimiter / totalItemThroughput), beltMaxForThisEntry * (maxItemsPerSecLimiter / totalItemThroughput)   ,limitedItemPerSecByBelt, maxItemsPerSecLimiter, itemPerSecBeforeBeltLimiting * fraction);\n            throughput.calculatedItemPerSecond = throughput.maxItemsPerSecLimiter;\n\n            foundLink.itemThroughPut = foundLink.itemThroughPut || {};\n            foundLink.itemThroughPut[i] = foundLink.itemThroughPut[i] || {max: 0, actual: 0};\n            foundLink.itemThroughPut[i].max +=  (itemPerSecBeforeBeltLimiting / totalItemThroughput) * beltMaxForThisEntry;\n            foundLink.itemThroughPut[i].actual += itemPerSecBeforeBeltLimiting * 60 * fraction;\n\n            providedThroughput[target].push(throughput);\n          });\n        })\n      } else {\n        const loopedNodes = new Set();\n        nodeGroupSource.forEach((node) => {\n          loopedNodes.add(node.id);\n          const provided = providedThroughput[node.id] || [];\n          provided.forEach(provideRaw => {\n            const provide = JSON.parse(JSON.stringify(provideRaw));\n            nodeGroupSourceThroughput.push(provide);\n          });\n        });\n\n        const visit = (nodeInitial, provide, loopedNodes) => {\n          let i = 0;\n\n          let initialItemPerSec = provide.calculatedItemPerSecond;\n\n          let resources = {[nodeInitial.id] : initialItemPerSec * 60};\n          const initialNode = nodeInitial.id;\n          let  previousOutput = {[nodeInitial.id] : initialItemPerSec * 60};\n          let  outputIterator = {[nodeInitial.id] : initialItemPerSec * 60};\n          let iteratorTemp = initialItemPerSec * 60;\n          while(i < 999) {\n            const visitedNodes = new Set();\n            const stack = [nodeInitial];\n            visitedNodes.add(nodeInitial.id);\n            while(stack.length) {\n              const node = stack.pop();\n\n              let theseResources = resources[node.id];\n\n              if (node.machine.name === 'Logistic' && node.instance.name === 'Splitter') {\n                theseResources = theseResources / ((this.nodeOut[node.id] || []).length || 1);\n              } else if (node.machine.name === 'Logistic' && node.instance.name === 'Merger') {\n\n              } else if (node.machine.name === 'Container' ) {\n\n              }\n\n              this.nodeOut[node.id].forEach(outNode => {\n                if (!loopedNodes.has(outNode.id)) {\n                  return;\n                }\n\n                const links = this.graphData.links.filter(link => link.source.id === node.id && link.target.id === outNode.id);\n                if (links && links.length !== 1) {\n                  throw new Error('Too many links found!!!');\n                }\n                const link = links[0];\n                const limitedSpeed = link.instance.speed;\n                resources[outNode.id] = resources[outNode.id] || 0;\n                resources[outNode.id] += (theseResources);\n              });\n\n              (this.nodeOut[node.id] || []).forEach(outNode => {\n                if (!visitedNodes.has(outNode.id) && loopedNodes.has(outNode.id)) {\n                  visitedNodes.add(outNode.id);\n                  stack.push(outNode);\n                }\n              });\n\n            }\n\n            const delta = resources[initialNode] - previousOutput[initialNode];\n\n            if (!nodeGroupTarget.length || delta > previousOutput || Math.round(delta * 1000000) === 0 || i === 998) {\n              Object.keys(resources).forEach(key => {\n                outputIterator[key] = Math.round(100 * outputIterator[key]) / 100;\n              });\n              return outputIterator;\n            } else {\n\n              iteratorTemp += delta;\n\n              resources[initialNode] -= previousOutput[initialNode];\n\n              Object.keys(resources).forEach(key => {\n                outputIterator[key] = outputIterator[key] || 0;\n                outputIterator[key] += resources[key];\n              });\n\n              previousOutput[initialNode] = delta; // rabbit and the hare.\n              resources = {[initialNode]: delta};\n              i++;\n            }\n          }\n        };\n\n        const itemPerNode = {};\n        nodeGroupSource.forEach((node) => {\n          const providedThroughputFromOthers = JSON.parse(JSON.stringify(providedThroughput[node.id] || []));\n          providedThroughputFromOthers.forEach(provide => {\n            const resultantResource = visit(node, provide, loopedNodes);\n            const item = provide.throughput.item;\n            Object.keys(resultantResource || []).forEach(nodeId => {\n              itemPerNode[nodeId] = itemPerNode[nodeId] || {};\n              itemPerNode[nodeId][item] = itemPerNode[nodeId][item] || 0;\n              itemPerNode[nodeId][item] +=  resultantResource[nodeId];\n            });\n          });\n        });\n\n        nodeGroupSource.forEach((node) => {\n          this.nodeOut[node.id].forEach(outNode => {\n\n            if (!loopedNodes.has(outNode.id)) {\n              return;\n            }\n\n            const links = this.graphData.links.filter(link => link.source.id === node.id && link.target.id === outNode.id);\n            if (links && links.length !== 1) {\n              throw new Error('Too many links found!!!');\n            }\n            const foundLink = links[0];\n            const linkSpeed = foundLink.instance.speed;\n\n            const totalItems = Object.keys(itemPerNode[node.id] || {}).map(item => itemPerNode[node.id][item]).reduce((a, b = 0) => a + b, 0);\n\n            Object.keys(itemPerNode[node.id] || {}).forEach(item => {\n              const q = itemPerNode[node.id][item];\n              foundLink.itemThroughPut = foundLink.itemThroughPut || {};\n              foundLink.itemThroughPut[item] = foundLink.itemThroughPut[item] || {max: 0, actual: 0};\n              foundLink.itemThroughPut[item].max = (q/totalItems * linkSpeed);\n              foundLink.itemThroughPut[item].actual += (q  / ((this.nodeOut[node.id] || []).length || 1));\n              foundLink.forceOverwritable = true;\n            });\n          });\n        });\n\n        nodeGroupSource.forEach((outerNode) => {\n          outerNode.itemsPerMinute = {};\n          outerNode.efficiency = 1;\n          nodeGroupSource.forEach((node) => {\n            const provided = providedThroughput[node.id] || [];\n            provided.forEach(provideRaw => {\n              const provide = JSON.parse(JSON.stringify(provideRaw));\n              const item = provide.throughput.item;\n              outerNode.itemsPerMinute[item] = (itemPerNode[outerNode.id][item] || 0);\n            });\n          });\n        });\n\n\n\n        //=========================\n        // let totalLinkThroughput = {};\n        //\n        // let linkPairs = [];\n        // let sourcesSet = new Set();\n        //\n        // (derivedGraphOutgoing[origin] || []).forEach(outgoingNode => {\n        //   const sources = nodeGroupSource.map(node => node.id);\n        //   const targets = superNodeGraphLookupInflated[outgoingNode].map(node => node.id);\n        //\n        //   sources.forEach(source => {\n        //     targets.forEach(target => {\n        //       const link = this.graphData.links.filter(link => link.source.id === source && link.target.id === target);\n        //       let foundLink = null;\n        //       if (link && link.length === 1) {\n        //         foundLink = link[0];\n        //       } else if (link && link.length > 1) {\n        //         throw new Error('Too many links found!!!');\n        //       } else {\n        //         return;\n        //       }\n        //\n        //       linkPairs.push({source, target, speed: foundLink.instance.speed, link: foundLink});\n        //       sourcesSet.add(source);\n        //       totalLinkThroughput[source] = totalLinkThroughput[source] || 0;\n        //       totalLinkThroughput[source] += foundLink.instance.speed;\n        //     });\n        //   });\n        // });\n        //\n        // linkPairs.sort(\n        //     (t1, t2) => {\n        //       return t1.speed - t2.speed;\n        //     }\n        // );\n        //\n        // console.error(\"HE WASSSSS\", sourcesSet);\n        //\n        // sourcesSet.forEach(sourceMain => {\n        //   let totalItemThroughput = 0;\n        //   const localItemThroughput = nodeGroupSourceThroughput.map(throughput => {\n        //\n        //     const q = throughput.throughput.quantity;\n        //     const t = throughput.throughput.time;\n        //     const e = throughput.efficiency;\n        //     const o = throughput.throughput.overclock;\n        //     const s = throughput.throughput.speed;\n        //     const i = throughput.throughput.item;\n        //\n        //     const maxItemsPerSecLimiter = throughput.maxItemsPerSecLimiter === undefined ? Infinity : throughput.maxItemsPerSecLimiter;\n        //     const tmp = Math.min(q / t * e * o * s || 0, maxItemsPerSecLimiter);\n        //\n        //     return tmp;\n        //   }).reduce((a, b = 0) => a + b, 0);\n        //\n        //   const totalItems = Object.keys(itemPerNode[sourceMain] || {}).map(item => itemPerNode[sourceMain][item]).reduce((a, b = 0) => a + b, 0);\n        //\n        //   console.log(\"HE WAS\", itemPerNode, totalItems, sourceMain);\n        //\n        //   totalItemThroughput += (totalItems / 60);\n        //\n        //   let processingType = 1;\n        //   if (totalItemThroughput * 60 > totalLinkThroughput[sourceMain]) {\n        //     // split proportioanly the totalItemThroughput\n        //     console.error(\"WE HAVE TOO MANY ITEMS DAMMIT!!!\", totalItemThroughput * 60, totalLinkThroughput[sourceMain])\n        //   } else {\n        //     processingType = 0;\n        //     console.error(\"fewer items!!!\")\n        //     //fill things sequentiually\n        //   }\n        //\n        //\n        //\n        //   let remainingItemProcessing = totalItemThroughput * 60;\n        //   let remainingLinkPairs = linkPairs.filter((link) => link.source === sourceMain).length;\n        //   console.error(\"Starting calc with\", remainingItemProcessing, \"items\", remainingLinkPairs, \"pairs\", \"on\", sourceMain);\n        //   linkPairs.filter((link) => link.source === sourceMain).forEach(pair => {\n        //     const target = pair.target;\n        //     const limitedSpeed = pair.speed;\n        //\n        //     providedThroughput[target] = providedThroughput[target] || [];\n        //     if (processingType === 1) {\n        //       // split everything\n        //       // fraction of this belt of ALL belts:\n        //       const fraction = limitedSpeed / (totalLinkThroughput[sourceMain]);\n        //       pair.fraction = fraction;\n        //       console.error(\"Processing type 1\", limitedSpeed, totalLinkThroughput[sourceMain])\n        //     } else {\n        //       if (remainingItemProcessing / remainingLinkPairs > limitedSpeed) {\n        //         // there will be residuals\n        //         const itemsUsed = limitedSpeed;\n        //         remainingItemProcessing -= itemsUsed;\n        //         const fraction = limitedSpeed / (totalItemThroughput * 60);\n        //         pair.fraction = fraction;\n        //         console.error(\"Processing type 2.1\", limitedSpeed, totalItemThroughput * 60)\n        //       } else {\n        //         // no residuals.\n        //         const itemsUsed = remainingItemProcessing / remainingLinkPairs;\n        //         remainingItemProcessing -= itemsUsed;\n        //         const fraction = itemsUsed / (totalItemThroughput * 60);\n        //         pair.fraction = fraction;\n        //         console.error(\"Processing type 2.2\", itemsUsed, totalItemThroughput * 60)\n        //       }\n        //     }\n        //     console.error(\"Created one link with fraction\", pair.fraction);\n        //     remainingLinkPairs -= 1;\n        //   });\n        //\n        //   linkPairs.filter((link) => link.source === sourceMain).forEach(pair => {\n        //     const source = pair.source;\n        //     const target = pair.target;\n        //     const speed = pair.speed;\n        //     const foundLink = pair.link;\n        //     const fraction = pair.fraction || 1;\n        //     const limitedSpeed = speed;\n        //\n        //     providedThroughput[target] = providedThroughput[target] || [];\n        //\n        //     console.error(\"OK HERE IS THE DEBUG\", nodeGroupSourceThroughput, linkPairs.filter((link) => link.source === sourceMain));\n        //\n        //     nodeGroupSourceThroughput.forEach(itemRaw => {\n        //       const throughput = JSON.parse(JSON.stringify(itemRaw));\n        //       const i = throughput.throughput.item;\n        //       //check propagated limited\n        //       const maxItemsPerSecLimiter = throughput.maxItemsPerSecLimiter === undefined ? Infinity : throughput.maxItemsPerSecLimiter;\n        //\n        //       let itemPerSecBeforeBeltLimiting = itemPerNode[sourceMain][i]  * fraction / 60 / (nodeGroupSourceThroughput.filter(item => item.throughput.item ===i)).length;\n        //       console.error(\"???\", itemPerNode[sourceMain][i], fraction)\n        //       console.log(\"Here is the limiting thing\", itemPerSecBeforeBeltLimiting * 60 * 2)\n        //\n        //       // need to do some weird math to constrain the items/psec to a PORTION of the belt limited\n        //       const limitedItemPerSecByBelt = limitedSpeed / 60;\n        //\n        //       const beltMaxForThisEntry = limitedItemPerSecByBelt * 60;\n        //\n        //       throughput.maxItemsPerSecLimiter = itemPerSecBeforeBeltLimiting;\n        //       console.log(\"Here are the prereqs\", itemPerSecBeforeBeltLimiting)\n        //       console.error(\"Processing throughput from\", source, '->', target, 'quantity: ', 60 * throughput.maxItemsPerSecLimiter, 'fraction:', fraction);\n        //       throughput.calculatedItemPerSecond = throughput.maxItemsPerSecLimiter;\n        //       throughput.efficiency = Infinity;\n        //\n        //       foundLink.itemThroughPut = foundLink.itemThroughPut || {};\n        //       foundLink.itemThroughPut[i] = foundLink.itemThroughPut[i] || {max: 0, actual: 0};\n        //       foundLink.itemThroughPut[i].max +=  (itemPerSecBeforeBeltLimiting / totalItemThroughput) * beltMaxForThisEntry;\n        //       foundLink.itemThroughPut[i].actual += itemPerSecBeforeBeltLimiting * 60 * fraction;\n        //\n        //       providedThroughput[target].push(throughput);\n        //     });\n        //   })\n        // })\n\n\n        //=========================\n\n\n\n        (derivedGraphOutgoing[origin] || []).forEach(outgoingNode => {\n          const sources = nodeGroupSource.map(node => node.id);\n          const targets = superNodeGraphLookupInflated[outgoingNode].map(node => node.id);\n\n          sources.forEach(source => {\n            targets.forEach(target => {\n\n              const link = this.graphData.links.filter(link => link.source.id === source && link.target.id === target);\n\n              let foundLink = null;\n              if (link && link.length === 1) {\n                foundLink = link[0];\n              } else if (link && link.length > 1) {\n                throw new Error('Too many links found!!!');\n              } else {\n                return;\n              }\n\n              const linkSpeed = foundLink.instance.speed;\n\n              const totalItems = Object.keys(itemPerNode[source] || {}).map(item => itemPerNode[source][item]).reduce((a, b = 0) => a + b, 0);\n\n\n              Object.keys(itemPerNode[source] || {}).forEach(item => {\n                const q = itemPerNode[source][item];\n                foundLink.itemThroughPut = foundLink.itemThroughPut || {};\n                foundLink.itemThroughPut[item] = foundLink.itemThroughPut[item] || {max: 0, actual: 0};\n                foundLink.itemThroughPut[item].max = (q/totalItems * linkSpeed);\n                foundLink.itemThroughPut[item].actual += (q  / ((this.nodeOut[source] || []).length || 1));\n                foundLink.forceOverwritable = true;\n              });\n\n\n              nodeGroupSource.forEach((node) => {\n                const provided = providedThroughput[node.id] || [];\n\n\n                const provideByItem = {};\n\n                provided.forEach(provide => {\n                  const item = provide.throughput.item;\n                  provideByItem[item] = provideByItem[item] || [];\n                  provideByItem[item].push(provide);\n                });\n\n                Object.keys(provideByItem).forEach(item => {\n                  const thisProvide = provideByItem[item];\n                  const totalCalculated = thisProvide.map(item => item.calculatedItemPerSecond).reduce((a, b = 0) => a + b, 0);\n\n                  thisProvide.forEach(provideRaw => {\n                    const provide = JSON.parse(JSON.stringify(provideRaw));\n\n                    const localModifier = provide.calculatedItemPerSecond / totalCalculated;\n\n                    provide.calculatedItemPerSecond = localModifier / 60 * (itemPerNode[source][item]   / ((this.nodeOut[source] || []).length || 1));\n\n                    provide.calculatedItemPerSecond = Math.min(provide.calculatedItemPerSecond, linkSpeed / 60);\n                    provide.maxItemsPerSecLimiter = provide.calculatedItemPerSecond;\n\n                    const throughput = provide;\n                    const q = throughput.throughput.quantity;\n                    const t = throughput.throughput.time;\n                    const e = throughput.efficiency;\n                    const o = throughput.throughput.overclock;\n                    const s = throughput.throughput.speed;\n\n                    const rawCalculation = q / t * e * o * s || 0;\n\n                    if (rawCalculation < provide.calculatedItemPerSecond) {\n                      throughput.throughput.overclock = Infinity;\n                    }\n\n                    providedThroughput[target] = providedThroughput[target] || [];\n                    providedThroughput[target].push(throughput);\n                  });\n                });\n              });\n\n            });\n          });\n\n        });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n      }\n    };\n\n    propagateNodeToEdgesRevised(thisNodeInflated, outgoingInflated, node, outgoing);\n\n    Object.keys(derivedGraphIncoming).forEach(key => {\n      const accessor = derivedGraphIncoming[key];\n      accessor.delete(parseInt(node, 10));\n    });\n\n    myTinyQueue.reheapify();\n  }\n\n  editEfficiencyArc('efficiency', 59, 322);\n};\nexport const initSimulation = () => {\n  const bodyEl = document.getElementById('mainRender');\n\n  const width = bodyEl.clientWidth;\n  const height = bodyEl.clientHeight;\n  return d3.forceSimulation()\n    .force('link', d3.forceLink().id(function (d) {\n      return d.id;\n    }).distance(60))\n    .force('charge', d3.forceManyBody().strength(20))\n    // .force('center', d3.forceCenter(width / 2, height / 2))\n    .force('collision', d3.forceCollide().radius(function (d) {\n      return 120;\n    }))\n    .force('xAxis', d3.forceX().strength(0.1).x(function(d){return d.initialX || (width/2);}))\n    .force('yAxis', d3.forceY().strength(0.5).y(function(d){return d.initialY || (height/2);}));\n};\n\nexport const updateGraph = function (simulation, graphNodesGroup, graphLinksGroup) {\n  const t = this;\n  let nodes = this.graphData.nodes;\n  let links = this.graphData.links;\n\n  this.nodeIn = {};\n  this.nodeOut = {};\n\n  links.forEach(elem => {\n    const outgoing = elem.source.id;\n    const incoming = elem.target.id;\n    this.nodeOut[outgoing] = this.nodeOut[outgoing] || [];\n    this.nodeIn[incoming] = this.nodeIn[incoming] || [];\n\n    this.nodeOut[outgoing].push(elem.target);\n    this.nodeIn[incoming].push(elem.source);\n  });\n\n  nodes.forEach(node => {\n    const input_slots = node.instance.input_slots;\n    const output_slots = node.instance.output_slots;\n    node.open_in_slots = input_slots - (t.nodeIn[node.id] || []).length;\n    node.open_out_slot = output_slots - (t.nodeOut[node.id] || []).length;\n  });\n\n  recalculateStorageContainers.call(t);\n\n  const drag = d3.drag()\n    .clickDistance(10)\n    .on('start', (d) => {\n      drag_start.call(this, d, simulation, t);\n    }).on('drag', (d) => {\n      drag_drag.call(this, d, t);\n    }).on('end', function (d) {\n      d3.event.sourceEvent.stopImmediatePropagation();\n      drag_end.call(this, d, t, simulation);\n    });\n\n  let graphNodesData =\n    graphNodesGroup\n      .selectAll('.' + 'node-data-class')\n      .data(nodes, d => d.id);\n\n  let graphNodesEnter =\n    graphNodesData\n      .enter()\n      .append('g')\n      .classed('node-data-class', true)\n      .attr('id', d => d.id || null)\n    // .on('contextmenu', (d, i)  => {\n    //   t.remove(d);\n    //   d3.event.preventDefault();\n    // })\n    // .on('mouseover', d => console.log(`d.id: ${d.id}`))\n    // .on('click', d => t.handleNodeClicked(d))\n      .on('wheel.zoom', function (d) {\n        wheelZoomCalculation.call(this, d);\n      })\n      .on('click', function (d) {\n        d3.event.stopImmediatePropagation();\n        node_clicked.call(this, d, t);\n      // self.onNodeClicked.emit(d.id);\n      }).on('dblclick', function (d) {\n        d3.event.stopImmediatePropagation();\n        remove_select_from_nodes(t);\n        d.fx = null;\n        d.fy = null;\n      }).on('mouseover', function (d) {\n        node_mouse_over.call(this, d, t);\n      }).on('mouseout', function (d) {\n        node_mouse_out.call(this, d, t);\n      }).on('mousedown', function (d) {\n        node_mouse_down.call(this, d, t);\n      }).on('mouseup', function (d) {\n        node_mouse_up.call(this, d, t);\n      }).call(drag);\n\n  let graphNodesExit =\n    graphNodesData\n      .exit()\n      .remove();\n\n  let graphNodeCircles =\n    graphNodesEnter\n      .append('circle')\n      .classed(constants.graphNodeClass, true)\n      .attr('cursor', 'pointer')\n      .attr('r', d => 50);\n\n  const callbacks = [];\n  addEfficiencyArc(graphNodesEnter, 'efficiency', 59, 322);\n  addNodeImage(graphNodesEnter);\n  insertNodeOverclock(graphNodesEnter);\n  insertNodeTier(graphNodesEnter);\n  insertComponents.call(t, graphNodesEnter);\n\n  // merge\n  graphNodesData =\n    graphNodesEnter.merge(graphNodesData);\n\n  // links\n  let graphLinksData =\n    graphLinksGroup\n      .selectAll('.' + 'link-data-class')\n      .data(links, function (d) {\n        return d.source.id + '-' + d.target.id;\n      });\n  let graphLinksEnter =\n    graphLinksData\n      .enter()\n      .append('g')\n      .classed('link-data-class', true);\n\n  let graphLinksExit =\n    graphLinksData\n      .exit()\n      .remove();\n\n\n  const linkFullObject = graphLinksEnter\n    .append('g')\n    .attr('id', function (d) {\n      return 'path-parent' + d.source.id + '-' + d.target.id;\n    })\n    .classed(constants.lineParentObjectClass, true);\n\n\n  // apply styling to each selected line\n  linkFullObject.append('path')\n    .classed(constants.lineStylingPathClass, true)\n    .classed(constants.lineStylingFullClass, true)\n    .attr('display', 'none')\n    .attr('stroke', 'orange')\n    .attr('stroke-width', 10);\n  linkFullObject.append('path')\n    .classed(constants.lineStylingArrowClass, true)\n    .classed(constants.lineStylingFullClass, true)\n    .attr('display', 'none')\n    .attr('stroke', null)\n    .attr('marker-end', 'url(#highlight-path-arrow-orange)')\n    .attr('stroke-width', 3);\n\n  linkFullObject\n    .append('path')\n    .classed(constants.lineObjectClass, true)\n    .attr('stroke', function (d) {\n      return d3.color('#000000');\n    })\n    .attr('marker-end', 'url(#default-path-arrow)');\n\n  insertEdgeLabel.call(this, linkFullObject);\n\n  // apply styling to each selected line\n  linkFullObject\n    .append('path')\n    .classed(constants.lineHitboxObjectClass, true)\n    .on('mouseover', function (d) {\n    }).on('mouseout', function (d) {\n    }).on('click', function (d) {\n      pathMouseClick.call(this, d, t);\n    });\n\n  // merge\n  graphLinksData =\n    graphLinksEnter.merge(graphLinksData);\n\n  simulation\n    .nodes(nodes)\n    .on('tick', () => {\n      handleTick.call(this, graphNodesData, graphLinksData, simulation);\n    })\n    .on('end', () => {\n      console.log('Simulation Ended!');\n    });\n\n  simulation\n    .force('link')\n    .links(links);\n  // simulation\n  // .force('link', d3.forceLink().links(forceLinks))\n  // experiment: weights>\n  // t.linkWeights = {}\n  // links.forEach(elem => {\n  //   t.linkWeights[elem.target.id] = t.linkWeights[elem.target.id] + 1 || 1;\n  //   // t.linkWeights[elem.source.id] = t.linkWeights[elem.source.id] + 1 || 1;\n  // })\n  //\n  // simulation.force('charge', d3.forceManyBody().strength(function(d) {\n  //   return 20 - (20 * t.linkWeights[d.id]);\n  // }));\n  callbacks.forEach(callback => callback());\n  simulation.alphaTarget(0.3).restart();\n};\n\nexport const deselect_path_and_nodes = function (t) {\n  t.setState({selectedPath: null, selectedNode: null});\n  d3.selectAll('.' + constants.lineStylingFullClass).attr('display', 'none');\n  remove_select_from_nodes(t);\n};\n\nexport const zoom_actions = (graphObjects) => {\n  graphObjects.attr('transform', d3.event.transform);\n};\n\nexport const handleTick = function (graphNodesData, graphLinksData, simulation) {\n  //update circle positions each tick of the simulation\n  const k = 100 * simulation.alpha();\n  graphNodesData\n    .attr('transform', function (d) {\n      return 'translate(' + d.x + ',' + d.y + ')';\n    })\n    .attr('cx', function (d) {\n      return d.x;\n    })\n    .attr('cy', function (d) {\n      return d.y;\n    });\n\n  //update link positions\n  graphLinksData.selectAll('line')\n    .attr('x1', function (d) {\n      return d.source.x;\n    })\n    .attr('y1', function (d) {\n      return d.source.y;\n    })\n    .attr('x2', function (d) {\n      return d.target.x;\n    })\n    .attr('y2', function (d) {\n      return d.target.y;\n    });\n\n  //update link positions\n  graphLinksData.selectAll('path')\n    .attr('d', function(d) {return 'M '+d.source.x+' '+d.source.y+' L '+ d.target.x +' '+d.target.y;});\n\n  calculateLabelPositions.call(this, graphLinksData);\n\n  graphLinksData.selectAll('.' + constants.lineObjectClass)\n    .each(function (d) {\n      d.source.vx += k;\n      d.target.vx -= k;\n    });\n};","import {addPath} from './edgeActions';\nimport * as d3 from 'd3';\nimport constants from './constants';\n\n// V2 functions\nexport const drag_start = function (d, simulation, graphSvg) {\n  if (graphSvg.state && graphSvg.state.shiftHeld) {\n    //ignore drag...it's probably not important.\n    graphSvg.setState({mouseDragSource: d});\n  } else {\n    if (!d3.event.active)\n      simulation.alphaTarget(0.3).restart();\n    graphSvg.setState({wasFixed: d.fx !== null && d.fy != null});\n  }\n};\n\n//make sure you can't drag the circle outside the box\nexport const drag_drag = (d, graphSvg) => {\n  if (graphSvg.state && graphSvg.state.shiftHeld) {\n    //ignore drag...it's probably not important.\n    graphSvg.dragLine.classed('hidden', false).attr('d', 'M' + d.x + ',' + d.y + 'L' +\n      d3.mouse(graphSvg.svgGroup.node())[0] + ',' + d3.mouse(graphSvg.svgGroup.node())[1]);\n  } else {\n    d.fx = d3.event.x;\n    d.fy = d3.event.y;\n    graphSvg.setState({wasMoved: true});\n  }\n};\n\nexport const drag_end = (d, graphSvg, simulation) => {\n  if (graphSvg.state && graphSvg.state.shiftHeld) {\n    if (graphSvg.state.mouseOverNode) {\n      const source = graphSvg.state.mouseDragSource;\n      const target = graphSvg.state.mouseOverNode;\n      addPath.call(this, graphSvg, graphSvg.state.mouseDragSource, graphSvg.state.mouseOverNode);\n    }\n    graphSvg.dragLine.classed('hidden', true).attr('d', 'M0,0L0,0');\n  } else {\n    if (graphSvg.state && graphSvg.state.wasMoved) {\n      d.x = d.fx;\n      d.y = d.fy;\n    } else if (graphSvg.state && !graphSvg.state.wasFixed) {\n      d.fx = null;\n      d.fy = null;\n    }\n  }\n  d3.select('.' + constants.graphNodeGrabbedClass).classed(constants.graphNodeGrabbedClass, false);\n  graphSvg.setState({shiftHeld: false, wasMoved: false, wasFixed: false});\n};","import constants from './constants';\nimport {deselect_path_and_nodes} from './graphActions';\nimport * as d3 from 'd3';\nimport TinyQueue from '../TinyQueue';\nimport {strongly_connected_components_standalone} from './algorithms';\nimport {spliceUtil} from './util';\nimport {updateNodeTierExternal} from \"./nodeActions\";\n\nexport const recalculateStorageContainers = function() {\n\n  const nodeUnion = new Set(Object.keys(this.nodeIn));\n  Object.keys(this.nodeOut).forEach(node => nodeUnion.add(node));\n  const nodeUnionArray = Array.from(nodeUnion);\n\n  const nodeLookup = {};\n\n  nodeUnionArray.forEach((value, index) => {\n    nodeUnionArray[index] = this.graphData.nodes.filter(elem => elem.id.toString() === value)[0];\n    nodeLookup[nodeUnionArray[index].id] = nodeUnionArray[index];\n    nodeUnionArray[index].childProvides = [];\n    nodeUnionArray[index].hasSources = new Set();\n    nodeUnionArray[index].containedItems = [];\n\n    if (nodeUnionArray[index].machine.name !== 'Container' && nodeUnionArray[index].machine.name !== 'Logistic') {\n    } else {\n      nodeUnionArray[index].allowedIn = [];\n      nodeUnionArray[index].allowedOut = [];\n    }\n  });\n\n  const nodeOutWithSets = {};\n  Object.keys(this.nodeOut).forEach(key => {\n    const value = this.nodeOut[key];\n    nodeOutWithSets[key] = new Set(value.map(elem => elem.id.toString()));\n  });\n\n  const componentsList = strongly_connected_components_standalone(nodeOutWithSets);\n  const superNodeGraphLookup = {};\n  const superNodeGraphLookupInflated = {};\n  const lookupArray = {};\n  componentsList.forEach((list, index) => {\n    superNodeGraphLookup[index] = list;\n    superNodeGraphLookupInflated[index] = list.map(id => nodeLookup[id]);\n    list.forEach(item => {\n      lookupArray[item] = index;\n    });\n  });\n  const derivedGraphOutgoing = {};\n\n  // Derive a graph from this new info\n  Object.keys(this.nodeOut).forEach(node => {\n    const ids = this.nodeOut[node].map(item => item.id);\n    const thisNode = lookupArray[node];\n    derivedGraphOutgoing[thisNode] = derivedGraphOutgoing[thisNode] || new Set();\n    const derivedGraphAccessor = derivedGraphOutgoing[thisNode];\n    ids.forEach(id => {\n      const thisId = lookupArray[id];\n      if (thisId === thisNode) return;\n      derivedGraphAccessor.add(thisId);\n    });\n  });\n  const derivedGraphIncoming = {};\n  const immutableDerivedGraphIncoming = {};\n\n  // Derive a graph from this new info\n  Object.keys(this.nodeOut).forEach(node => {\n    const ids = this.nodeOut[node].map(item => item.id);\n    const thisNode = lookupArray[node];\n    derivedGraphIncoming[thisNode] = derivedGraphIncoming[thisNode] || new Set();\n    immutableDerivedGraphIncoming[thisNode] = immutableDerivedGraphIncoming[thisNode] || new Set();\n    ids.forEach(id => {\n      const thisId = lookupArray[id];\n      if (thisId === thisNode) return;\n\n      if (!derivedGraphIncoming[thisId]) {\n        derivedGraphIncoming[thisId] = new Set();\n        immutableDerivedGraphIncoming[thisId] = new Set();\n      }\n\n      const derivedGraphAccessor = derivedGraphIncoming[thisId];\n      derivedGraphAccessor.add(thisNode);\n      immutableDerivedGraphIncoming[thisId].add(thisNode);\n    });\n  });\n\n  const myTinyQueue = new TinyQueue(Array.from(new Set([...Object.keys(derivedGraphOutgoing), ...Object.keys(derivedGraphIncoming)])), (a, b) => {\n    return (derivedGraphIncoming[a] || []).size - (derivedGraphIncoming[b] || []).size;\n  });\n\n  const globalProvideMap = {};\n\n  const reverseTraversalStack = [];\n\n  while(myTinyQueue.size()) {\n    const node = myTinyQueue.pop();\n\n    reverseTraversalStack.push(node);\n\n    const thisNodeInflated = superNodeGraphLookupInflated[node];\n    const outgoing = Array.from(derivedGraphOutgoing[node] || new Set());\n    const outgoingInflated = outgoing.map(item => superNodeGraphLookupInflated[item]);\n\n    const propagateNodeToEdges = (nodeGroupSource, nodeGroupTarget, origin, targets) => {\n      //gather this node\n      const combinedProvides = [];\n      const combinedProvidesSource = new Set();\n      nodeGroupSource.forEach(node => {\n        if (node.machine.name !== 'Container' && node.machine.name !== 'Logistic') {\n          combinedProvides.push({item: node.data.recipe, source: origin});\n        } else {\n          node.childProvides = globalProvideMap[origin]  || [];\n          node.childProvides.forEach(provide => {\n            if (!combinedProvidesSource.has(provide.source)) {\n              combinedProvides.push(provide);\n              combinedProvidesSource.add(provide.source);\n            }\n          });\n          node.allowedIn = node.childProvides.map(elem => elem.item.item.id);\n          node.allowedOut = node.childProvides.map(elem => elem.item.item.id);\n          node.containedItems = node.childProvides.map(elem => elem.item.item);\n        }\n      });\n\n      targets.forEach(target => {\n        if (!globalProvideMap[target]) {\n          globalProvideMap[target] = [];\n        }\n\n        combinedProvides.forEach(provide => {\n          if (!new Set(globalProvideMap[target].map(elem => elem.source)).has(provide.source)) {\n            globalProvideMap[target].push(provide);\n          }\n        });\n      });\n    };\n\n    propagateNodeToEdges(thisNodeInflated, outgoingInflated, node, outgoing);\n\n    Object.keys(derivedGraphIncoming).forEach(key => {\n      const accessor = derivedGraphIncoming[key];\n      accessor.delete(parseInt(node, 10));\n    });\n\n    myTinyQueue.reheapify();\n  }\n\n  while(reverseTraversalStack.length) {\n    const node = reverseTraversalStack.pop();\n\n    const thisNodeInflated = superNodeGraphLookupInflated[node];\n\n    const outgoing = Array.from(derivedGraphOutgoing[node] || new Set());\n    const outgoingInflated = outgoing.map(item => superNodeGraphLookupInflated[item]);\n\n    const propagateNodeToEdgesReversed = (nodeGroupSource, nodeGroupTarget, origin, targets) => {\n\n      const allowed = new Set();\n      nodeGroupTarget.forEach(nodeGroup => nodeGroup.forEach(node => {\n        node.allowedIn.forEach(item => allowed.add(item))\n      }));\n\n      nodeGroupSource.forEach(node => {\n        if (node.machine.name !== 'Container' && node.machine.name !== 'Logistic') {\n          // NoOp\n        } else {\n          if (node.allowedIn.length === 0 && node.allowedOut.length === 0) {\n            node.allowedIn = Array.from(allowed);\n            node.allowedOut = Array.from(allowed);\n          }\n        }\n      });\n    };\n    propagateNodeToEdgesReversed(thisNodeInflated, outgoingInflated, node, outgoing);\n  }\n};\n\nexport const addPath = function (passedThis, source, target) {\n\n  const sourceChecker = (source.allowedIn || []).length > 0 || (source.allowedOut || []).length > 0;\n  const targetChecker = (target.allowedIn || []).length > 0 || (target.allowedOut || []).length > 0;\n  const specialSource = ['Container', 'Logistic'].includes(source.machine.name);\n  const specialTarget = ['Container', 'Logistic'].includes(target.machine.name);\n  const mergerTarget = ['Logistic'].includes(source.machine.name) && ['Merger'].includes(source.instance.name);\n  const mergerSource = ['Logistic'].includes(target.machine.name) && ['Merger'].includes(target.instance.name);\n  const targetSlotsUsed = target.instance.input_slots === (passedThis.nodeIn[target.id] ? passedThis.nodeIn[target.id].length : 0);\n  const sourceSlotsUsed = source.instance.output_slots === (passedThis.nodeOut[source.id] ? passedThis.nodeOut[source.id].length : 0);\n\n  console.error(sourceChecker, targetChecker, specialSource, specialTarget, targetSlotsUsed);\n\n  const path_type = passedThis.props.parentAccessor.state.path_type.path_type;\n  path_type.sort((path1, path2) => path1.rank - path2.rank);\n  const upgrades = path_type.filter(path => path.rank >= 0 );\n\n  // TODO: Set the correct instance by default\n  const instance = upgrades[0];\n\n  const newEdge = {source: source, target: target, instance, upgradeTypes: upgrades};\n\n  if (((specialSource && !sourceChecker) || (specialTarget && !targetChecker))  || (mergerTarget || mergerSource) ) {\n    console.log(\"Special Handling\")\n    // special handling if the source is a container\n\n    // check if there are open slots\n    const outgoing = source.id;\n    const incoming = target.id;\n\n    const usedOut = (passedThis.nodeOut[outgoing] ? passedThis.nodeOut[outgoing].length : 0);\n    const usedIn = (passedThis.nodeIn[incoming] ? passedThis.nodeIn[incoming].length : 0);\n\n    // return early if we can't do anything with this node,\n    if (usedOut >= source.instance.output_slots || usedIn >= target.instance.input_slots) {\n      passedThis.updateGraphHelper();\n      return;\n    }\n\n    const filterResult = passedThis.graphData.links.filter(function (d) {\n      if (d.source.id === newEdge.target.id && d.target.id === newEdge.source.id) {\n        removePath(d, passedThis);\n      }\n      return (d.source.id === newEdge.source.id && d.target.id === newEdge.target.id) || newEdge.source.id === newEdge.target.id;\n    });\n\n    if (filterResult.length === 0) {\n      passedThis.graphData.links.push(newEdge);\n    }\n    passedThis.updateGraphHelper();\n  } else {\n    //checked\n\n    // Check if there are items you can shove in\n    const sharedItems = target.allowedIn.filter(value => source.allowedOut.includes(value));\n\n    // check if there are open slots\n    const outgoing = source.id;\n    const incoming = target.id;\n\n    const usedOut = (passedThis.nodeOut[outgoing] ? passedThis.nodeOut[outgoing].length : 0);\n    const usedIn = (passedThis.nodeIn[incoming] ? passedThis.nodeIn[incoming].length : 0);\n\n    // return early if we can't do anything with this node.\n    if (usedOut >= source.instance.output_slots || usedIn >= target.instance.input_slots ||\n      sharedItems.length <= 0) {\n      passedThis.updateGraphHelper();\n      return;\n    }\n\n    const filterResult = passedThis.graphData.links.filter(function (d) {\n      if (d.source.id === newEdge.target.id && d.target.id === newEdge.source.id) {\n        removePath(d, passedThis);\n      }\n      return (d.source.id === newEdge.source.id && d.target.id === newEdge.target.id) || newEdge.source.id === newEdge.target.id;\n    });\n\n    if (filterResult.length === 0) {\n      passedThis.graphData.links.push(newEdge);\n    }\n    passedThis.updateGraphHelper();\n  }\n};\n\nexport const pathMouseClick = function (d, t) {\n  d3.event.stopImmediatePropagation();\n  const parentElement = d3.select(this.parentElement);\n  // const styledLine = parentElement.select('.' + constants.lineStylingPathClass);\n  // const styledMarker = parentElement.select('.' + constants.lineStylingArrowClass);\n\n  if (t.state && t.state.selectedPath && t.state.selectedPath === d) {\n    // set the new selected one to this one\n    deselect_path_and_nodes.call(this, t);\n  } else {\n    deselect_path_and_nodes.call(this, t);\n    d3.selectAll('.' + constants.lineStylingFullClass).attr('display', 'none');\n    t.setState({selectedPath: d});\n    const both = parentElement.selectAll('.' + constants.lineStylingFullClass);\n    both.attr('display', 'inherit');\n  }\n};\n\nexport const removePath = function (d, t) {\n  if (t.graphData.links.indexOf(d) === -1) {\n    throw new Error('d not found in graph links: ' + JSON.stringify(d));\n  }\n  const outgoing = d.source.id;\n  const incoming = d.target.id;\n  spliceUtil(t.nodeOut[outgoing], d.target);\n  spliceUtil(t.nodeIn[incoming], d.source);\n  spliceUtil(t.graphData.links, d);\n};\n\n\nexport const calculatePathTooltipPosition = function (link_label, d3) {\n  link_label.attr('x', function (d) {\n    const node = d3.select(link_label.node().parentElement).selectAll('path').node();\n    const pathLength = node.getTotalLength();\n    d.point = node.getPointAtLength(pathLength / 2);\n    return d.point.x - (d3.select(this).attr('width') / 2);\n  }).attr('y', function (d) {\n    return d.point.y - (d3.select(this).attr('height') / 2);\n  });\n};\n\n\nexport const calculateLabelPositions = function (link_label) {\n  const text = link_label.selectAll('.' + constants.nodeVersionTextClass);\n  text.attr('x', function (d) {\n    const node = d3.select(d3.select(this).node().parentElement.parentElement).select('path').node();\n    const pathLength = node.getTotalLength();\n    d.point = node.getPointAtLength(pathLength / 2);\n    return d.point.x;\n  }).attr('y', function (d) {\n    return d.point.y;\n  });\n\n  const image = link_label.selectAll('.' + constants.lineLimitedThroughputClass);\n  image.attr('x', function (d) {\n    const node = d3.select(d3.select(this).node().parentElement.parentElement).select('path').node();\n    const pathLength = node.getTotalLength();\n    d.point = node.getPointAtLength(pathLength / 2);\n    return d.point.x - 44;\n  }).attr('y', function (d) {\n    return d.point.y + d.tempIndex[d3.select(this).attr('data-key')]* 20 + 15;\n  });\n\n  const secondarytext = link_label.selectAll('.' + constants.lineLimitedThroughputText);\n  secondarytext.attr('x', function (d) {\n    const node = d3.select(d3.select(this).node().parentElement.parentElement).select('path').node();\n    const pathLength = node.getTotalLength();\n    d.point = node.getPointAtLength(pathLength / 2);\n    return d.point.x - 20;\n  }).attr('y', function (d) {\n    return d.point.y + d.tempIndex[d3.select(this).attr('data-key')] * 20 + 24;\n  });\n\n\n};\n\n\n\nexport const insertEdgeLabel = function (elem) {\n\n  // Perhaps not needed!\n  const link_label = elem.append('g').attr('class', 'textLabel');\n\n\n  updateNodeTierExternal(link_label, 0, 0);\n\n  const link_label2 = elem.append('g').attr('class', 'resourceThroughput');\n\n  d3.selectAll('.' + constants.lineLimitedThroughputText).remove();\n  d3.selectAll('.' + constants.lineLimitedThroughputClass).remove();\n\n  d3.selectAll('.resourceThroughput').each(function(d) {\n\n    const edgeThis = d3.select(this);\n\n    let index = 0;\n    d.tempIndex = {};\n    Object.keys(d.itemThroughPut || {}).forEach((key) => {\n      const item = d.itemThroughPut[key];\n\n      if (!d.itemIconLookup) return;\n\n      // d.tempIndex\n      d.tempIndex[key] = index++;\n\n      let definedColor = 'LightCoral';\n\n      if (d.forceOverwritable) {\n        definedColor = 'LightBlue';\n      }\n\n      if (item.actual <= item.max) {\n        definedColor = 'white';\n      }\n\n      const icon = d.itemIconLookup[key];\n\n      edgeThis.append('svg:image')\n        .classed(constants.lineLimitedThroughputClass, true)\n        .attr('xlink:href', function (d) {\n          return icon;\n        })\n        .attr('data-key', key)\n        .attr('height', 20)\n        .attr('width', 20);\n\n\n      edgeThis.append('text')\n        .attr('fill', 'black')\n        .attr('class', 'overclockFont')\n        .classed(constants.lineLimitedThroughputText, true)\n        .style('text-anchor', 'start')\n        .style('dominant-baseline', 'central')\n        .attr('stroke', 'black')\n        .attr('stroke-width', 4)\n        .attr('font-size', 20)\n        .attr('data-key', key)\n        .text(function(d) {\n          return Math.round(item.actual * 100) / 100 + '/' + Math.round(item.max * 100) / 100;\n        });\n\n      edgeThis.append('text').attr('fill', definedColor)\n        .attr('class', 'overclockFont')\n        .classed(constants.lineLimitedThroughputText, true)\n        .style('text-anchor', 'start')\n        .style('dominant-baseline', 'central')\n        .attr('font-size', 20)\n        .attr('data-key', key)\n        .text(function(d) {\n          return Math.round(item.actual * 100) / 100 + '/' + Math.round(item.max * 100) / 100;\n        });\n    });\n  });\n};","import constants from './constants';\nimport {addPath, removePath} from './edgeActions';\nimport * as d3 from 'd3';\nimport {deselect_path_and_nodes} from './graphActions';\nimport {spliceUtil} from './util';\n\nimport { parseSvg } from 'd3-interpolate/src/transform/parse';\n\nexport const add_node = (d, t) => {\n\n  const zoomData = parseSvg(d3.select('#svgGroup').attr('transform'));\n  console.error(zoomData)\n\n  var viewCenter = [];\n\n\n  const bodyEl = document.getElementById('mainRender');\n\n  const width = bodyEl.clientWidth;\n  const height = bodyEl.clientHeight;\n\n  viewCenter[0] = (0.5) * ( width/zoomData.scaleX ) - (zoomData.translateX / zoomData.scaleX);\n  viewCenter[1] =  (0.5) * ( height/zoomData.scaleY ) - (zoomData.translateY / zoomData.scaleY);\n\n  d.id = d.id || t.id++;\n  d.x = d.x || 0;\n  d.y = d.y || 0;\n\n  d.fx = viewCenter[0];\n  d.fy = viewCenter[1];\n  console.error(viewCenter);\n\n  d.overclock = d.overclock || 100;\n  console.log(JSON.stringify(d));\n  t.graphData.nodes.push(d);\n  t.updateGraphHelper();\n};\n\nexport const delete_node = function (d, t) {\n  // unselect currently selected node\n  const selectedNode = t.state.selectedNode;\n  remove_select_from_nodes(t);\n\n  const toSplice = t.graphData.links.filter(function (l) {\n    return l.source.id === selectedNode.id || l.target.id === selectedNode.id;\n  });\n\n  toSplice.map(function (l) {\n    removePath(l, t);\n  });\n  spliceUtil(t.graphData.nodes, selectedNode);\n};\n\n\nexport const node_clicked = function (d, t) {\n  // unselect currently selected node\n  const previouslySelected = t.state.selectedNode;\n  remove_select_from_nodes(t);\n  if (previouslySelected !== d) {\n    deselect_path_and_nodes(t);\n    t.setState({selectedNode: d});\n\n    d3.select(this).classed(constants.graphNodeHoverClass, true)\n      .classed(constants.graphNodeGrabbedClass, false)\n      .classed(constants.selectedNodeClass, true);\n  }\n};\n\nexport const remove_select_from_nodes = function (graphSvg) {\n  d3.select('.' + constants.selectedNodeClass)\n    .classed(constants.selectedNodeClass, false)\n    .classed(constants.graphNodeGrabbedClass, false);\n  graphSvg.setState({selectedNode: null});\n};\n\n\nexport const node_mouse_over = function (d, graphSvg) {\n\n  graphSvg.setState({mouseOverNode: d3.select(this).datum()});\n  d3.select(this).classed(constants.graphNodeHoverClass, true);\n};\n\nexport const node_mouse_out = function (d, graphSvg) {\n  graphSvg.setState({mouseOverNode: null});\n  d3.select(this).classed(constants.graphNodeHoverClass, false);\n};\n\nexport const node_mouse_down = function (d, graphSvg) {\n  if (d3.event.shiftKey) {\n    graphSvg.setState({shiftHeld: true, sourceId: d3.select(this).datum().id});\n  } else {\n    d3.select(this).classed(constants.graphNodeGrabbedClass, true);\n  }\n};\n\nexport const node_mouse_up = function (d, graphSvg) {\n  // Only triggered if it's not a drag\n  if (graphSvg.state && graphSvg.state.shiftHeld) {\n  } else {\n    //probably can't get to this case\n  }\n  graphSvg.setState({shiftHeld: false});\n};\n\n\nconst overClockCalculation = (d, percentage_metric, offset, endOffsetRaw) => {\n  const endOffset = endOffsetRaw + offset;\n  const percentage = d[percentage_metric] * 100 || 0;\n  const arc = d3.arc()\n    .innerRadius(50)\n    .outerRadius(50);\n\n  const m = (endOffset - offset) / 100;\n  const b = offset;\n\n  const start = b / 180 * Math.PI;\n  const end = (m * percentage + b) / 180 * Math.PI;\n  return arc({startAngle: start, endAngle: end});\n};\n\n\nexport const addEfficiencyArc = (parent, percentage_metric, offset, endOffset) => {\n  parent.append('path').filter(function(d) { return !['Container', 'Logistic'].includes(d.machine.name) })\n    .attr('class', constants.overclockedArcClass)\n    .attr('fill', 'none')\n    .attr('stroke-width', 8);\n\n  editEfficiencyArc(percentage_metric, offset, endOffset);\n};\n\nexport const editEfficiencyArc = (percentage_metric, offset, endOffset) => {\n  d3.selectAll('.' + constants.overclockedArcClass)\n    .attr('d', function (d) {\n      return overClockCalculation(d, percentage_metric, offset, endOffset);\n    })\n    .attr('stroke', function(d) {\n        const p = d[percentage_metric] || 0;\n        const r1 = 255;\n        const g1 = 0;\n        const b1 = 0;\n\n        const r2 = 50;\n        const g2 = 205;\n        const b2 = 50;\n        const r = Math.round((1.0-p) * r1 + p * r2 + 0.5);\n        const g = Math.round((1.0-p) * g1 + p * g2 + 0.5);\n        const b = Math.round((1.0-p) * b1 + p * b2 + 0.5);\n\n        return 'rgb(' + r + ',' + g + ',' + b + ')';\n    });\n};\n\nexport const addNodeImage = (parent) => {\n  parent.append('svg:image')\n    .attr('class', function (d) {\n      if (d.machine && d.machine.icon) {\n        return 'machine-icon';\n      }\n      return 'dev-icon';\n    })\n    .attr('xlink:href', function (d) {\n      if (d.instance && d.instance.icon) {\n        return d.instance.icon;\n      }\n      if (d.machine && d.machine.icon) {\n        return d.machine.icon;\n      }\n      return 'https://raw.githubusercontent.com/rhocode/rhocode.github.io/master/img/satoolsfactory_icons/Smelter.png';\n    })\n    .attr('x', function (d) {\n      return -50;\n    })\n    .attr('y', function (d) {\n      return -50;\n    })\n    .attr('height', 100)\n    .attr('width', 100);\n};\n\nexport const wheelZoomCalculation = function (d) {\n  d3.event.stopImmediatePropagation();\n\n  let roughEstimate = -1;\n\n  if (d3.event.deltaY < 0) {\n    roughEstimate = 1;\n  }\n\n  d.overclock = (d.overclock + (roughEstimate));\n  if (d.overclock < 0) {\n    d.overclock = 251 + d.overclock;\n  } else if (d.overclock > 250) {\n    d.overclock = d.overclock - 251;\n  }\n  updateOverclock(d3.select(this).select('.' + constants.overclockedTextClass));\n};\n\nexport const updateOverclock = function(textElement) {\n  textElement.text(function (d) {\n    return d.overclock;\n  });\n};\n\nexport const updateNodeTier = function(textElement) {\n  textElement.text(function (d) {\n    return d.instance.machine_version.representation;\n        // + (d.id ? '(' + d.id + ')' : '' );\n  });\n};\n\nexport const updateComponents = function(elementsToUpdate) {\n  const t = this;\n  const itemAccessor = t.props.parentAccessor.state.recipe.item;\n  elementsToUpdate.each(function(d) {\n    const allowedInRemaining = d.allowedIn.slice();\n    const provided = t.nodeIn[d.id] || [];\n    const actualIn = provided.map(node => node.allowedOut).flat(1);\n\n    actualIn.forEach(id => {    spliceUtil(allowedInRemaining, id); });\n\n    const element = d3.select(this);\n\n    element.selectAll('.' + constants.nodeRequirementsSubIconClass).remove();\n\n    if (allowedInRemaining.length > 0) {\n      element.append('text').attr('class', 'fas fa-arrow-left')\n        .classed(constants.nodeRequirementsSubIconClass, true)\n        .attr('x', function (d) {\n          return 56;\n        })\n        .attr('y', function (d) {\n          return -28;\n        })\n        .attr('height', 25)\n        .attr('width', 25);\n      const fetchRemainingIn = allowedInRemaining.map(item =>\n        itemAccessor.filter(findItem => item === findItem.id)[0]\n      );\n\n      if (fetchRemainingIn.length > 1)\n        console.log(fetchRemainingIn);\n\n      const outputtedItems = new Set();\n\n      let index = 0;\n      fetchRemainingIn.forEach((remaining) => {\n        if (outputtedItems.has(remaining.icon)) {\n          return;\n        }\n        outputtedItems.add(remaining.icon);\n        element.append('svg:image')\n          .classed(constants.nodeRequirementsSubIconClass, true)\n          .on('mousedown', function(d) {\n            d3.event.stopImmediatePropagation();\n          })\n          .on('click', function(d) {\n            const findSuitableSource = t.graphData.nodes.filter(node => node.id !== d.id && node.open_out_slot > 0\n              && node.allowedOut.includes(remaining.id));\n            const thisNode = t.graphData.nodes.filter(node => node.id === d.id);\n            if (findSuitableSource.length > 0) {\n              addPath(t, findSuitableSource[0], thisNode[0]);\n            }\n            d3.event.stopImmediatePropagation();\n          })\n          .attr('xlink:href', function (d) {\n            return remaining.icon;\n          })\n          .attr('x', function (d) {\n            return 58 + 28 + (28 * index++);\n          })\n          .attr('y', function (d) {\n            return -28;\n          })\n          .attr('height', 25)\n          .attr('width', 25);\n      });\n    }\n    const allowedOutRemaining = d.allowedOut.slice();\n    const provides = t.nodeOut[d.id] || [];\n    const actualOut = provides.map(node => node.allowedIn).flat(1);\n    actualOut.forEach(id => {   spliceUtil(allowedOutRemaining, id); });\n\n    if (allowedOutRemaining.length > 0) {\n      element.append('text').attr('class', 'fas fa-arrow-left')\n        .classed(constants.nodeRequirementsSubIconClass, true)\n        .attr('x', function (d) {\n          return -58 - 25;\n        })\n        .attr('y', function (d) {\n          return 3;\n        })\n        .attr('height', 25)\n        .attr('width', 25);\n      const fetchRemainingOut = allowedOutRemaining.map(item =>\n        itemAccessor.filter(findItem => item === findItem.id)[0]\n      );\n\n      const outputtedItemsIn = new Set();\n\n      let index = 0;\n      fetchRemainingOut.forEach((remaining) => {\n        if (outputtedItemsIn.has(remaining.icon)) {\n          return;\n        }\n        outputtedItemsIn.add(remaining.icon);\n        element.append('svg:image')\n          .classed(constants.nodeRequirementsSubIconClass, true)\n          .on('mousedown', function(d) {\n            d3.event.stopImmediatePropagation();\n          })\n          .on('click', function(d) {\n            const findSuitableTarget = t.graphData.nodes.filter(node => node.id !== d.id && node.open_in_slots > 0\n              && node.allowedIn.includes(remaining.id));\n            const thisNode = t.graphData.nodes.filter(node => node.id === d.id);\n            if (findSuitableTarget.length > 0) {\n              addPath(t, thisNode[0], findSuitableTarget[0]);\n            }\n            d3.event.stopImmediatePropagation();\n          })\n          .attr('xlink:href', function (d) {\n            return remaining.icon;\n          })\n          .attr('x', function (d) {\n            return -56 - 25 - 28 - (28 * index++);\n          })\n          .attr('y', function (d) {\n            return 3;\n          })\n          .attr('height', 25)\n          .attr('width', 25);\n      });\n    }\n  });\n};\n\nexport const forceUpdateComponentLabel = function() {\n  updateComponents.call(this, d3.selectAll('.' + constants.nodeRequirementsIconClass));\n};\n\n\nexport const insertComponents = function(parentElement) {\n\n  const el1 = parentElement.append('g').classed(constants.nodeRequirementsIconClass, true);\n\n  el1.each(function(d){\n    if (d.machine && ['Container', 'Logistic'].includes(d.machine.name)) {\n      // save this for later...\n    } else {\n      d3.select(this).append('svg:image')\n        .classed(constants.nodeProducesClass, true)\n        .attr('xlink:href', function (d) {\n          return d.data.recipe.item.icon;\n        })\n        .attr('x', function (d) {\n          return -55;\n        })\n        .attr('y', function (d) {\n          return 18;\n        })\n        .attr('height', 40)\n        .attr('width', 40);\n    }\n  });\n\n  d3.selectAll('.' + constants.nodeRequirementsIconClass).each(function(d) {\n    if (d.machine && ['Container', 'Logistic'].includes(d.machine.name)) {\n      const nodeThis = d3.select(this);\n      nodeThis.selectAll('.' + constants.nodeProducesClass).remove();\n      const outputtedItems = new Set();\n      let i = 0;\n      (d.containedItems || []).forEach((containedItem, index) => {\n        if (outputtedItems.has(containedItem.icon)) {\n          return;\n        }\n        outputtedItems.add(containedItem.icon);\n        nodeThis.append('svg:image')\n          .classed(constants.nodeProducesClass, true)\n          .attr('xlink:href', function (d) {\n            return d.containedItems[index].icon;\n          })\n          .attr('x', function (d) {\n            return -55;\n          })\n          .attr('y', function (d) {\n            return 18 + (30 * i++);\n          })\n          .attr('height', 40)\n          .attr('width', 40);\n      });\n    }\n  });\n\n\n  parentElement.append('g').classed(constants.nodeSurplusIconClass, true);\n\n  d3.selectAll('.' + constants.nodeSurplusIconClass).each(function(d) {\n    const nodeThis = d3.select(this);\n    nodeThis.selectAll('.' + constants.nodeProducesPerMinText).remove();\n\n    nodeThis.append('text')\n      .attr('fill', 'white')\n      .attr('class', 'overclockFont')\n      .classed(constants.nodeProducesPerMinText, true)\n      .style('text-anchor', 'end')\n      .style('dominant-baseline', 'central')\n      .attr('stroke', 'black')\n      .attr('stroke-width', 4)\n      .attr('x', -5).attr('y', -37)\n      .attr('font-size', 30)\n      .text(function(d) {\n        let combinedSum = 0;\n        Object.keys(d.itemsPerMinute || {}).forEach(item => {\n          combinedSum += d.itemsPerMinute[item];\n        });\n\n        return ((Math.round(combinedSum * 100) / 100) || 0) + '/m';\n      });\n\n\n    nodeThis.append('text').attr('fill', 'white')\n      .attr('class', 'overclockFont')\n      .classed(constants.nodeProducesPerMinText, true)\n      .style('text-anchor', 'end')\n      .style('dominant-baseline', 'central')\n      .attr('x', -5).attr('y', -37)\n      .attr('font-size', 30)\n      .text(function(d) {\n        let combinedSum = 0;\n        Object.keys(d.itemsPerMinute || {}).forEach(item => {\n          combinedSum += d.itemsPerMinute[item];\n        });\n\n        return ((Math.round(combinedSum * 100) / 100) || 0) + '/m';\n      });\n  });\n\n  const el3 = parentElement.append('g').classed(constants.nodeLimitingThroughputClass, true);\n\n\n  d3.selectAll('.' + constants.nodeLimitingThroughputClass).each(function(d) {\n    const nodeThis = d3.select(this);\n    nodeThis.selectAll('.' + constants.nodeLimitingThroughputText).remove();\n\n    Object.keys(d.itemThroughPut || {}).forEach((key, index) => {\n      const item = d.itemThroughPut[key];\n\n      if (!d.itemIconLookup) return;\n\n      let definedColor = 'LightCoral';\n\n      if (item.actual === item.max) {\n        definedColor = 'white';\n      } else if (item.actual < item.max) {\n        definedColor = 'gold';\n      }\n\n      const icon = d.itemIconLookup[key];\n\n      nodeThis.append('svg:image')\n        .classed(constants.nodeLimitingThroughputText, true)\n        .attr('xlink:href', function (d) {\n          return icon;\n        })\n        .attr('x', -49 + 35).attr('y', 59 + (index * 20))\n        .attr('height', 20)\n        .attr('width', 20);\n\n      nodeThis.append('text')\n        .attr('fill', 'black')\n        .attr('class', 'overclockFont')\n        .classed(constants.nodeLimitingThroughputText, true)\n        .style('text-anchor', 'start')\n        .style('dominant-baseline', 'central')\n        .attr('stroke', 'black')\n        .attr('stroke-width', 4)\n        .attr('x', -25 + 35).attr('y', 68 + (index * 20))\n        .attr('font-size', 20)\n        .text(function(d) {\n          return Math.round(item.actual * 100) / 100 + '/' + Math.round(item.max * 100) / 100;\n        });\n\n\n      nodeThis.append('text').attr('fill', definedColor)\n        .attr('class', 'overclockFont')\n        .classed(constants.nodeLimitingThroughputText, true)\n        .style('text-anchor', 'start')\n        .style('dominant-baseline', 'central')\n        .attr('x', -25 + 35).attr('y', 68 + (index * 20))\n        .attr('font-size', 20)\n        .text(function(d) {\n          return Math.round(item.actual * 100) / 100 + '/' + Math.round(item.max * 100) / 100;\n        });\n\n    });\n\n  });\n\n  forceUpdateComponentLabel.call(this);\n};\n\nexport const updateNodeTierExternal = function(el, x = 35, y = 35) {\n  el.selectAll('.' + constants.nodeVersionTextClass).remove();\n\n  const backgroundText = el.append('text')\n    .attr('fill', 'white')\n    .attr('class', 'overclockFont')\n    .classed(constants.nodeVersionTextClass, true)\n    .style('text-anchor', 'middle')\n    .style('dominant-baseline', 'central')\n    .attr('stroke', 'black')\n    .attr('stroke-width', 4)\n    .attr('x', x).attr('y', y)\n    .attr('font-size', 30);\n\n  updateNodeTier(backgroundText);\n\n  const tspan = el.append('text').attr('fill', 'white')\n    .attr('class', 'overclockFont')\n    .classed(constants.nodeVersionTextClass, true)\n    .style('text-anchor', 'middle')\n    .style('dominant-baseline', 'central')\n    .attr('x', x).attr('y', y)\n    .attr('font-size', 30);\n\n  updateNodeTier(tspan);\n\n\n\n\n\n};\n\nexport const insertNodeTier = (gEl) => {\n  // const el = gEl.append('g').attr('text-anchor', 'middle').attr('dy', '-' + (nwords - 1) * 7.5);\n  const el = gEl.append('g').attr('id', function(d) { return 'node-level-accessor-' + d.id; });\n  updateNodeTierExternal(el);\n};\n\nexport const insertNodeOverclock = (gEl) => {\n  // const el = gEl.append('g').attr('text-anchor', 'middle').attr('dy', '-' + (nwords - 1) * 7.5);\n  const el = gEl\n      .filter(function(d) { return !['Container', 'Logistic'].includes(d.machine.name) })\n      .append('g').attr('text-anchor', 'middle').attr('dy', 0);\n  el.append('circle').attr('r', 17).attr('fill', '#FFFFFF').attr('cx', 32).attr('cy', -38).attr('stroke', 'black').attr('stroke-width', 1);\n\n  const tspan = el.append('text').attr('fill', 'black')\n    .attr('class', 'overclockFont')\n    .classed(constants.overclockedTextClass, true)\n    .attr('x', 32).attr('dy', -32)\n    .attr('font-size', 20);\n\n  updateOverclock(tspan);\n};","import constants from './constants';\nimport {delete_node} from './nodeActions';\nimport {removePath} from './edgeActions';\n\nimport * as d3 from 'd3';\n\nexport const svgKeyUp = function (d, t) {\n  t.setState({pressedKey: null});\n};\n\nexport const svgKeyDown = function (d, t) {\n  // make sure repeated keyd presses don't register for each keydown\n  if (document.activeElement && document.activeElement.nodeName === 'INPUT') return;\n  if (t.state.pressedKey) return;\n  t.setState({pressedKey: d3.event.keyCode});\n  // this.lastKeyDown = d3.event.keyCode;\n  // const selectedNode = this.selectedNode,\n  //   selectedEdge = this.selectedEdge;\n  //\n  switch (d3.event.keyCode) {\n  case constants.BACKSPACE_KEY:\n  case constants.DELETE_KEY:\n    if (t.state.selectedPath) {\n      removePath.call(this, t.state.selectedPath, t);\n      t.setState({selectedPath: null});\n      t.updateGraphHelper();\n    } else if (t.state.selectedNode) {\n      delete_node.call(this, d, t);\n      t.setState({selectedNode: null});\n      t.updateGraphHelper();\n    }\n    break;\n  }\n};","export const appendMarkerAttributes = (marker) => {\n  return marker.attr('viewBox', '0 -5 10 10')\n  .attr('markerWidth', 10)\n  .attr('markerHeight', 10)\n  .attr('orient', 'auto')\n  .append('svg:path')\n  .attr('d', 'M0,-5L10,0L0,5');\n};","import React, {Component} from 'react';\nimport {svgKeyDown, svgKeyUp} from './keyboardEvents';\nimport {deselect_path_and_nodes, initSimulation, updateGraph, zoom_actions, analyzeGraph} from './graphActions';\nimport {appendMarkerAttributes} from './markerActions';\n\nimport * as d3 from 'd3';\nimport {add_node} from './nodeActions';\nimport {parse, stringify} from 'flatted/esm';\nimport pako from 'pako';\nimport Base64 from 'Base64';\n\nconst styles = theme => ({\n  tooltip: {\n    position: 'absolute',\n    textAlign: 'center',\n    padding: 2,\n    font: '12px sans-serif',\n    background: 'lightsteelblue',\n    border: 0,\n    borderRadius: 8,\n    pointerEvents: 'none',\n    zIndex: 1202\n  }\n});\n\nclass GraphSvg extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  addNode(nodeData) {\n    add_node(nodeData, this);\n\n    console.log(JSON.stringify(nodeData));\n  }\n\n  resetCamera() {\n    this.inputSvg.transition()\n      .duration(750)\n      .call(this.zoom_handler.transform, d3.zoomIdentity);\n\n    this.updateGraphHelper();\n  }\n\n  jiggle() {\n    this.graphData.nodes.forEach(node => {\n      node.x = 0;\n      node.y = 0;\n    });\n\n    this.updateGraphHelper();\n  }\n\n  fixNodes() {\n    this.graphData.nodes.forEach(node => {\n      node.fx = node.x;\n      node.fy = node.y;\n    });\n\n    this.updateGraphHelper();\n  }\n\n  unfixNodes() {\n    this.graphData.nodes.forEach(node => {\n      node.fx = null;\n      node.fy = null;\n      node.vx = 0;\n      node.vy  = 0;\n    });\n\n    this.updateGraphHelper();\n  }\n\n  createGraph(inputSvg, nodes = [], links = [], data = {}) {\n    this.graphData = {\n      nodes: nodes,\n      links: links\n    };\n\n    this.id = Math.max(...(this.graphData.nodes.map(elem => elem.id))) + 1;\n    if (this.id === Number.NEGATIVE_INFINITY) {\n      this.id = 0;\n    }\n    this.inputSvg = inputSvg;\n\n    //add encompassing group for the zoom\n    this.svgGroup = inputSvg.append('g')\n      .attr('class', 'objects')\n      .attr('id', 'svgGroup');\n\n    const graphObjects = this.svgGroup;\n\n    const t = this;\n\n    inputSvg.on('click', function (d) {\n      deselect_path_and_nodes.call(this, t);\n    });\n\n    d3.select(window).on('keydown', function (d) {\n      svgKeyDown.call(this, d, t);\n    }).on('keyup', function (d) {\n      svgKeyUp.call(this, d, t);\n    });\n\n    //add zoom capabilities\n    this.zoom_handler = d3.zoom()\n      .on('zoom', () => zoom_actions(graphObjects))\n      .scaleExtent([0.1, 6]);\n    this.zoom_handler(inputSvg);\n    inputSvg.on('dblclick.zoom', null);\n\n    //Create definitions for the arrow markers showing relationship directions\n    const defs = graphObjects.append('defs');\n    appendMarkerAttributes(defs.append('svg:marker')\n      .attr('id', 'default-path-arrow')\n      .attr('refX', 35));\n\n    appendMarkerAttributes(defs.append('svg:marker')\n      .attr('id', 'highlight-path-arrow-orange')\n      .attr('fill', 'orange')\n      .attr('refX', 24));\n\n    appendMarkerAttributes(defs.append('svg:marker')\n      .attr('id', 'dragged-end-arrow')\n      .attr('refX', 7));\n\n    const filter = defs.append('filter')\n      .attr('id', 'drop-shadow')\n      .attr('height', '130%')\n      .attr('width', '130%')\n      .attr('filterUnits', 'userSpaceOnUse');\n\n    filter.append('feGaussianBlur')\n      .attr('in', 'SourceAlpha')\n      .attr('stdDeviation', 5)\n      .attr('result', 'blur');\n\n    filter.append('feOffset')\n      .attr('in', 'blur')\n      .attr('result', 'offsetBlur');\n\n    filter.append('feFlood')\n      .attr('in', 'offsetBlur')\n      .attr('flood-color','white')\n      .attr('flood-opacity', '1')\n      .attr('result', 'offsetColor');\n\n    filter.append('feComposite')\n      .attr('in', 'offsetColor')\n      .attr('in2', 'offsetBlur')\n      .attr('operator', 'in')\n      .attr('result', 'offsetBlur');\n\n    const feMerge = filter.append('feMerge');\n\n    feMerge.append('feMergeNode')\n      .attr('in', 'offsetBlur');\n    feMerge.append('feMergeNode')\n      .attr('in', 'SourceGraphic');\n\n\n    //The dragged line\n    this.dragLine = graphObjects.append('g').append('svg:path')\n      .attr('class', 'link dragline line-object hidden')\n      .attr('d', 'M0,0L0,0')\n      .attr('stroke', function (d) {\n        return d3.color('#000000');\n      })\n      .style('marker-end', 'url(#dragged-end-arrow)');\n\n    const graphLinksGroup = graphObjects.append('g') //graphLinksData\n      .attr('class', 'links-g-group');\n\n    const graphNodesGroup = graphObjects\n      .append('g')\n      .attr('class', 'nodes-g-group');\n\n    let simulation = initSimulation();\n\n    this.graphNodesGroup = graphNodesGroup;\n    this.graphLinksGroup = graphLinksGroup;\n    this.simulation = simulation;\n    this.updateGraphHelper();\n  }\n\n  updateGraphHelper() {\n    updateGraph.call(this, this.simulation, this.graphNodesGroup, this.graphLinksGroup);\n  }\n\n  clearGraphDataRaw() {\n    const parent = d3.select(d3.select('#mainRender').node().parentElement);\n    d3.select('#mainRender').selectAll('*').remove();\n    d3.select('#mainRender').remove();\n\n    return parent.append('svg').attr('id', 'mainRender');\n  }\n\n  clearGraphData(t) {\n    deselect_path_and_nodes.call(this, t);\n    const svg = this.clearGraphDataRaw();\n    this.createGraph(svg);\n  }\n\n  loadGraphData(data) {\n    const svg = this.clearGraphDataRaw();\n    //nodes, links, data\n    this.createGraph(svg, data.graphData.nodes, data.graphData.links);\n  }\n\n  compressGraphData() {\n    const compressedData = {\n      version: 0.01,\n      graphData: this.graphData,\n      playerData: {},\n      secret: {}\n    };\n    return Base64.btoa(pako.deflate(stringify(compressedData), { to: 'string' }));\n  }\n\n  inflateGraphData(data) {\n    return parse(pako.inflate(Base64.atob(data),  { to: 'string' }));\n  }\n\n  analyze = () =>  {\n    analyzeGraph.call(this);\n    this.updateGraphHelper();\n  };\n\n  componentDidMount() {\n    // const data = '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';\n    const data = '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';\n    // const data = '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';\n    // const data = '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';\n    // const data = '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';\n    this.loadGraphData(this.inflateGraphData(data));\n    this.analyze();\n  }\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (this.state.selectedPath !== prevState.selectedPath || this.state.selectedNode !== prevState.selectedNode) {\n      this.props.parentAccessor.setState({selectedPath: this.state.selectedPath, selectedNode: this.state.selectedNode});\n    }\n  }\n\n\n  render() {\n    return <svg id=\"mainRender\"/>;\n  }\n}\n\nexport default GraphSvg;","import React from 'react';\nimport {ClickAwayListener, withStyles} from '@material-ui/core';\nimport * as d3 from 'd3';\nimport PropTypes from 'prop-types';\n\nconst styles = theme => ({\n});\n\nclass ClickAwayListenerV2 extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.windowOnClobber = null;\n    this.clobberList = [];\n  }\n\n  componentDidMount() {\n    this.windowOnClobber = d3.select(this.props.clobberedElement).on('click');\n    d3.select(this.props.clobberedElement).on('click', this.props.onClickAway);\n\n    for(let elem of document.querySelectorAll('*')) {\n      this.clobberList.push(elem);\n      elem.addEventListener('click',  this.props.onClickAway, true);\n    }\n  }\n\n  componentWillUnmount() {\n    d3.select(this.props.clobberedElement).on('click', this.windowOnClobber);\n    for(let elem of this.clobberList) {\n      elem.removeEventListener('click',  this.props.onClickAway, true);\n    }\n    this.clobberList = [];\n  }\n\n  render() {\n    const {onClickAway} = this.props;\n\n    return (\n      <ClickAwayListener onClickAway={onClickAway}>\n        {this.props.children}\n      </ClickAwayListener>\n    );\n  }\n}\n\nClickAwayListenerV2.propTypes = {\n  classes: PropTypes.object.isRequired,\n  clobberedElement: PropTypes.string.isRequired,\n  onClickAway: PropTypes.func.isRequired,\n  children: PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(ClickAwayListenerV2);","import React from 'react';\rimport MenuItem from '@material-ui/core/MenuItem';\rimport Button from '@material-ui/core/Button';\rimport Paper from '@material-ui/core/Paper';\rimport AddBoxIcon from '@material-ui/icons/AddBox';\rimport Popper from '@material-ui/core/Popper';\rimport Tooltip from '@material-ui/core/Tooltip';\r\rimport {withStyles} from '@material-ui/core';\rimport MenuList from '@material-ui/core/MenuList';\rimport Grow from '@material-ui/core/Grow';\rimport ClickAwayListenerV2 from \"./ClickAwayListenerV2\";\r\rconst styles = theme => ({\r  root: {},\r  button: {\r    flex: '0 0 100%',\r    justifyContent: 'left',\r    padding: 10,\r  },\r  paper: {\r    margin: theme.spacing.unit * 2,\r    display: 'flex',\r  },\r  label: {\r    paddingLeft: 10,\r  },\r  popper: {\r    zIndex: 1200,\r    left: '13px !important',\r  },\r  itemListIcon: {\r    height: 24,\r    width: 24,\r    paddingRight: 15,\r  },\r  tooltip: {},\r  tooltipIcon: {\r    height: 40,\r    display: 'inline-block',\r    paddingLeft: 10\r  },\r  tooltipIconFirst: {\r    height: 40,\r    display: 'inline-block',\r  },\r  tooltipText: {\r    fontSize: 18,\r    display: 'inline-block',\r  },\r});\r\rclass SidebarButton extends React.Component {\r\r  constructor(props) {\r    super(props);\r    this.state = {anchorEl: null};\r  }\r\r  handleMenu = event => {\r    if (event.currentTarget === this.state.lastTarget)\r      return;\r    this.setState({anchorEl: event.currentTarget});\r  };\r\r  handleClose = () => {\r    this.setState({\r      anchorEl: null,\r      lastTarget: this.state.anchorEl\r    }, () => new Promise(resolve => setTimeout(resolve, 100)).then(() => this.setState({lastTarget: null})));\r  };\r\r  render() {\r    const { classes, label, appObject } = this.props;\r    const { anchorEl } = this.state;\r    const open = Boolean(anchorEl);\r    const listItems = this.props.items.map((link) => {\r      return (\r        <Tooltip key={link.id} className={classes.tooltip} placement=\"right\" title={\r          link.inputs.map((element, index) => {\r            return (\r              <React.Fragment key={element.item.id}>\r                <img src={element.item.icon} className={index === 0 ? classes.tooltipIconFirst : classes.tooltipIcon}/>\r                <div className={classes.tooltipText}>{element.quantity}</div>\r              </React.Fragment>\r            );\r          })\r        }>\r          <MenuItem onClick={() => {\r            const machine_nodes = appObject.state.machine_node.machine_node;\r            machine_nodes.sort((node1, node2) => node1.rank - node2.rank);\r            const upgrades = machine_nodes.filter(node => node.machine_class.id === link.machine_class.id );\r            const instance = upgrades[0];\r\r            appObject.graphSvg.addNode(\r              {\r                data: {recipe: link},\r                machine: link.machine_class,\r                allowedIn: link.inputs.map(dict => dict.item.id),\r                allowedOut: [link.item.id],\r                instance: instance,\r                upgradeTypes: upgrades\r              }\r            );\r            this.handleClose();\r          }}>\r            <img alt=\"probably some goat image\" src={link.item.icon} className={classes.itemListIcon}/>\r            {link.name}\r            <div className={classes.grow}/>\r          </MenuItem>\r        </Tooltip>\r      );\r    });\r    return (\r      <React.Fragment key={label}>\r        <Paper className={classes.paper}>\r          <Button\r            aria-owns={open ? 'menu-appbar' : null}\r            aria-haspopup=\"true\"\r            onClick={open ? this.handleClose : this.handleMenu}\r            className={classes.button}\r          >\r            <AddBoxIcon/>\r            <div className={classes.label}>\r              {label}\r            </div>\r          </Button>\r          <Popper className={classes.popper} open={open} anchorEl={anchorEl} transition placement=\"right-start\">\r            {({TransitionProps, placement}) => (\r              <Grow\r                {...TransitionProps}\r                id=\"menu-list-grow\"\r                style={{transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom'}}\r              >\r                <Paper>\r                  <ClickAwayListenerV2 onClickAway={this.handleClose} clobberedElement={'#mainRender'}>\r                    <MenuList>\r                      {listItems}\r                    </MenuList>\r                  </ClickAwayListenerV2>\r                </Paper>\r              </Grow>\r            )}\r          </Popper>\r        </Paper>\r      </React.Fragment>\r    );\r  }\r}\r\rexport default withStyles(styles)(SidebarButton);","import React from 'react';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Button from '@material-ui/core/Button';\nimport {withStyles} from '@material-ui/core';\n\nconst styles = theme => ({\n  root: {},\n  modal: {\n    position: 'absolute',\n    width: theme.spacing.unit * 100,\n    backgroundColor: theme.palette.background.paper,\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing.unit * 4,\n    outline: 'none',\n    margin: 'auto'\n  },\n});\n\nclass PopupDialog extends React.Component {\n\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const {classes, title, contents, open, handleModalClose, children} = this.props;\n    return (\n      <Dialog\n        open={Boolean(open)}\n        onClose={handleModalClose}\n        id='modal'\n      >\n        <DialogTitle>{title}</DialogTitle>\n        <DialogContent>\n          {children}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleModalClose} color='secondary'>Close</Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n\nexport default withStyles(styles)(PopupDialog);","import React from 'react';\nimport Fab from '@material-ui/core/Fab';\nimport HelpIcon from '@material-ui/icons/Help';\n\nimport PopupDialog from './PopupDialog';\nimport {withStyles} from '@material-ui/core';\n\nconst styles = theme => ({\n  fab: {\n    position: 'absolute',\n    bottom: theme.spacing.unit * 2,\n    right: theme.spacing.unit * 2,\n  },\n});\n\nclass FabPopup extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {modalOpen: false};\n  }\n\n  render() {\n    const {classes, title, contents} = this.props;\n\n    return (\n      <React.Fragment>\n        <Fab aria-label='help' color='primary' className={classes.fab} onClick={() => this.setState({modalOpen: true})}>\n          <HelpIcon/>\n        </Fab>\n        <PopupDialog title={title} open={this.state.modalOpen}\n          handleModalClose={() => this.setState({modalOpen: false})}>\n          {contents}\n        </PopupDialog>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default withStyles(styles)(FabPopup);","import React from 'react';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\n\nimport PopupDialog from './PopupDialog';\nimport {withStyles} from '@material-ui/core';\n\nconst styles = theme => ({\n  icons: {\n    marginRight: 0\n  },\n});\n\nclass SidebarPopup extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {modalOpen: false};\n  }\n\n  render() {\n    const {classes, Icon, label, title, contents} = this.props;\n\n    return (\n      <React.Fragment>\n        <ListItem button key={label} onClick={() => this.setState({modalOpen: true})}>\n          <ListItemIcon className={classes.icons}><Icon/></ListItemIcon>\n          <ListItemText primary={label}/>\n        </ListItem>\n        <PopupDialog title={title} open={this.state.modalOpen}\n                     handleModalClose={() => this.setState({modalOpen: false})}>\n          {this.props.children}\n        </PopupDialog>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default withStyles(styles)(SidebarPopup);","import React from 'react';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\n\nimport {withStyles} from '@material-ui/core';\nimport MenuList from '@material-ui/core/MenuList';\nimport Grow from '@material-ui/core/Grow';\nimport ClickAwayListenerV2 from \"./ClickAwayListenerV2\";\n\nconst styles = theme => ({\n  root: {},\n  paper: {\n    margin: theme.spacing.unit * 2,\n    display: 'flex',\n  },\n  label: {\n    paddingLeft: 10,\n  },\n  popper: {\n    zIndex: 1200,\n    left: '13px !important',\n  },\n  itemListIcon: {\n    height: 24,\n    width: 24,\n    paddingRight: 15,\n  },\n});\n\nclass InnerNestedSidebarButton extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {anchorEl: null};\n  }\n\n  handleMenu = event => {\n    if (event.currentTarget === this.state.lastTarget)\n      return;\n    this.setState({anchorEl: event.currentTarget, selectedButton: event.currentTarget.id});\n  };\n\n  handleClose = () => {\n    this.setState({\n      anchorEl: null,\n      lastTarget: this.state.anchorEl,\n      selectedButton: null\n    }, () => new Promise(resolve => setTimeout(resolve, 100)).then(() => this.setState({lastTarget: null})));\n  };\n\n  render() {\n    const {classes, resource, appObject} = this.props;\n    const {anchorEl} = this.state;\n    const icon = resource.item.icon;\n    const label = resource.item.name;\n    const listItems = resource.purities;\n    const machineIcon = resource.machine_class.icon;\n    const open = Boolean(anchorEl);\n    return (\n      <React.Fragment key={label}>\n        <MenuItem\n          aria-owns={open ? 'menu-appbar' : null}\n          aria-haspopup=\"true\"\n          onClick={open ? this.handleClose : this.handleMenu}\n          selected={this.state.selectedButton === label}\n          id={label}\n        >\n          <img src={icon} className={classes.itemListIcon}/>\n          {label}\n        </MenuItem>\n        <Popper className={classes.popper} open={open} anchorEl={anchorEl} transition placement=\"right-start\">\n          {({TransitionProps, placement}) => (\n            <Grow\n              {...TransitionProps}\n              id=\"menu-list-grow\"\n              style={{transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom'}}\n            >\n              <Paper>\n                <ClickAwayListenerV2 onClickAway={this.handleClose} clobberedElement={'#mainRender'}>\n                  <MenuList>\n                    {\n                      listItems.map((item) => {\n                        return (\n                          <MenuItem onClick = {\n                            () => {\n                              const machine_nodes = appObject.state.machine_node.machine_node;\n                              machine_nodes.sort((node1, node2) => node1.rank - node2.rank);\n                              const upgrades = machine_nodes.filter(node => node.machine_class.id === resource.machine_class.id );\n                              const instance = upgrades[0];\n                              console.log(\"YES, ITS TRIGGERED\", item.name);\n                              appObject.graphSvg.addNode(\n                                {\n                                  data: {machine: resource, node: item, recipe: resource, purity: item.name},\n                                  machine: resource.machine_class,\n                                  allowedIn: [],\n                                  allowedOut: [resource.item.id],\n                                  instance: instance,\n                                  upgradeTypes: upgrades,\n                                }\n                              );\n                              this.handleClose();\n                            }\n                          } key={label + item.name}><img src={machineIcon}\n                              className={classes.itemListIcon}/>{item.name}\n                          </MenuItem>\n                        );\n                      })\n                    }\n                  </MenuList>\n                </ClickAwayListenerV2>\n              </Paper>\n            </Grow>\n          )}\n        </Popper>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default withStyles(styles)(InnerNestedSidebarButton);","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport AddBoxIcon from '@material-ui/icons/AddBox';\nimport Popper from '@material-ui/core/Popper';\nimport {withStyles} from '@material-ui/core';\nimport MenuList from '@material-ui/core/MenuList';\nimport Grow from '@material-ui/core/Grow';\n\nimport InnerNestedSidebarButton from './InnerNestedSidebarButton';\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\n\nconst styles = theme => ({\n  root: {},\n  button: {\n    flex: '0 0 100%',\n    justifyContent: 'left',\n    padding: 10,\n  },\n  paper: {\n    margin: theme.spacing.unit * 2,\n    display: 'flex',\n  },\n  label: {\n    paddingLeft: 10,\n  },\n  popper: {\n    zIndex: 1200,\n    left: '13px !important',\n  },\n  itemListIcon: {\n    height: 24,\n    width: 24,\n    paddingRight: 15,\n  },\n});\n\nclass NestedSidebarButton extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {anchorEl: null};\n  }\n\n  handleMenu = event => {\n    if (event.currentTarget === this.state.lastTarget)\n      return;\n    this.setState({anchorEl: event.currentTarget});\n  };\n\n  handleClose = () => {\n    this.setState({\n      anchorEl: null,\n      lastTarget: this.state.anchorEl\n    }, () => new Promise(resolve => setTimeout(resolve, 100)).then(() => this.setState({lastTarget: null})));\n  };\n\n  render() {\n    const {classes, listItems, label, appObject} = this.props;\n    const {anchorEl} = this.state;\n    const open = Boolean(anchorEl);\n    return (\n      <React.Fragment key={label}>\n        <Paper className={classes.paper}>\n          <Button\n            aria-owns={open ? 'menu-appbar' : null}\n            aria-haspopup=\"true\"\n            onClick={open ? this.handleClose : this.handleMenu}\n            className={classes.button}\n          >\n            <AddBoxIcon/>\n            <div className={classes.label}>{label}</div>\n          </Button>\n          <Popper className={classes.popper} open={open} anchorEl={anchorEl} transition placement=\"right-start\">\n            {({TransitionProps, placement}) => (\n              <Grow\n                {...TransitionProps}\n                id=\"menu-list-grow\"\n                style={{transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom'}}\n              >\n                <Paper>\n                  <ClickAwayListener onClickAway={this.handleClose}>\n                    <MenuList>\n                      {Object.keys(listItems).map(key => {\n                        const returnDivList = [];\n                        if (['Miner'].includes(key)) {\n                          listItems[key].forEach(resource => {\n                            returnDivList.push(<InnerNestedSidebarButton appObject={appObject} resource={resource}/>);\n                          });\n                        }\n                        return returnDivList;\n                      })}\n                    </MenuList>\n                  </ClickAwayListener>\n                </Paper>\n              </Grow>\n            )}\n          </Popper>\n        </Paper>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default withStyles(styles)(NestedSidebarButton);","import React from 'react';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport AddBoxIcon from '@material-ui/icons/AddBox';\nimport Popper from '@material-ui/core/Popper';\nimport {withStyles} from '@material-ui/core';\nimport MenuList from '@material-ui/core/MenuList';\nimport Grow from '@material-ui/core/Grow';\nimport ClickAwayListenerV2 from \"./ClickAwayListenerV2\";\n\nconst styles = theme => ({\n  root: {\n  },\n  button: {\n    flex: '0 0 100%',\n    justifyContent: 'left',\n    padding: 10,\n  },\n  paper: {\n    margin: theme.spacing.unit * 2,\n    display: 'flex',\n  },\n  label: {\n    paddingLeft: 10,\n  },\n  popper: {\n    zIndex: 1200,\n    left: '13px !important',\n  },\n  itemListIcon: {\n    height: 24,\n    width: 24,\n    paddingRight: 15,\n  },\n});\n\nclass SimpleSidebarButton extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {anchorEl : null};\n  }\n\n  handleMenu = event => {\n    if (event.currentTarget === this.state.lastTarget)\n      return;\n    this.setState({ anchorEl: event.currentTarget });\n  };\n\n  handleClose = () => {\n    this.setState({ anchorEl: null, lastTarget: this.state.anchorEl}, () => new Promise(resolve => setTimeout(resolve, 100)).then(()=> this.setState({lastTarget: null})) );\n  };\n\n  render() {\n    const { classes, listItems, label, appObject } = this.props;\n    const { anchorEl } = this.state;\n    const open = Boolean(anchorEl);\n\n    return (\n      <Paper className={classes.paper}>\n        <Button\n          aria-owns={open ? 'menu-appbar' : null}\n          aria-haspopup=\"true\"\n          onClick={open ? this.handleClose : this.handleMenu}\n          className={classes.button}\n        >\n          <AddBoxIcon/>\n          <div className={classes.label}>Logistics</div>\n        </Button>\n        <Popper className={classes.popper} open={open} anchorEl={anchorEl} transition placement=\"right-start\">\n          {({ TransitionProps, placement }) => (\n            <Grow\n              {...TransitionProps}\n              id=\"menu-list-grow\"\n              style={{ transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom' }}\n            >\n              <Paper>\n                <ClickAwayListenerV2 onClickAway={this.handleClose} clobberedElement={'#mainRender'}>\n                  <MenuList>\n                    {Object.keys(listItems).map(key => {\n                      const returnDivList = [];\n                      if (!['Miner', 'Logistic'].includes(key)) {\n                        listItems[key].forEach(resource => {\n                          returnDivList.push(<MenuItem onClick={ () => {\n                            const machine_nodes = appObject.state.machine_node.machine_node;\n                            machine_nodes.sort((node1, node2) => node1.rank - node2.rank);\n                            const upgrades = machine_nodes.filter(node => node.machine_class.id === resource.machine_class.id );\n                            const instance = upgrades[0];\n                            appObject.graphSvg.addNode(\n                              {\n                                data: {recipe: resource},\n                                machine: resource.machine_class,\n                                allowedIn: [],\n                                allowedOut: [],\n                                instance: instance,\n                                upgradeTypes: upgrades\n                              }\n                            );\n                            this.handleClose();\n                          }}\n                          key={resource.machine_class.name+resource.machine_class.id}>\n                            <img\n                              src={resource.machine_class.icon} className={classes.itemListIcon} />{resource.machine_class.name}</MenuItem>);\n                        });\n                      }\n                      if (['Logistic'].includes(key)) {\n                        listItems[key].forEach(resource => {\n                          returnDivList.push(<MenuItem onClick={ () => {\n                            const machine_nodes = appObject.state.machine_node.machine_node;\n                            machine_nodes.sort((node1, node2) => node1.rank - node2.rank);\n                            const upgrades = machine_nodes.filter(node => node.machine_class.id === resource.machine_class.id && resource.name === node.name);\n                            const instance = upgrades[0]\n                            appObject.graphSvg.addNode(\n                              {\n                                data: {recipe: resource},\n                                machine: resource.machine_class,\n                                allowedIn: [],\n                                allowedOut: [],\n                                instance: instance,\n                                upgradeTypes: upgrades\n                              }\n                            );\n                            this.handleClose();\n                          }}\n                          key={resource.name}>\n                            <img src={resource.icon} className={classes.itemListIcon} />{resource.name}</MenuItem>);\n                        });\n                      }\n                      return returnDivList;\n                    })}\n                  </MenuList>\n                </ClickAwayListenerV2>\n              </Paper>\n            </Grow>\n          )}\n        </Popper>\n      </Paper>\n    );\n  }\n}\n\nexport default withStyles(styles) (SimpleSidebarButton);","import React from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport ShuffleIcon from '@material-ui/icons/Shuffle';\nimport ReplayIcon from '@material-ui/icons/Replay';\nimport UndoIcon from '@material-ui/icons/Undo';\nimport {withStyles} from '@material-ui/core';\nimport FormControl from '@material-ui/core/FormControl';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Select from '@material-ui/core/Select';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Chip from '@material-ui/core/Chip';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nconst styles = theme => ({\n  root : {\n  },\n  paper: {\n    margin: 16,\n    padding: 12,\n    display: 'flex',\n    flexDirection: 'column',\n    flexShrink: 0\n  },\n  textField: {\n    paddingBottom: 10,\n  },\n  button: {\n    flex: 1,\n    marginTop: 10,\n  },\n  label: {\n    paddingLeft: 10,\n  },\n  chips: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  chip: {\n    margin: theme.spacing.unit / 4,\n  },\n  tooltip: {},\n  tooltipIcon: {\n    height: 40,\n    display: 'inline-block',\n    paddingLeft: 10\n  },\n  tooltipIconFirst: {\n    height: 40,\n    display: 'inline-block',\n  },\n  tooltipText: {\n    fontSize: 18,\n    display: 'inline-block',\n  },\n});\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n    },\n  },\n};\n\nclass SidebarPanel extends React.Component {\n  \n  constructor(props) {\n    super(props);\n    this.state = { playerUnlock: this.props.playerUnlock.player_unlock, recipe : this.props.playerUnlock.recipe, selectedDrives: []};\n  }\n\n  handleChangeMultiple = event => {\n    console.log(event.currentTarget);\n    const options = event.currentTarget.parentElement.children;\n    const value = [];\n    for (let i = 0, l = options.length; i < l; i += 1) {\n      if (options[i].getAttribute('value') === event.currentTarget.getAttribute('value')) {\n        if (this.state.selectedDrives.indexOf(options[i].getAttribute('value')) === -1) {\n          value.push(options[i].getAttribute('value'));\n        }\n      } else {\n        if (options[i].querySelector('input').checked) {\n          value.push(options[i].getAttribute('value'));\n        }\n      }\n    }\n    this.setState({\n      selectedDrives: value,\n    });\n  };\n\n  render() {\n    const { classes, parentState, playerUnlock } = this.props;\n    return (\n      <Paper className={classes.paper}>\n        <Typography variant=\"h5\">Settings</Typography>\n        {/*<TextField*/}\n          {/*label='Default Conveyor Speed'*/}\n          {/*type='number'*/}\n          {/*className={classes.textField}*/}\n          {/*fullWidth*/}\n        {/*>*/}\n        {/*</TextField>*/}\n\n        {/*<FormControl className={classes.formControl}>*/}\n          {/*<InputLabel htmlFor=\"select-multiple-chip\">Hard Drives</InputLabel>*/}\n          {/*<Select*/}\n            {/*multiple*/}\n            {/*value={this.state.selectedDrives}*/}\n            {/*onChange={this.handleChangeMultiple}*/}\n            {/*input={<Input id=\"select-multiple-chip\" />}*/}\n            {/*MenuProps={MenuProps}*/}\n            {/*renderValue={selected => (*/}\n              {/*<div className={classes.chips}>*/}\n                {/*{selected.map(value => (*/}\n                  {/*<Chip key={value} label={value} className={classes.chip} />*/}\n                {/*))}*/}\n              {/*</div>*/}\n            {/*)}*/}\n          {/*>*/}\n            {/*{this.state.playerUnlock.map(drive => {*/}\n              {/*return (<Tooltip key={drive.name+drive.id+'toolip'} className={classes.tooltip} placement=\"right\" title={*/}\n                {/*this.state.recipe[drive.id].inputs.map((element, index) => {*/}\n                  {/*return (*/}\n                    {/*<React.Fragment key={element.item.id}>*/}\n                      {/*<img src={element.item.icon} className={index === 0 ? classes.tooltipIconFirst : classes.tooltipIcon}/>*/}\n                      {/*<div className={classes.tooltipText}>{element.quantity}</div>*/}\n                    {/*</React.Fragment>*/}\n                  {/*);*/}\n                {/*})*/}\n              {/*}>*/}\n                {/*<MenuItem key={drive.name+drive.id} value={drive.name}>*/}\n                  {/*<Checkbox checked={this.state.selectedDrives.indexOf(drive.name) !== -1} color=\"primary\" />*/}\n                  {/*<ListItemText primary={drive.name} />*/}\n                {/*</MenuItem>*/}\n              {/*</Tooltip>);*/}\n            {/*})}*/}\n          {/*</Select>*/}\n        {/*</FormControl>*/}\n\n        <Button className={classes.button} fullWidth onClick={() => {\n          parentState.graphSvg.jiggle();\n        }}>\n          <ShuffleIcon/>\n          <div className={classes.label}>Rejiggle Graph</div>\n        </Button>\n        <Button className={classes.button} fullWidth onClick={() => {\n          parentState.graphSvg.resetCamera();\n        }}>\n          <ReplayIcon/>\n          <div className={classes.label}>Reset Camera</div>\n        </Button>\n        <Button className={classes.button} fullWidth onClick={() => {\n          parentState.graphSvg.fixNodes();\n        }}>\n          <ReplayIcon/>\n          <div className={classes.label}>Fix Nodes</div>\n        </Button>\n        <Button className={classes.button} fullWidth onClick={() => {\n          parentState.graphSvg.unfixNodes();\n        }}>\n          <UndoIcon/>\n          <div className={classes.label}>Unfix Nodes</div>\n        </Button>\n      </Paper>\n    );\n  }\n}\n\nexport default withStyles(styles) (SidebarPanel);","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nimport PopupDialog from './PopupDialog';\nimport {withStyles} from '@material-ui/core';\n\nconst styles = theme => ({\n  label: {\n    paddingLeft: 10,\n  },\n  dialogContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n});\n\nclass ClearButton extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {modalOpen: false};\n  }\n\n  handleModalClose = () => this.setState({modalOpen: false});\n  handleModalOpen = () => this.setState({modalOpen: true});\n\n\n  render() {\n    const {classes, label, title, children, onClick} = this.props;\n    return (\n      <React.Fragment>\n        <Button color='inherit' onClick={onClick || this.handleModalOpen}>\n          <DeleteIcon />\n          <div className={classes.label}>Clear</div>\n        </Button>\n        <PopupDialog title={'Clear Graph?'} open={this.state.modalOpen}\n          handleModalClose={this.handleModalClose} >\n          <div className={classes.dialogContainer}>\n            <Typography variant=\"h5\">Are you sure you want to clear everything?</Typography>\n            <Button color=\"secondary\" variant=\"outlined\" className={`${classes.dialogButton}`} onClick={\n              () => {\n                this.props.t.graphSvg.clearGraphData(this.props.t);\n                this.handleModalClose();\n              }\n            }>\n              <DeleteIcon />\n              <div className={classes.label}>Yes, I'm sure!</div>\n            </Button>\n          </div>\n        </PopupDialog>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default withStyles(styles)(ClearButton);","import React from 'react';\nimport Button from '@material-ui/core/Button';\n\nimport PopupDialog from './PopupDialog';\nimport {withStyles} from '@material-ui/core';\nimport ShareIcon from '@material-ui/icons/Share';\nimport FileCopyIcon from '@material-ui/icons/FileCopy';\nimport TextField from '@material-ui/core/TextField';\n\nconst styles = theme => ({\n  label: {\n    paddingLeft: 10,\n  },\n  dialogContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  inlineDialogButton : {\n    paddingTop: 10,\n    paddingBottom: 10,\n  },\n  dialogButton: {\n    marginTop: 10,\n  },\n  statusMessage: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n});\n\nclass ShareButton extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {modalOpen: false};\n  }\n\n  handleModalClose = () => this.setState({modalOpen: false});\n  handleModalOpen = () => this.setState({modalOpen: true});\n\n\n  render() {\n    const {classes, label, title, children, onClick} = this.props;\n    let value = '';\n    if (this.props.t && this.props.t.graphSvg) {\n      value = this.props.t.graphSvg.compressGraphData();\n    }\n    return (\n      <React.Fragment>\n        <Button color='inherit' onClick={onClick || this.handleModalOpen}>\n          <ShareIcon/>\n          <div className={classes.label}>Share</div>\n        </Button>\n        <PopupDialog title={'Share Code'} open={this.state.modalOpen}\n          handleModalClose={this.handleModalClose} >\n          <div className={classes.dialogContainer}>\n            <div>\n              <TextField inputRef={ref => this.inputRef = ref} label=\"Share Code\" value={value}>\n              </TextField>\n              <Button color=\"inherit\" className={classes.inlineDialogButton} onClick={\n                () => new Promise(resolve => {\n                  this.inputRef.select();\n                  document.execCommand('copy');\n                  resolve(true);\n                }).then(a => {\n                  this.setState({statusMessage: 'Copied!'}, () => {\n                    setTimeout(() => {\n                      this.setState({statusMessage: ''});\n                    }, 3000);\n                  });\n                })}\n\n              //     setTimeout(() => {\n              //\n              //     }, 200);\n              //\n              //   }\n              // }\n              >\n                <FileCopyIcon/>\n                <div className={classes.label}>Copy</div>\n              </Button>\n            </div>\n            <Button color=\"inherit\" className={classes.dialogButton} fullWidth>\n              <div className={classes.label}>Generate Image</div>\n            </Button>\n            <div className={classes.statusMessage}>\n              {this.state.statusMessage}\n            </div>\n          </div>\n        </PopupDialog>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default withStyles(styles)(ShareButton);","import React from 'react';\nimport Button from '@material-ui/core/Button';\n\nimport PopupDialog from './PopupDialog';\nimport {withStyles} from '@material-ui/core';\nimport InputIcon from '@material-ui/icons/Input';\nimport TextField from '@material-ui/core/TextField';\n\nconst styles = theme => ({\n  label: {\n    paddingLeft: 10,\n  },\n  dialogContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  inlineDialogButton : {\n    paddingTop: 10,\n    paddingBottom: 10,\n  },\n  dialogButton: {\n    marginTop: 10,\n  },\n  statusMessage: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n});\n\nclass LoadButton extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {modalOpen: false, inputValue: ''};\n  }\n\n  handleModalClose = () => this.setState({modalOpen: false});\n  handleModalOpen = () => this.setState({modalOpen: true});\n\n\n  render() {\n    const {classes, label, title, children, onClick} = this.props;\n    // if (this.props.t && this.props.t.graphSvg) {\n    //   value =\n    // }\n    return (\n      <React.Fragment>\n        <Button color='inherit' onClick={onClick || this.handleModalOpen}>\n          <InputIcon/>\n          <div className={classes.label}>Load</div>\n        </Button>\n        <PopupDialog title={'Load Code'} open={this.state.modalOpen}\n          handleModalClose={this.handleModalClose} >\n          <div className={classes.dialogContainer}>\n\n\n            <div>\n              <TextField label=\"Load Code\" value={this.state.inputValue} onChange={e => {\n                this.setState({inputValue: e.target.value})\n              }}>\n              </TextField>\n              <Button color=\"inherit\" className={classes.inlineDialogButton} onClick={\n                () => new Promise((resolve, reject) => {\n                  try {\n                    const data = this.props.t.graphSvg.inflateGraphData(this.state.inputValue);\n\n                    this.props.t.graphSvg.loadGraphData(data);\n                    resolve(true);\n                  } catch (err) {\n                    console.error(err);\n                    reject(err);\n                  }\n                }).then(a => {\n                  this.setState({statusMessage: 'Loaded!'}, () => {\n                    setTimeout(() => {\n                      this.setState({statusMessage: ''});\n                    }, 3000);\n                  });\n                }).catch(err => {\n                  this.setState({statusMessage: 'Invalid load code!'}, () => {\n                    setTimeout(() => {\n                      this.setState({statusMessage: ''});\n                    }, 3000);\n                  });\n                })}\n\n              //     setTimeout(() => {\n              //\n              //     }, 200);\n              //\n              //   }\n              // }\n              >\n                <InputIcon/>\n                <div className={classes.label}>Load</div>\n              </Button>\n            </div>\n            <div className={classes.statusMessage}>\n              {this.state.statusMessage}\n            </div>\n          </div>\n        </PopupDialog>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default withStyles(styles)(LoadButton);","import React from 'react';\nimport {Typography, withStyles} from '@material-ui/core';\nimport Paper from '@material-ui/core/Paper';\nimport Input from '@material-ui/core/Input';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Select from '@material-ui/core/Select';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport TextField from '@material-ui/core/TextField';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Radio from '@material-ui/core/Radio';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport IconButton from '@material-ui/core/IconButton';\nimport {updateNodeTierExternal} from \"./GraphSvg/nodeActions\";\nimport * as d3 from 'd3';\nconst drawerWidth = 310;\n\nconst styles = theme => ({\n  root : {\n  },\n  formControl: {\n    maxWidth: drawerWidth,\n  },\n  paper: {\n    position: 'absolute',\n    left: drawerWidth + 20,\n    bottom: 20,\n    margin: 16,\n    padding: 12,\n    minWidth: drawerWidth - 100,\n  },\n  textField: {\n    paddingBottom: 10,\n  },\n  button: {\n  },\n  label: {\n    paddingLeft: 10,\n  },\n});\n\nconst ITEM_HEIGHT = 48;\nconst ITEM_PADDING_TOP = 8;\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      minWidth: drawerWidth / 2,\n    },\n  },\n};\n\nconst names = [\n  'Oliver Hansen',\n  'Van Henry',\n  'April Tucker',\n  'Ralph Hubbard',\n  'Omar Alexander',\n  'Carlos Abbott',\n  'Miriam Wagner',\n  'Bradley Wilkerson',\n  'Virginia Andrews',\n  'Kelly Snyder',\n];\n\nclass SelectorPanel extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = { dummy: false};\n  }\n\n  update = () => {\n    if (this.props.selected.machine)  {\n      const el = d3.select('#' + 'node-level-accessor-' + this.props.selected.id);\n      updateNodeTierExternal(el);\n    } else {\n      // it's a path\n      const el = d3.select('#' + 'path-parent' + this.props.selected.source.id + '-' + this.props.selected.target.id);\n      updateNodeTierExternal(el);\n    }\n  }\n\n  upgrade = () => {\n    const instance = this.props.selected.instance\n    let index = this.props.selected.upgradeTypes.indexOf(instance);\n    const n = this.props.selected.upgradeTypes.length;\n    index = (index + 1);\n    if (index >= n) return;\n    this.props.selected.instance = this.props.selected.upgradeTypes[index];\n    this.update();\n\n    this.setState({dummy: !this.state.dummy});\n  }\n\n  downgrade = () => {\n    const instance = this.props.selected.instance\n    let index = this.props.selected.upgradeTypes.indexOf(instance);\n    const n = this.props.selected.upgradeTypes.length;\n    index = index - 1;\n\n    if (index < 0) return;\n\n    this.props.selected.instance = this.props.selected.upgradeTypes[index];\n    this.update();\n\n    this.setState({dummy: !this.state.dummy});\n  }\n\n  render() {\n    const { classes, label } = this.props;\n    return(\n      <Paper className={classes.paper}>\n        <Typography variant='h5'>{label}</Typography>\n        <IconButton color=\"primary\" className={classes.button} onClick={this.upgrade}>\n          <ArrowUpwardIcon />\n        </IconButton>\n        {this.props.selected.instance.name}\n        <IconButton color=\"secondary\" className={classes.button} onClick={this.downgrade}>\n          <ArrowDownwardIcon />\n        </IconButton>\n      </Paper>\n    );\n  }\n}\n\nexport default withStyles(styles) (SelectorPanel);","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {createMuiTheme, MuiThemeProvider, withStyles} from '@material-ui/core/styles';\nimport Drawer from '@material-ui/core/Drawer';\nimport AppBar from '@material-ui/core/AppBar';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport InfoIcon from '@material-ui/icons/Info';\n\nimport WarningIcon from '@material-ui/icons/Warning';\nimport OfflineBoltIcon from '@material-ui/icons/OfflineBolt';\nimport SettingsInputComponentIcon from '@material-ui/icons/SettingsInputComponent';\n\nimport Button from '@material-ui/core/Button';\nimport Loader from './Loader';\nimport createDatabase from './newData';\nimport GraphSvg from './GraphSvg';\n\nimport SidebarButton from './SidebarButton';\nimport FabPopup from './FabPopup';\nimport SidebarPopup from './SidebarPopup';\nimport NestedSidebarButton from './NestedSidebarButton';\nimport SimpleSidebarButton from './SimpleSidebarButton';\nimport SidebarPanel from './SidebarPanel';\nimport ClearButton from './ClearButton';\nimport ShareButton from './ShareButton';\nimport LoadButton from './LoadButton';\nimport SelectorPanel from './SelectorPanel';\n// import * as d3 from 'd3';\n\n/* global d3 */\n\nconst drawerWidth = 310;\n\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n    flexGrow: 1,\n    flexBasis: 'auto',\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n    display: 'flex',\n    paddingTop: 64,\n  },\n  drawerPaper: {\n    width: drawerWidth,\n    position: 'unset'\n  },\n  drawerTitle: {\n    paddingLeft: 15,\n    paddingTop: 5,\n  },\n  content: {\n    display: 'flex',\n    flexGrow: 1,\n    paddingTop: 64,\n  },\n  toolbar: theme.mixins.toolbar,\n  logo: {\n    width: drawerWidth,\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  pathIcon: {\n    height: 15,\n    width: 15,\n    display: 'inline-block'\n  },\n  pathText: {\n    display: 'inline-block'\n  },\n  paper: {\n    margin: theme.spacing.unit * 2,\n    display: 'flex',\n  },\n  button: {\n    flex: '0 0 100%',\n  },\n  label: {\n    paddingLeft: 10,\n  },\n  inlineDialogButton : {\n    paddingTop: 10,\n    paddingBottom: 10,\n  },\n  dialogButton: {\n    marginTop: 10,\n  },\n  dialogContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  clearButton: {\n    paddingTop: 20,\n  },\n});\n\nconst theme = createMuiTheme({\n  typography: {\n    useNextVariants: true,\n  },\n  palette: {\n    primary: {\n      main: '#424242'\n    },\n  }\n});\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loaded: false\n    };\n  }\n\n  getRefkeyTable(table) {\n    const db = this.state.db;\n    const tableRef = db.getSchema().table(table);\n    return new Promise(resolve => db.select()\n      .from(tableRef).exec().then(results => resolve(results)));\n  }\n\n  generateRecursiveStructure(startingTable) {\n    const db = this.state.db;\n    const starting = db.getSchema().table(startingTable);\n    this.globalStructure = this.globalStructure || {};\n    const globalStructure = this.globalStructure;\n\n    return db.select().from(starting).exec().then(async results => {\n      if (results.length > 0) {\n        globalStructure[startingTable] = results;\n\n        const refKeysToProcess = Object.keys(results[0]).filter(str => str.endsWith('_id'));\n\n        while (refKeysToProcess.length > 0) {\n          const refKey = refKeysToProcess.pop();\n          const tableName = refKey.slice(0, -3);\n          if (!globalStructure[tableName]) {\n            globalStructure[tableName] = await this.getRefkeyTable(tableName);\n            Object.keys(globalStructure[tableName]).filter(str => str.endsWith('_id'))\n              .forEach(name => {\n                if (!globalStructure[name.slice(0, -3)]) {\n                  refKeysToProcess.push(name);\n                }\n              });\n          }\n        }\n\n        const recursiveFind = (element, functionToApply) => {\n          if (Array.isArray(element)) {\n            element.forEach((elem, index) => {\n              const shouldChangeThis = recursiveFind(elem, functionToApply);\n              if (shouldChangeThis) {\n                console.error('Why are we doing this to an array?');\n                element[index] = functionToApply(elem);\n              }\n            });\n            return false;\n          } else if (typeof element === 'object') {\n            Object.keys(element).forEach(key => {\n              const elem = element[key];\n\n              const shouldChangeThis = recursiveFind(elem, functionToApply);\n              if (shouldChangeThis) {\n                functionToApply(elem, key, element);\n              }\n            });\n            return false;\n          } else {\n            return true;\n          }\n        };\n\n        Object.keys(globalStructure).forEach(key => {\n          const rows = globalStructure[key];\n          rows.forEach(row => {\n            Object.keys(row).filter(str => str.endsWith('_id')).forEach(rowKey => {\n              const refId = row[rowKey];\n              const tableName = rowKey.slice(0, -3);\n              const associatedData = globalStructure[tableName];\n              delete row[rowKey];\n              const possibleData = associatedData.filter(elem => elem.id === refId);\n              if (possibleData.length === 1) {\n                row[tableName] = possibleData[0];\n              } else {\n                throw new Error('Unrecognized Id ' + refId + ' in ' + rowKey + ' within ' + key);\n              }\n            });\n          });\n        });\n\n        Object.keys(globalStructure).forEach(key => {\n          const rows = globalStructure[key];\n          rows.forEach(row => {\n            Object.keys(row).filter(str => str.endsWith('_id')).forEach(rowKey => {\n              const refId = row[rowKey];\n              const tableName = rowKey.slice(0, -3);\n              const associatedData = globalStructure[tableName];\n              delete row[rowKey];\n\n              const possibleData = associatedData.filter(elem => elem.id === refId);\n              if (possibleData.length === 1) {\n                row[tableName] = possibleData[0];\n              } else {\n                throw new Error('Unrecognized Id ' + refId + ' in ' + rowKey + ' within ' + key);\n              }\n            });\n            Object.keys(row).filter(str => !str.endsWith('_id')).forEach(rowKey => {\n              const rowValue = row[rowKey];\n              const replaceTable = (id, id_name, object) => {\n                if (!id_name.endsWith('_id')) {\n                  if (typeof object[id_name] === 'string' && object[id_name].startsWith('http')) {\n                    const img = new Image();\n                    img.src = object[id_name];\n                  }\n                  return;\n                }\n\n                const refId = id;\n                const tableName = id_name.slice(0, -3);\n                const associatedData = globalStructure[tableName];\n                delete object[id_name];\n\n                const possibleData = associatedData.filter(elem => elem.id === refId);\n                if (possibleData.length === 1) {\n                  object[tableName] = possibleData[0];\n                } else {\n                  throw new Error('Unrecognized Id ' + refId + ' in table ' + id_name + ' within ' + object);\n                }\n              };\n              recursiveFind(rowValue, replaceTable);\n            });\n          });\n        });\n      }\n\n      return globalStructure;\n    });\n  }\n\n  componentDidMount() {\n    createDatabase().then((db) => {\n      this.setState({db, loaded: true});\n    }).then(() => {\n      return this.generateRecursiveStructure('player_unlock').then(player_unlock => {\n        this.setState({player_unlock}, () => {\n          return this.generateRecursiveStructure('recipe').then(recipe => {\n            this.setState({recipe}, () => {\n              return this.generateRecursiveStructure('machine_node').then(machine_node => {\n                this.setState({machine_node}, () => {\n                  return this.generateRecursiveStructure('spring').then(spring => {\n                    this.setState({spring}, () => {\n                      return this.generateRecursiveStructure('path_type').then(path_type => {\n                        this.setState({path_type}, () => {\n                          return this.generateRecursiveStructure('purity_type').then(purity_type => {\n                            this.setState({purity_type, isLoaded: true});\n                          });\n                        });\n                      });\n                    });\n                  });\n                });\n              });\n            });\n          });\n        });\n      });\n    });\n  }\n\n  generateNodeList() {\n    const recipesByMachineClass = {};\n    const machineClassPlural = {};\n    this.state.recipe && this.state.recipe.recipe.forEach(recipe => {\n      const thisList = recipesByMachineClass[recipe.machine_class.name] || [];\n      thisList.push(recipe);\n      recipesByMachineClass[recipe.machine_class.name] = thisList;\n      machineClassPlural[recipe.machine_class.name] = recipe.machine_class.plural;\n    });\n    return Object.keys(recipesByMachineClass).map(key =>\n      <SidebarButton appObject={this} label={machineClassPlural[key]} key={key} items={recipesByMachineClass[key]}/>\n    );\n  }\n\n  generateContainerList() {\n    const springByClass = {};\n    this.state.purity_type && this.state.spring && this.state.spring.spring.forEach(spring => {\n      const thisList = springByClass[spring.spring_type.name] || [];\n      thisList.push(spring);\n      springByClass[spring.spring_type.name] = thisList;\n    });\n\n    // Manually handle splitters and mergers\n    springByClass['Logistic'] = this.state.machine_node.machine_node.filter(elem => elem.machine_class.name === 'Logistic');\n\n\n    return (\n      <React.Fragment>\n        <SimpleSidebarButton label=\"Logistics\" appObject={this} listItems={springByClass} />\n      </React.Fragment>\n\n    );\n  }\n\n  generateUnlocksList() {\n    const dataList = [];\n    this.state.player_unlock && this.state.player_unlock.player_unlock.forEach(player_unlock => {\n      const item = this.state.recipe.recipe.filter(elem => elem.player_unlock && (elem.player_unlock.id === player_unlock.id) )[0];\n      if (item) {\n        // dataList.push({player_unlock, item});\n      }\n    });\n    return (\n      <div>hello</div>\n    );\n  }\n\n  generateSpringList() {\n    this.generateUnlocksList();\n    const springByClass = {};\n    this.state.spring && this.state.spring.spring.forEach(spring => {\n      const thisList = springByClass[spring.spring_type.name] || [];\n      thisList.push(spring);\n      springByClass[spring.spring_type.name] = thisList;\n    });\n    return (\n      <NestedSidebarButton label='Miners' listItems={springByClass} appObject={this}/>\n    );\n  }\n\n  render() {\n    const {classes} = this.props;\n    if (!this.state.isReady) {\n      return <Loader ready={this.state.isLoaded} parentState={this}/>;\n    }\n    const t = this;\n\n    return <div className={classes.root}>\n      <CssBaseline/>\n      <MuiThemeProvider theme={theme}>\n        <AppBar position=\"fixed\" className={classes.appBar}>\n          <Toolbar>\n            <img alt=\"wow so satis factory\" className={classes.logo}\n              src=\"https://raw.githubusercontent.com/rhocode/rhocode.github.io/master/img/satoolsfactory.png\"\n              title=\"logo\"/>\n            <div className={classes.grow}></div>\n            <Button color=\"inherit\"  disabled>\n                <OfflineBoltIcon/>\n            <div className={classes.label}>Analyze</div>\n            </Button>\n            <Button color=\"inherit\" onClick={() => t.graphSvg.analyze()}>\n              <SettingsInputComponentIcon/>\n              <div className={classes.label}>Analyze</div>\n            </Button>\n            <ShareButton t={t} />\n            <LoadButton t={t} />\n            <ClearButton t={t} />\n          </Toolbar>\n        </AppBar>\n\n        <FabPopup title='Help' contents={\n          <React.Fragment>\n            <Typography variant=\"h5\">Graph Basics</Typography>\n            <ul>\n              <li><Typography variant=\"body1\">Use the left menu to add nodes to the graph.</Typography></li>\n              <li><Typography variant=\"body1\">Click once on a node/path to select it.</Typography></li>\n              <li><Typography variant=\"body1\">Press DELETE on a selected node/path to delete it.</Typography></li>\n              <li><Typography variant=\"body1\">Hold down shift - click and drag from a node to direct it to another\n                node.</Typography></li>\n              <li><Typography variant=\"body1\">Use mouse wheel to control overclock (black text in the white circle)</Typography></li>\n            </ul>\n            <Typography variant=\"h5\">Saving/Loading</Typography>\n            <Typography variant=\"body1\">You can share codes using the Share top left button, and load using the Load top left button</Typography>\n            <Typography variant=\"h5\">Legend</Typography>\n            <Typography variant=\"body1\"><span style={{'color': 'gold'}}>Orange</span> numbers means machine wastes time doing nothing</Typography>\n            <Typography variant=\"body1\"><span style={{'color': 'LightCoral'}}>Red</span> numbers means machine isn't processing fast enough</Typography>\n            <Typography variant=\"body1\"><span style={{'color': 'Blue'}}>Blue</span> numbers means the capacity has been overridden to be Infinite in order to speed up calculation</Typography>\n          </React.Fragment>\n        }/>\n        {(this.state.selectedNode && this.state.selectedNode.upgradeTypes.length > 1) || (this.state.selectedPath && this.state.selectedPath.upgradeTypes && this.state.selectedPath.upgradeTypes.length > 1) ? <SelectorPanel label='Tier' graphSvg={this.graphSvg} selected={this.state.selectedNode || this.state.selectedPath} /> : null}\n        <Drawer\n          className={classes.drawer}\n          variant=\"permanent\"\n          classes={{\n            paper: classes.drawerPaper,\n          }}\n        >\n          <List>\n            <Typography variant=\"h5\" className={classes.drawerTitle}>Nodes</Typography>\n            {this.generateNodeList()}\n            {this.generateSpringList()}\n            {this.generateContainerList()}\n          </List>\n          <Divider/>\n          \n          <SidebarPanel parentState={this} playerUnlock={this.state.player_unlock}/>\n          \n          <Divider/>\n\n          <List>\n            <SidebarPopup Icon={InfoIcon} label='About/Disclaimers' title='About/Disclaimers'>\n              <Typography variant=\"body1\">Created by <a href=\"https://github.com/tehalexf\">Alex</a> and <a href=\"https://github.com/thinkaliker\">Adam</a> (<a href=\"https://twitter.com/thinkaliker\">@thinkaliker</a>).</Typography>\n              <Typography variant=\"body1\">Not officially affiliated with Satisfactory, Coffee Stain Studios AB, or THQ Nordic AB.</Typography>\n              <Typography variant=\"body1\">Images sourced from the Satisfactory Wiki, which is sourced from Coffee Stain Studios AB's Satisfactory.</Typography>\n            </SidebarPopup>\n            <SidebarPopup Icon={WarningIcon} label='Known Issues' title='Known Issues'>\n              <ul>\n                <li>Resource nodes do not have purities displayed on the graph</li>\n                <li>Cyclic graphs are disabled.</li>\n              </ul>\n            </SidebarPopup>\n          </List>\n        </Drawer>\n        <main className={classes.content}>\n          {this.state.loaded ? <GraphSvg parentAccessor={this} ref={(graphSvg) => {\n            t.graphSvg = graphSvg;\n          }}/> : <div/>}\n        </main>\n      </MuiThemeProvider>\n    </div>;\n  }\n}\n\nApp.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(App);\n","// PACKAGE DEPENDENCIES\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport 'normalize.css';\nimport './styles/app.scss';\n\n// COMPONENTS\n\n// STYLES\n\n\nReactDOM.render(<App/>, document.getElementById('app'));"],"sourceRoot":""}